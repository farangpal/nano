(()=>{"use strict";var t={842:(t,e,i)=>{i.r(e),i.d(e,{AlphaTimeline:()=>at,Animation:()=>v,AnimationState:()=>bt,AnimationStateAdapter:()=>St,AnimationStateData:()=>Rt,AssetManager:()=>ui,AssetManagerBase:()=>ne,AtlasAttachmentLoader:()=>te,Attachment:()=>g,AttachmentTimeline:()=>ht,BinaryInput:()=>ve,BlendMode:()=>qt,Bone:()=>ie,BoneData:()=>ee,BoundingBoxAttachment:()=>Yt,CURRENT:()=>Ft,CameraController:()=>Bi,ClippingAttachment:()=>Bt,Color:()=>r,Color2Attribute:()=>qi,ColorAttribute:()=>Ui,ConstraintData:()=>se,CurveTimeline:()=>_,CurveTimeline1:()=>j,CurveTimeline2:()=>H,DebugUtils:()=>d,DeformTimeline:()=>ct,Downloader:()=>re,DrawOrderTimeline:()=>ut,Event:()=>ae,EventData:()=>oe,EventQueue:()=>vt,EventTimeline:()=>dt,EventType:()=>At,FIRST:()=>kt,FakeTexture:()=>_t,GLTexture:()=>di,HOLD_FIRST:()=>Tt,HOLD_MIX:()=>It,HOLD_SUBSEQUENT:()=>Et,IkConstraint:()=>le,IkConstraintData:()=>he,IkConstraintTimeline:()=>mt,Input:()=>Ri,IntSet:()=>s,Interpolation:()=>o,JitterEffect:()=>ai,LoadingScreen:()=>rs,M00:()=>pi,M01:()=>fi,M02:()=>gi,M03:()=>xi,M10:()=>wi,M11:()=>bi,M12:()=>yi,M13:()=>vi,M20:()=>Ai,M21:()=>Si,M22:()=>Ci,M23:()=>ki,M30:()=>Ei,M31:()=>Ti,M32:()=>Ii,M33:()=>Mi,ManagedWebGLRenderingContext:()=>li,MathUtils:()=>a,Matrix4:()=>Fi,Mesh:()=>Pi,MeshAttachment:()=>Jt,MixBlend:()=>A,MixDirection:()=>S,OrthoCamera:()=>Li,PathAttachment:()=>Kt,PathConstraint:()=>de,PathConstraintData:()=>ce,PathConstraintMixTimeline:()=>xt,PathConstraintPositionTimeline:()=>ft,PathConstraintSpacingTimeline:()=>gt,PointAttachment:()=>Qt,PolygonBatcher:()=>_i,Pool:()=>u,Position2Attribute:()=>Di,Position3Attribute:()=>Oi,PositionMode:()=>Ot,Pow:()=>l,PowOut:()=>h,RGB2Timeline:()=>lt,RGBA2Timeline:()=>ot,RGBATimeline:()=>nt,RGBTimeline:()=>rt,RegionAttachment:()=>$t,ResizeMode:()=>ts,RotateMode:()=>Ut,RotateTimeline:()=>G,SETUP:()=>Mt,SUBSEQUENT:()=>Ct,ScaleTimeline:()=>Q,ScaleXTimeline:()=>$,ScaleYTimeline:()=>tt,SceneRenderer:()=>$i,SequenceTimeline:()=>wt,Shader:()=>Xi,ShapeRenderer:()=>ji,ShapeType:()=>Wi,ShearTimeline:()=>et,ShearXTimeline:()=>it,ShearYTimeline:()=>st,Skeleton:()=>pe,SkeletonBinary:()=>ye,SkeletonBounds:()=>Je,SkeletonClipping:()=>Qe,SkeletonData:()=>fe,SkeletonDebugRenderer:()=>Hi,SkeletonJson:()=>$e,SkeletonRenderer:()=>Zi,Skin:()=>xe,SkinEntry:()=>ge,Slot:()=>ue,SlotData:()=>we,SpacingMode:()=>Nt,SpineCanvas:()=>ls,SpinePlayer:()=>hs,SpinePlayerEditor:()=>vs,StringSet:()=>n,SwirlEffect:()=>oi,TexCoordAttribute:()=>Ni,Texture:()=>Xt,TextureAtlas:()=>jt,TextureAtlasPage:()=>Gt,TextureAtlasRegion:()=>Zt,TextureFilter:()=>Pt,TextureRegion:()=>Wt,TextureWrap:()=>Vt,TimeKeeper:()=>p,Timeline:()=>W,Touch:()=>Yi,TrackEntry:()=>yt,TransformConstraint:()=>me,TransformConstraintData:()=>be,TransformConstraintTimeline:()=>pt,TransformMode:()=>Dt,TranslateTimeline:()=>Z,TranslateXTimeline:()=>J,TranslateYTimeline:()=>K,Triangulator:()=>Ke,Utils:()=>c,Vector2:()=>m,Vector3:()=>mi,VertexAttachment:()=>x,VertexAttribute:()=>Vi,VertexAttributeType:()=>zi,WebGLBlendModeConverter:()=>ci,WindowedMean:()=>f});class s{constructor(){this.array=new Array}add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}}class n{constructor(){this.entries={},this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,s=t.length;i<s;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}class r{constructor(t=0,e=0,i=0,s=0){this.r=t,this.g=e,this.b=i,this.a=s}set(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,s){return this.r+=t,this.g+=e,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new r).setFromString(t)}}r.WHITE=new r(1,1,1,1),r.RED=new r(1,0,0,1),r.GREEN=new r(0,1,0,1),r.BLUE=new r(0,0,1,1),r.MAGENTA=new r(1,0,1,1);class a{static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*a.degRad)}static sinDeg(t){return Math.sin(t*a.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return a.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,i){let s=Math.random(),n=e-t;return s<=(i-t)/n?t+Math.sqrt(s*n*(i-t)):e-Math.sqrt((1-s)*n*(e-i))}static isPowerOfTwo(t){return t&&0==(t&t-1)}}a.PI=3.1415927,a.PI2=2*a.PI,a.radiansToDegrees=180/a.PI,a.radDeg=a.radiansToDegrees,a.degreesToRadians=a.PI/180,a.degRad=a.degreesToRadians;class o{apply(t,e,i){return t+(e-t)*this.applyInternal(i)}}class l extends o{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}class h extends l{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}class c{static arrayCopy(t,e,i,s,n){for(let r=e,a=s;r<e+n;r++,a++)i[a]=t[r]}static arrayFill(t,e,i,s){for(let n=e;n<i;n++)t[n]=s}static setArraySize(t,e,i=0){let s=t.length;if(s==e)return t;if(t.length=e,s<e)for(let n=s;n<e;n++)t[n]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:c.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}static newFloatArray(t){if(c.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(c.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return c.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return c.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}c.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;class d{static logBones(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}}}class u{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class m{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}class p{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}class f{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}class g{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}class x extends g{constructor(t){super(t),this.id=x.nextID++,this.worldVerticesLength=0,this.timelineAttahment=this}computeWorldVertices(t,e,i,s,n,r){i=n+(i>>1)*r;let a=t.bone.skeleton,o=t.deform,l=this.vertices,h=this.bones;if(!h){o.length>0&&(l=o);let a=t.bone,h=a.worldX,c=a.worldY,d=a.a,u=a.b,m=a.c,p=a.d;for(let t=e,a=n;a<i;t+=2,a+=r){let e=l[t],i=l[t+1];s[a]=e*d+i*u+h,s[a+1]=e*m+i*p+c}return}let c=0,d=0;for(let t=0;t<e;t+=2){let t=h[c];c+=t+1,d+=t}let u=a.bones;if(0==o.length)for(let t=n,e=3*d;t<i;t+=r){let i=0,n=0,r=h[c++];for(r+=c;c<r;c++,e+=3){let t=u[h[c]],s=l[e],r=l[e+1],a=l[e+2];i+=(s*t.a+r*t.b+t.worldX)*a,n+=(s*t.c+r*t.d+t.worldY)*a}s[t]=i,s[t+1]=n}else{let t=o;for(let e=n,a=3*d,o=d<<1;e<i;e+=r){let i=0,n=0,r=h[c++];for(r+=c;c<r;c++,a+=3,o+=2){let e=u[h[c]],s=l[a]+t[o],r=l[a+1]+t[o+1],d=l[a+2];i+=(s*e.a+r*e.b+e.worldX)*d,n+=(s*e.c+r*e.d+e.worldY)*d}s[e]=i,s[e+1]=n}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),c.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=c.newFloatArray(this.vertices.length),c.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.timelineAttahment=this.timelineAttahment}}x.nextID=0;class w{constructor(t){this.id=w.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){let t=new w(this.regions.length);return c.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let i=t.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let s=this.regions[i];e.region!=s&&(e.region=s,e.updateRegion())}getPath(t,e){let i=t,s=(this.start+e).toString();for(let t=this.digits-s.length;t>0;t--)i+="0";return i+=s,i}static nextID(){return w._nextID++}}var b;w._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(b||(b={}));const y=[b.hold,b.once,b.loop,b.pingpong,b.onceReverse,b.loopReverse,b.pingpongReverse];class v{constructor(t,e,i){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new n;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,s,n,r,a,o){if(!t)throw new Error("skeleton cannot be null.");s&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let l=this.timelines;for(let s=0,h=l.length;s<h;s++)l[s].apply(t,e,i,n,r,a,o)}}var A,S;!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(A||(A={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(S||(S={}));const C=0,k=1,E=2,T=3,I=4,M=5,F=6,L=7,R=8,Y=9,B=10,X=11,P=12,V=13,D=14,O=15,N=16,U=17,q=18,z=19;class W{constructor(t,e){this.propertyIds=e,this.frames=c.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let s=1;s<i;s++)if(t[s]>e)return s-1;return i-1}static search(t,e,i){let s=t.length;for(let n=i;n<s;n+=i)if(t[n]>e)return n-i;return s-i}}class _ extends W{constructor(t,e,i){super(t,i),this.curves=c.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=c.newFloatArray(e);c.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,i,s,n,r,a,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==i&&(d[e]=2+u);let m=.03*(s-2*r+o),p=.03*(n-2*a+l),f=.006*(3*(r-o)-s+h),g=.006*(3*(a-l)-n+c),x=2*m+f,w=2*p+g,b=.3*(r-s)+m+.16666667*f,y=.3*(a-n)+p+.16666667*g,v=s+b,A=n+y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=A,b+=x,y+=w,x+=f,w+=g,v+=b,A+=y}getBezierValue(t,e,i,s){let n=this.curves;if(n[s]>t){let r=this.frames[e],a=this.frames[e+i];return a+(t-r)/(n[s]-r)*(n[s+1]-a)}let r=s+18;for(s+=2;s<r;s+=2)if(n[s]>=t){let e=n[s-2],i=n[s-1];return i+(t-e)/(n[s]-e)*(n[s+1]-i)}e+=this.getFrameEntries();let a=n[r-2],o=n[r-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+i]-o)}}class j extends _{constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let s=2;s<=i;s+=2)if(e[s]>t){i=s-2;break}let s=this.curves[i>>1];switch(s){case 0:let s=e[i],n=e[i+1];return n+(t-s)/(e[i+2]-s)*(e[i+2+1]-n);case 1:return e[i+1]}return this.getBezierValue(t,i,1,s-2)}}class H extends _{constructor(t,e,i,s){super(t,e,[i,s])}getFrameEntries(){return 3}setFrame(t,e,i,s){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s}}class G extends j{constructor(t,e,i){super(t,e,C+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.rotation=o.data.rotation);case A.first:o.rotation+=(o.data.rotation-o.rotation)*n}return}let l=this.getCurveValue(i);switch(r){case A.setup:o.rotation=o.data.rotation+l*n;break;case A.first:case A.replace:l+=o.data.rotation-o.rotation;case A.add:o.rotation+=l*n}}}class Z extends H{constructor(t,e,i){super(t,e,k+"|"+i,E+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(r){case A.setup:return o.x=o.data.x,void(o.y=o.data.y);case A.first:o.x+=(o.data.x-o.x)*n,o.y+=(o.data.y-o.y)*n}return}let h=0,c=0,d=W.search(l,i,3),u=this.curves[d/3];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(i-t)/(l[d+3]-t);h+=(l[d+3+1]-h)*e,c+=(l[d+3+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(i,d,1,u-2),c=this.getBezierValue(i,d,2,u+18-2)}switch(r){case A.setup:o.x=o.data.x+h*n,o.y=o.data.y+c*n;break;case A.first:case A.replace:o.x+=(o.data.x+h-o.x)*n,o.y+=(o.data.y+c-o.y)*n;break;case A.add:o.x+=h*n,o.y+=c*n}}}class J extends j{constructor(t,e,i){super(t,e,k+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.x=o.data.x);case A.first:o.x+=(o.data.x-o.x)*n}return}let l=this.getCurveValue(i);switch(r){case A.setup:o.x=o.data.x+l*n;break;case A.first:case A.replace:o.x+=(o.data.x+l-o.x)*n;break;case A.add:o.x+=l*n}}}class K extends j{constructor(t,e,i){super(t,e,E+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.y=o.data.y);case A.first:o.y+=(o.data.y-o.y)*n}return}let l=this.getCurveValue(i);switch(r){case A.setup:o.y=o.data.y+l*n;break;case A.first:case A.replace:o.y+=(o.data.y+l-o.y)*n;break;case A.add:o.y+=l*n}}}class Q extends H{constructor(t,e,i){super(t,e,T+"|"+i,I+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,o){let l=t.bones[this.boneIndex];if(!l.active)return;let h,c,d=this.frames;if(i<d[0]){switch(r){case A.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case A.first:l.scaleX+=(l.data.scaleX-l.scaleX)*n,l.scaleY+=(l.data.scaleY-l.scaleY)*n}return}let u=W.search(d,i,3),m=this.curves[u/3];switch(m){case 0:let t=d[u];h=d[u+1],c=d[u+2];let e=(i-t)/(d[u+3]-t);h+=(d[u+3+1]-h)*e,c+=(d[u+3+2]-c)*e;break;case 1:h=d[u+1],c=d[u+2];break;default:h=this.getBezierValue(i,u,1,m-2),c=this.getBezierValue(i,u,2,m+18-2)}if(h*=l.data.scaleX,c*=l.data.scaleY,1==n)r==A.add?(l.scaleX+=h-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=h,l.scaleY=c);else{let t=0,e=0;if(o==S.mixOut)switch(r){case A.setup:t=l.data.scaleX,e=l.data.scaleY,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*n,l.scaleY=e+(Math.abs(c)*a.signum(e)-e)*n;break;case A.first:case A.replace:t=l.scaleX,e=l.scaleY,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*n,l.scaleY=e+(Math.abs(c)*a.signum(e)-e)*n;break;case A.add:l.scaleX=(h-l.data.scaleX)*n,l.scaleY=(c-l.data.scaleY)*n}else switch(r){case A.setup:t=Math.abs(l.data.scaleX)*a.signum(h),e=Math.abs(l.data.scaleY)*a.signum(c),l.scaleX=t+(h-t)*n,l.scaleY=e+(c-e)*n;break;case A.first:case A.replace:t=Math.abs(l.scaleX)*a.signum(h),e=Math.abs(l.scaleY)*a.signum(c),l.scaleX=t+(h-t)*n,l.scaleY=e+(c-e)*n;break;case A.add:l.scaleX+=(h-l.data.scaleX)*n,l.scaleY+=(c-l.data.scaleY)*n}}}}class $ extends j{constructor(t,e,i){super(t,e,T+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,o){let l=t.bones[this.boneIndex];if(!l.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(l.scaleX=l.data.scaleX);case A.first:l.scaleX+=(l.data.scaleX-l.scaleX)*n}return}let h=this.getCurveValue(i)*l.data.scaleX;if(1==n)r==A.add?l.scaleX+=h-l.data.scaleX:l.scaleX=h;else{let t=0;if(o==S.mixOut)switch(r){case A.setup:t=l.data.scaleX,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*n;break;case A.first:case A.replace:t=l.scaleX,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*n;break;case A.add:l.scaleX=(h-l.data.scaleX)*n}else switch(r){case A.setup:t=Math.abs(l.data.scaleX)*a.signum(h),l.scaleX=t+(h-t)*n;break;case A.first:case A.replace:t=Math.abs(l.scaleX)*a.signum(h),l.scaleX=t+(h-t)*n;break;case A.add:l.scaleX+=(h-l.data.scaleX)*n}}}}class tt extends j{constructor(t,e,i){super(t,e,I+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,o){let l=t.bones[this.boneIndex];if(!l.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(l.scaleY=l.data.scaleY);case A.first:l.scaleY+=(l.data.scaleY-l.scaleY)*n}return}let h=this.getCurveValue(i)*l.data.scaleY;if(1==n)r==A.add?l.scaleY+=h-l.data.scaleY:l.scaleY=h;else{let t=0;if(o==S.mixOut)switch(r){case A.setup:t=l.data.scaleY,l.scaleY=t+(Math.abs(h)*a.signum(t)-t)*n;break;case A.first:case A.replace:t=l.scaleY,l.scaleY=t+(Math.abs(h)*a.signum(t)-t)*n;break;case A.add:l.scaleY=(h-l.data.scaleY)*n}else switch(r){case A.setup:t=Math.abs(l.data.scaleY)*a.signum(h),l.scaleY=t+(h-t)*n;break;case A.first:case A.replace:t=Math.abs(l.scaleY)*a.signum(h),l.scaleY=t+(h-t)*n;break;case A.add:l.scaleY+=(h-l.data.scaleY)*n}}}}class et extends H{constructor(t,e,i){super(t,e,M+"|"+i,F+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(r){case A.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case A.first:o.shearX+=(o.data.shearX-o.shearX)*n,o.shearY+=(o.data.shearY-o.shearY)*n}return}let h=0,c=0,d=W.search(l,i,3),u=this.curves[d/3];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(i-t)/(l[d+3]-t);h+=(l[d+3+1]-h)*e,c+=(l[d+3+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(i,d,1,u-2),c=this.getBezierValue(i,d,2,u+18-2)}switch(r){case A.setup:o.shearX=o.data.shearX+h*n,o.shearY=o.data.shearY+c*n;break;case A.first:case A.replace:o.shearX+=(o.data.shearX+h-o.shearX)*n,o.shearY+=(o.data.shearY+c-o.shearY)*n;break;case A.add:o.shearX+=h*n,o.shearY+=c*n}}}class it extends j{constructor(t,e,i){super(t,e,M+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.shearX=o.data.shearX);case A.first:o.shearX+=(o.data.shearX-o.shearX)*n}return}let l=this.getCurveValue(i);switch(r){case A.setup:o.shearX=o.data.shearX+l*n;break;case A.first:case A.replace:o.shearX+=(o.data.shearX+l-o.shearX)*n;break;case A.add:o.shearX+=l*n}}}class st extends j{constructor(t,e,i){super(t,e,F+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,n,r,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.shearY=o.data.shearY);case A.first:o.shearY+=(o.data.shearY-o.shearY)*n}return}let l=this.getCurveValue(i);switch(r){case A.setup:o.shearY=o.data.shearY+l*n;break;case A.first:case A.replace:o.shearY+=(o.data.shearY+l-o.shearY)*n;break;case A.add:o.shearY+=l*n}}}class nt extends _{constructor(t,e,i){super(t,e,[L+"|"+i,R+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,e,i,s,n,r){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=n,this.frames[t+4]=r}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let t=o.data.color;switch(r){case A.setup:return void h.setFromColor(t);case A.first:h.add((t.r-h.r)*n,(t.g-h.g)*n,(t.b-h.b)*n,(t.a-h.a)*n)}return}let c=0,d=0,u=0,m=0,p=W.search(l,i,5),f=this.curves[p/5];switch(f){case 0:let t=l[p];c=l[p+1],d=l[p+2],u=l[p+3],m=l[p+4];let e=(i-t)/(l[p+5]-t);c+=(l[p+5+1]-c)*e,d+=(l[p+5+2]-d)*e,u+=(l[p+5+3]-u)*e,m+=(l[p+5+4]-m)*e;break;case 1:c=l[p+1],d=l[p+2],u=l[p+3],m=l[p+4];break;default:c=this.getBezierValue(i,p,1,f-2),d=this.getBezierValue(i,p,2,f+18-2),u=this.getBezierValue(i,p,3,f+36-2),m=this.getBezierValue(i,p,4,f+54-2)}1==n?h.set(c,d,u,m):(r==A.setup&&h.setFromColor(o.data.color),h.add((c-h.r)*n,(d-h.g)*n,(u-h.b)*n,(m-h.a)*n))}}class rt extends _{constructor(t,e,i){super(t,e,[L+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,n){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=n}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let t=o.data.color;switch(r){case A.setup:return h.r=t.r,h.g=t.g,void(h.b=t.b);case A.first:h.r+=(t.r-h.r)*n,h.g+=(t.g-h.g)*n,h.b+=(t.b-h.b)*n}return}let c=0,d=0,u=0,m=W.search(l,i,4),p=this.curves[m>>2];switch(p){case 0:let t=l[m];c=l[m+1],d=l[m+2],u=l[m+3];let e=(i-t)/(l[m+4]-t);c+=(l[m+4+1]-c)*e,d+=(l[m+4+2]-d)*e,u+=(l[m+4+3]-u)*e;break;case 1:c=l[m+1],d=l[m+2],u=l[m+3];break;default:c=this.getBezierValue(i,m,1,p-2),d=this.getBezierValue(i,m,2,p+18-2),u=this.getBezierValue(i,m,3,p+36-2)}if(1==n)h.r=c,h.g=d,h.b=u;else{if(r==A.setup){let t=o.data.color;h.r=t.r,h.g=t.g,h.b=t.b}h.r+=(c-h.r)*n,h.g+=(d-h.g)*n,h.b+=(u-h.b)*n}}}class at extends j{constructor(t,e,i){super(t,e,R+"|"+i),this.slotIndex=0,this.slotIndex=i}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.color;if(i<this.frames[0]){let t=o.data.color;switch(r){case A.setup:return void(l.a=t.a);case A.first:l.a+=(t.a-l.a)*n}return}let h=this.getCurveValue(i);1==n?l.a=h:(r==A.setup&&(l.a=o.data.color.a),l.a+=(h-l.a)*n)}}class ot extends _{constructor(t,e,i){super(t,e,[L+"|"+i,R+"|"+i,Y+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,e,i,s,n,r,a,o,l){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=l}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(i<l[0]){let t=o.data.color,e=o.data.darkColor;switch(r){case A.setup:return h.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case A.first:h.add((t.r-h.r)*n,(t.g-h.g)*n,(t.b-h.b)*n,(t.a-h.a)*n),c.r+=(e.r-c.r)*n,c.g+=(e.g-c.g)*n,c.b+=(e.b-c.b)*n}return}let d=0,u=0,m=0,p=0,f=0,g=0,x=0,w=W.search(l,i,8),b=this.curves[w>>3];switch(b){case 0:let t=l[w];d=l[w+1],u=l[w+2],m=l[w+3],p=l[w+4],f=l[w+5],g=l[w+6],x=l[w+7];let e=(i-t)/(l[w+8]-t);d+=(l[w+8+1]-d)*e,u+=(l[w+8+2]-u)*e,m+=(l[w+8+3]-m)*e,p+=(l[w+8+4]-p)*e,f+=(l[w+8+5]-f)*e,g+=(l[w+8+6]-g)*e,x+=(l[w+8+7]-x)*e;break;case 1:d=l[w+1],u=l[w+2],m=l[w+3],p=l[w+4],f=l[w+5],g=l[w+6],x=l[w+7];break;default:d=this.getBezierValue(i,w,1,b-2),u=this.getBezierValue(i,w,2,b+18-2),m=this.getBezierValue(i,w,3,b+36-2),p=this.getBezierValue(i,w,4,b+54-2),f=this.getBezierValue(i,w,5,b+72-2),g=this.getBezierValue(i,w,6,b+90-2),x=this.getBezierValue(i,w,7,b+108-2)}if(1==n)h.set(d,u,m,p),c.r=f,c.g=g,c.b=x;else{if(r==A.setup){h.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}h.add((d-h.r)*n,(u-h.g)*n,(m-h.b)*n,(p-h.a)*n),c.r+=(f-c.r)*n,c.g+=(g-c.g)*n,c.b+=(x-c.b)*n}}}class lt extends _{constructor(t,e,i){super(t,e,[L+"|"+i,Y+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,n,r,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=n,this.frames[t+4]=r,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(i<l[0]){let t=o.data.color,e=o.data.darkColor;switch(r){case A.setup:return h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case A.first:h.r+=(t.r-h.r)*n,h.g+=(t.g-h.g)*n,h.b+=(t.b-h.b)*n,c.r+=(e.r-c.r)*n,c.g+=(e.g-c.g)*n,c.b+=(e.b-c.b)*n}return}let d=0,u=0,m=0,p=0,f=0,g=0,x=W.search(l,i,7),w=this.curves[x/7];switch(w){case 0:let t=l[x];d=l[x+1],u=l[x+2],m=l[x+3],p=l[x+4],f=l[x+5],g=l[x+6];let e=(i-t)/(l[x+7]-t);d+=(l[x+7+1]-d)*e,u+=(l[x+7+2]-u)*e,m+=(l[x+7+3]-m)*e,p+=(l[x+7+4]-p)*e,f+=(l[x+7+5]-f)*e,g+=(l[x+7+6]-g)*e;break;case 1:d=l[x+1],u=l[x+2],m=l[x+3],p=l[x+4],f=l[x+5],g=l[x+6];break;default:d=this.getBezierValue(i,x,1,w-2),u=this.getBezierValue(i,x,2,w+18-2),m=this.getBezierValue(i,x,3,w+36-2),p=this.getBezierValue(i,x,4,w+54-2),f=this.getBezierValue(i,x,5,w+72-2),g=this.getBezierValue(i,x,6,w+90-2)}if(1==n)h.r=d,h.g=u,h.b=m,c.r=p,c.g=f,c.b=g;else{if(r==A.setup){let t=o.data.color,e=o.data.darkColor;h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}h.r+=(d-h.r)*n,h.g+=(u-h.g)*n,h.b+=(m-h.b)*n,c.r+=(p-c.r)*n,c.g+=(f-c.g)*n,c.b+=(g-c.b)*n}}}class ht extends W{constructor(t,e){super(t,[B+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];o.bone.active&&(a!=S.mixOut?i<this.frames[0]?r!=A.setup&&r!=A.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[W.search1(this.frames,i)]):r==A.setup&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class ct extends _{constructor(t,e,i,s){super(t,e,[X+"|"+i+"|"+s.id]),this.slotIndex=0,this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.vertices[t]=i}setBezier(t,e,i,s,n,r,a,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==i&&(d[e]=2+u);let m=.03*(s-2*r+o),p=.03*l-.06*a,f=.006*(3*(r-o)-s+h),g=.018*(a-l+.33333333),x=2*m+f,w=2*p+g,b=.3*(r-s)+m+.16666667*f,y=.3*a+p+.16666667*g,v=s+b,A=y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=A,b+=x,y+=w,x+=f,w+=g,v+=b,A+=y}getCurvePercent(t,e){let i=this.curves,s=i[e];switch(s){case 0:let i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(s-=2,i[s]>t){let n=this.frames[e];return i[s+1]*(t-n)/(i[s]-n)}let n=s+18;for(s+=2;s<n;s+=2)if(i[s]>=t){let e=i[s-2],n=i[s-1];return n+(t-e)/(i[s]-e)*(i[s+1]-n)}let r=i[n-2],a=i[n-1];return a+(1-a)*(t-r)/(this.frames[e+this.getFrameEntries()]-r)}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.getAttachment();if(!(l instanceof x)||l.timelineAttahment!=this.attachment)return;let h=o.deform;0==h.length&&(r=A.setup);let d=this.vertices,u=d[0].length,m=this.frames;if(i<m[0]){switch(r){case A.setup:return void(h.length=0);case A.first:if(1==n)return void(h.length=0);h.length=u;let t=l;if(t.bones){n=1-n;for(p=0;p<u;p++)h[p]*=n}else{let e=t.vertices;for(var p=0;p<u;p++)h[p]+=(e[p]-h[p])*n}}return}if(h.length=u,i>=m[m.length-1]){let t=d[m.length-1];if(1==n)if(r==A.add){let e=l;if(e.bones)for(let e=0;e<u;e++)h[e]+=t[e];else{let i=e.vertices;for(let e=0;e<u;e++)h[e]+=t[e]-i[e]}}else c.arrayCopy(t,0,h,0,u);else switch(r){case A.setup:{let e=l;if(e.bones)for(let e=0;e<u;e++)h[e]=t[e]*n;else{let i=e.vertices;for(let e=0;e<u;e++){let s=i[e];h[e]=s+(t[e]-s)*n}}break}case A.first:case A.replace:for(let e=0;e<u;e++)h[e]+=(t[e]-h[e])*n;break;case A.add:let e=l;if(e.bones)for(let e=0;e<u;e++)h[e]+=t[e]*n;else{let i=e.vertices;for(let e=0;e<u;e++)h[e]+=(t[e]-i[e])*n}}return}let f=W.search1(m,i),g=this.getCurvePercent(i,f),w=d[f],b=d[f+1];if(1==n)if(r==A.add){let t=l;if(t.bones)for(let t=0;t<u;t++){let e=w[t];h[t]+=e+(b[t]-e)*g}else{let e=t.vertices;for(let t=0;t<u;t++){let i=w[t];h[t]+=i+(b[t]-i)*g-e[t]}}}else for(let t=0;t<u;t++){let e=w[t];h[t]=e+(b[t]-e)*g}else switch(r){case A.setup:{let t=l;if(t.bones)for(let t=0;t<u;t++){let e=w[t];h[t]=(e+(b[t]-e)*g)*n}else{let e=t.vertices;for(let t=0;t<u;t++){let i=w[t],s=e[t];h[t]=s+(i+(b[t]-i)*g-s)*n}}break}case A.first:case A.replace:for(let t=0;t<u;t++){let e=w[t];h[t]+=(e+(b[t]-e)*g-h[t])*n}break;case A.add:let t=l;if(t.bones)for(let t=0;t<u;t++){let e=w[t];h[t]+=(e+(b[t]-e)*g)*n}else{let e=t.vertices;for(let t=0;t<u;t++){let i=w[t];h[t]+=(i+(b[t]-i)*g-e[t])*n}}}}}class dt extends W{constructor(t){super(t,dt.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,s,n,r,a){if(!s)return;let o=this.frames,l=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,s,n,r,a),e=-1;else if(e>=o[l-1])return;if(i<o[0])return;let h=0;if(e<o[0])h=0;else{h=W.search1(o,e)+1;let t=o[h];for(;h>0&&o[h-1]==t;)h--}for(;h<l&&i>=o[h];h++)s.push(this.events[h])}}dt.propertyIds=[""+P];class ut extends W{constructor(t){super(t,ut.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,s,n,r,a){if(a==S.mixOut)return void(r==A.setup&&c.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(i<this.frames[0])return void(r!=A.setup&&r!=A.first||c.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=this.drawOrders[W.search1(this.frames,i)];if(o){let e=t.drawOrder,i=t.slots;for(let t=0,s=o.length;t<s;t++)e[t]=i[o[t]]}else c.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}ut.propertyIds=[""+V];class mt extends _{constructor(t,e,i){super(t,e,[D+"|"+i]),this.ikConstraintIndex=i}getFrameEntries(){return 6}setFrame(t,e,i,s,n,r,a){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=n,this.frames[t+4]=r?1:0,this.frames[t+5]=a?1:0}apply(t,e,i,s,n,r,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(r){case A.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case A.first:o.mix+=(o.data.mix-o.mix)*n,o.softness+=(o.data.softness-o.softness)*n,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let h=0,c=0,d=W.search(l,i,6),u=this.curves[d/6];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(i-t)/(l[d+6]-t);h+=(l[d+6+1]-h)*e,c+=(l[d+6+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(i,d,1,u-2),c=this.getBezierValue(i,d,2,u+18-2)}r==A.setup?(o.mix=o.data.mix+(h-o.data.mix)*n,o.softness=o.data.softness+(c-o.data.softness)*n,a==S.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5])):(o.mix+=(h-o.mix)*n,o.softness+=(c-o.softness)*n,a==S.mixIn&&(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5]))}}class pt extends _{constructor(t,e,i){super(t,e,[O+"|"+i]),this.transformConstraintIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,n,r,a,o){let l=this.frames;l[t*=7]=e,l[t+1]=i,l[t+2]=s,l[t+3]=n,l[t+4]=r,l[t+5]=a,l[t+6]=o}apply(t,e,i,s,n,r,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let l,h,c,d,u,m,p=this.frames;if(i<p[0]){let t=o.data;switch(r){case A.setup:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case A.first:o.mixRotate+=(t.mixRotate-o.mixRotate)*n,o.mixX+=(t.mixX-o.mixX)*n,o.mixY+=(t.mixY-o.mixY)*n,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*n,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*n,o.mixShearY+=(t.mixShearY-o.mixShearY)*n}return}let f=W.search(p,i,7),g=this.curves[f/7];switch(g){case 0:let t=p[f];l=p[f+1],h=p[f+2],c=p[f+3],d=p[f+4],u=p[f+5],m=p[f+6];let e=(i-t)/(p[f+7]-t);l+=(p[f+7+1]-l)*e,h+=(p[f+7+2]-h)*e,c+=(p[f+7+3]-c)*e,d+=(p[f+7+4]-d)*e,u+=(p[f+7+5]-u)*e,m+=(p[f+7+6]-m)*e;break;case 1:l=p[f+1],h=p[f+2],c=p[f+3],d=p[f+4],u=p[f+5],m=p[f+6];break;default:l=this.getBezierValue(i,f,1,g-2),h=this.getBezierValue(i,f,2,g+18-2),c=this.getBezierValue(i,f,3,g+36-2),d=this.getBezierValue(i,f,4,g+54-2),u=this.getBezierValue(i,f,5,g+72-2),m=this.getBezierValue(i,f,6,g+90-2)}if(r==A.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*n,o.mixX=t.mixX+(h-t.mixX)*n,o.mixY=t.mixY+(c-t.mixY)*n,o.mixScaleX=t.mixScaleX+(d-t.mixScaleX)*n,o.mixScaleY=t.mixScaleY+(u-t.mixScaleY)*n,o.mixShearY=t.mixShearY+(m-t.mixShearY)*n}else o.mixRotate+=(l-o.mixRotate)*n,o.mixX+=(h-o.mixX)*n,o.mixY+=(c-o.mixY)*n,o.mixScaleX+=(d-o.mixScaleX)*n,o.mixScaleY+=(u-o.mixScaleY)*n,o.mixShearY+=(m-o.mixShearY)*n}}class ft extends j{constructor(t,e,i){super(t,e,N+"|"+i),this.pathConstraintIndex=i}apply(t,e,i,s,n,r,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.position=o.data.position);case A.first:o.position+=(o.data.position-o.position)*n}return}let l=this.getCurveValue(i);r==A.setup?o.position=o.data.position+(l-o.data.position)*n:o.position+=(l-o.position)*n}}class gt extends j{constructor(t,e,i){super(t,e,U+"|"+i),this.pathConstraintIndex=0,this.pathConstraintIndex=i}apply(t,e,i,s,n,r,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(r){case A.setup:return void(o.spacing=o.data.spacing);case A.first:o.spacing+=(o.data.spacing-o.spacing)*n}return}let l=this.getCurveValue(i);r==A.setup?o.spacing=o.data.spacing+(l-o.data.spacing)*n:o.spacing+=(l-o.spacing)*n}}class xt extends _{constructor(t,e,i){super(t,e,[q+"|"+i]),this.pathConstraintIndex=0,this.pathConstraintIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,n){let r=this.frames;r[t<<=2]=e,r[t+1]=i,r[t+2]=s,r[t+3]=n}apply(t,e,i,s,n,r,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let l,h,c,d=this.frames;if(i<d[0]){switch(r){case A.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case A.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*n,o.mixX+=(o.data.mixX-o.mixX)*n,o.mixY+=(o.data.mixY-o.mixY)*n}return}let u=W.search(d,i,4),m=this.curves[u>>2];switch(m){case 0:let t=d[u];l=d[u+1],h=d[u+2],c=d[u+3];let e=(i-t)/(d[u+4]-t);l+=(d[u+4+1]-l)*e,h+=(d[u+4+2]-h)*e,c+=(d[u+4+3]-c)*e;break;case 1:l=d[u+1],h=d[u+2],c=d[u+3];break;default:l=this.getBezierValue(i,u,1,m-2),h=this.getBezierValue(i,u,2,m+18-2),c=this.getBezierValue(i,u,3,m+36-2)}if(r==A.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*n,o.mixX=t.mixX+(h-t.mixX)*n,o.mixY=t.mixY+(c-t.mixY)*n}else o.mixRotate+=(l-o.mixRotate)*n,o.mixX+=(h-o.mixX)*n,o.mixY+=(c-o.mixY)*n}}class wt extends W{constructor(t,e,i){super(t,[z+"|"+e+"|"+i.sequence.id]),this.slotIndex=e,this.attachment=i}getFrameEntries(){return wt.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,i,s,n){let r=this.frames;r[t*=wt.ENTRIES]=e,r[t+wt.MODE]=i|s<<4,r[t+wt.DELAY]=n}apply(t,e,i,s,n,r,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.attachment,h=this.attachment;if(!(l==h||l instanceof x&&l.timelineAttahment==h))return;let c=this.frames;if(i<c[0])return void(r!=A.setup&&r!=A.first||(o.sequenceIndex=-1));let d=W.search(c,i,wt.ENTRIES),u=c[d],m=c[d+wt.MODE],p=c[d+wt.DELAY],f=m>>4,g=this.attachment.sequence.regions.length,w=y[15&m];if(w!=b.hold)switch(f+=(i-u)/p+1e-5|0,w){case b.once:f=Math.min(g-1,f);break;case b.loop:f%=g;break;case b.pingpong:let t=(g<<1)-2;f%=t,f>=g&&(f=t-f);break;case b.onceReverse:f=Math.max(g-1-f,0);break;case b.loopReverse:f=g-1-f%g}o.sequenceIndex=f}}wt.ENTRIES=3,wt.MODE=1,wt.DELAY=2;class bt{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new vt(this),this.propertyIDs=new n,this.animationsChanged=!1,this.trackEntryPool=new u((()=>new yt)),this.data=t}static emptyAnimation(){return Lt||(Lt=new v("<empty>",[],0)),Lt}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let n=t*s.timeScale;if(s.delay>0){if(s.delay-=n,s.delay>0)continue;n=-s.delay,s.delay=0}let r=s.next;if(r){let e=s.trackLast-r.delay;if(e>=0){for(r.delay=0,r.trackTime+=0==s.timeScale?0:(e/s.timeScale+t)*r.timeScale,s.trackTime+=n,this.setCurrent(i,r,!0);r.mixingFrom;)r.mixTime+=t,r=r.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){e[i]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,t)){let t=s.mixingFrom;for(s.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}s.trackTime+=n}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,s=!1;for(let r=0,a=i.length;r<a;r++){let a=i[r];if(!a||a.delay>0)continue;s=!0;let o=0==r?A.first:a.mixBlend,l=a.alpha;a.mixingFrom?l*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(l=0);let h=a.animationLast,d=a.getAnimationTime(),u=d,m=e;a.reverse&&(u=a.animation.duration-u,m=null);let p=a.animation.timelines,f=p.length;if(0==r&&1==l||o==A.add)for(let e=0;e<f;e++){c.webkit602BugfixHelper(l,o);var n=p[e];n instanceof ht?this.applyAttachmentTimeline(n,t,u,o,!0):n.apply(t,h,u,m,l,o,S.mixIn)}else{let e=a.timelineMode,i=a.timelinesRotation.length!=f<<1;i&&(a.timelinesRotation.length=f<<1);for(let s=0;s<f;s++){let n=p[s],r=e[s]==Ct?o:A.setup;n instanceof G?this.applyRotateTimeline(n,t,u,l,r,a.timelinesRotation,s<<1,i):n instanceof ht?this.applyAttachmentTimeline(n,t,u,o,!0):(c.webkit602BugfixHelper(l,o),n.apply(t,h,u,m,l,r,S.mixIn))}}this.queueEvents(a,d),e.length=0,a.nextAnimationLast=d,a.nextTrackLast=a.trackTime}for(var r=this.unkeyedState+Mt,a=t.slots,o=0,l=t.slots.length;o<l;o++){var h=a[o];if(h.attachmentState==r){var d=h.data.attachmentName;h.setAttachment(d?t.getAttachment(h.data.index,d):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(t,e,i){let s=t.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,e,i);let n=0;0==t.mixDuration?(n=1,i==A.first&&(i=A.setup)):(n=t.mixTime/t.mixDuration,n>1&&(n=1),i!=A.first&&(i=s.mixBlend));let r=n<s.attachmentThreshold,a=n<s.drawOrderThreshold,o=s.animation.timelines,l=o.length,h=s.alpha*t.interruptAlpha,d=h*(1-n),u=s.animationLast,m=s.getAnimationTime(),p=m,f=null;if(s.reverse?p=s.animation.duration-p:n<s.eventThreshold&&(f=this.events),i==A.add)for(let t=0;t<l;t++)o[t].apply(e,u,p,f,d,i,S.mixOut);else{let t=s.timelineMode,n=s.timelineHoldMix,m=s.timelinesRotation.length!=l<<1;m&&(s.timelinesRotation.length=l<<1),s.totalAlpha=0;for(let g=0;g<l;g++){let l,x=o[g],w=S.mixOut,b=0;switch(t[g]){case Ct:if(!a&&x instanceof ut)continue;l=i,b=d;break;case kt:l=A.setup,b=d;break;case Et:l=i,b=h;break;case Tt:l=A.setup,b=h;break;default:l=A.setup;let t=n[g];b=h*Math.max(0,1-t.mixTime/t.mixDuration)}s.totalAlpha+=b,x instanceof G?this.applyRotateTimeline(x,e,p,b,l,s.timelinesRotation,g<<1,m):x instanceof ht?this.applyAttachmentTimeline(x,e,p,l,r):(c.webkit602BugfixHelper(b,i),a&&x instanceof ut&&l==A.setup&&(w=S.mixIn),x.apply(e,u,p,f,b,l,w))}}return t.mixDuration>0&&this.queueEvents(s,m),this.events.length=0,s.nextAnimationLast=m,s.nextTrackLast=s.trackTime,n}applyAttachmentTimeline(t,e,i,s,n){var r=e.slots[t.slotIndex];r.bone.active&&(i<t.frames[0]?s!=A.setup&&s!=A.first||this.setAttachment(e,r,r.data.attachmentName,n):this.setAttachment(e,r,t.attachmentNames[W.search1(t.frames,i)],n),r.attachmentState<=this.unkeyedState&&(r.attachmentState=this.unkeyedState+Mt))}setAttachment(t,e,i,s){e.setAttachment(i?t.getAttachment(e.data.index,i):null),s&&(e.attachmentState=this.unkeyedState+Ft)}applyRotateTimeline(t,e,i,s,n,r,o,l){if(l&&(r[o]=0),1==s)return void t.apply(e,0,i,null,1,n,S.mixIn);let h=e.bones[t.boneIndex];if(!h.active)return;let c=0,d=0;if(i<t.frames[0])switch(n){case A.setup:h.rotation=h.data.rotation;default:return;case A.first:c=h.rotation,d=h.data.rotation}else c=n==A.setup?h.data.rotation:h.rotation,d=h.data.rotation+t.getCurveValue(i);let u=0,m=d-c;if(m-=360*(16384-(16384.499999999996-m/360|0)),0==m)u=r[o];else{let t=0,e=0;l?(t=0,e=m):(t=r[o],e=r[o+1]);let i=m>0,s=t>=0;a.signum(e)!=a.signum(m)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*a.signum(t)),s=i),u=m+t-t%360,s!=i&&(u+=360*a.signum(t)),r[o]=u}r[o+1]=m,h.rotation=c+u*s}queueEvents(t,e){let i=t.animationStart,s=t.animationEnd,n=s-i,r=t.trackLast%n,a=this.events,o=0,l=a.length;for(;o<l;o++){let e=a[o];if(e.time<r)break;e.time>s||this.queue.event(t,e)}let h=!1;for(h=t.loop?0==n||r>t.trackTime%n:e>=s&&t.animationLast<s,h&&this.queue.complete(t);o<l;o++){let e=a[o];e.time<i||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let t=i.mixingFrom;if(!t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let s=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,s&&(i&&this.queue.interrupt(s),e.mixingFrom=s,s.mixingTo=e,e.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(e.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,s,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let s=!0,n=this.expandToIndex(t);n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,s=!1):this.clearNext(n));let r=this.trackEntry(t,e,i,n);return this.setCurrent(t,r,s),this.queue.drain(),r}addAnimation(t,e,i=!1,s=0){let n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,s)}addAnimationWith(t,e,i=!1,s=0){if(!e)throw new Error("animation cannot be null.");let n=this.expandToIndex(t);if(n)for(;n.next;)n=n.next;let r=this.trackEntry(t,e,i,n);return n?(n.next=r,r.previous=n,s<=0&&(s+=n.getTrackComplete()-r.mixDuration)):(this.setCurrent(t,r,!0),this.queue.drain()),r.delay=s,r}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,bt.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let s=this.addAnimationWith(t,bt.emptyAnimation(),!1,i);return i<=0&&(s.delay+=s.mixDuration-e),s.mixDuration=e,s.trackEnd=e,s}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(c.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,s){let n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=i,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=s?this.data.getMix(s.animation,e):0,n.mixBlend=A.replace,n}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&i.mixBlend==A.add||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,s=t.animation.timelines.length,n=t.timelineMode;n.length=s;let r=t.timelineHoldMix;r.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<s;t++)n[t]=a.addAll(i[t].getPropertyIds())?Tt:Et;else t:for(let o=0;o<s;o++){let s=i[o],l=s.getPropertyIds();if(a.addAll(l))if(!e||s instanceof ht||s instanceof ut||s instanceof dt||!e.animation.hasTimeline(l))n[o]=kt;else{for(let i=e.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(l)){if(t.mixDuration>0){n[o]=It,r[o]=i;continue t}break}n[o]=Tt}else n[o]=Ct}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}}class yt{constructor(){this.mixBlend=A.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}class vt{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(At.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(At.interrupt),this.objects.push(t)}end(t){this.objects.push(At.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(At.dispose),this.objects.push(t)}complete(t){this.objects.push(At.complete),this.objects.push(t)}event(t,e){this.objects.push(At.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let s=t[i],n=t[i+1];switch(s){case At.start:n.listener&&n.listener.start&&n.listener.start(n);for(let t=0;t<e.length;t++)e[t].start&&e[t].start(n);break;case At.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(let t=0;t<e.length;t++)e[t].interrupt&&e[t].interrupt(n);break;case At.end:n.listener&&n.listener.end&&n.listener.end(n);for(let t=0;t<e.length;t++)e[t].end&&e[t].end(n);case At.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(let t=0;t<e.length;t++)e[t].dispose&&e[t].dispose(n);this.animState.trackEntryPool.free(n);break;case At.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(let t=0;t<e.length;t++)e[t].complete&&e[t].complete(n);break;case At.event:let s=t[2+i++];n.listener&&n.listener.event&&n.listener.event(n,s);for(let t=0;t<e.length;t++)e[t].event&&e[t].event(n,s)}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var At;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(At||(At={}));class St{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const Ct=0,kt=1,Et=2,Tt=3,It=4,Mt=1,Ft=2;let Lt=null;class Rt{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);let n=this.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);this.setMixWith(s,n,i)}setMixWith(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let s=t.name+"."+e.name;this.animationToMixTime[s]=i}getMix(t,e){let i=t.name+"."+e.name,s=this.animationToMixTime[i];return void 0===s?this.defaultMix:s}}class Yt extends x{constructor(t){super(t),this.color=new r(1,1,1,1)}copy(){let t=new Yt(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Bt extends x{constructor(t){super(t),this.color=new r(.2275,.2275,.8078,1)}copy(){let t=new Bt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class Xt{constructor(t){this._image=t}getImage(){return this._image}}var Pt,Vt,Dt,Ot,Nt,Ut,qt,zt;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Pt||(Pt={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(Vt||(Vt={}));class Wt{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}}class _t extends Xt{setFilters(t,e){}setWraps(t,e){}dispose(){}}class jt{constructor(t){this.pages=new Array,this.regions=new Array;let e=new Ht(t),i=new Array(4),s=null,n=null,r={size:()=>{s.width=parseInt(i[1]),s.height=parseInt(i[2])},format:()=>{},filter:()=>{s.minFilter=c.enumValue(Pt,i[1]),s.magFilter=c.enumValue(Pt,i[2])},repeat:()=>{-1!=i[1].indexOf("x")&&(s.uWrap=Vt.Repeat),-1!=i[1].indexOf("y")&&(s.vWrap=Vt.Repeat)},pma:()=>{s.pma="true"==i[1]}};var a={xy:()=>{n.x=parseInt(i[1]),n.y=parseInt(i[2])},size:()=>{n.width=parseInt(i[1]),n.height=parseInt(i[2])},bounds:()=>{n.x=parseInt(i[1]),n.y=parseInt(i[2]),n.width=parseInt(i[3]),n.height=parseInt(i[4])},offset:()=>{n.offsetX=parseInt(i[1]),n.offsetY=parseInt(i[2])},orig:()=>{n.originalWidth=parseInt(i[1]),n.originalHeight=parseInt(i[2])},offsets:()=>{n.offsetX=parseInt(i[1]),n.offsetY=parseInt(i[2]),n.originalWidth=parseInt(i[3]),n.originalHeight=parseInt(i[4])},rotate:()=>{let t=i[1];"true"==t?n.degrees=90:"false"!=t&&(n.degrees=parseInt(t))},index:()=>{n.index=parseInt(i[1])}};let o=e.readLine();for(;o&&0==o.trim().length;)o=e.readLine();for(;o&&0!=o.trim().length&&0!=e.readEntry(i,o);)o=e.readLine();let l=null,h=null;for(;null!==o;)if(0==o.trim().length)s=null,o=e.readLine();else if(s){for(n=new Zt,n.page=s,n.name=o;;){let t=e.readEntry(i,o=e.readLine());if(0==t)break;let s=a[i[0]];if(s)s();else{l||(l=[],h=[]),l.push(i[0]);let e=[];for(let s=0;s<t;s++)e.push(parseInt(i[s+1]));h.push(e)}}0==n.originalWidth&&0==n.originalHeight&&(n.originalWidth=n.width,n.originalHeight=n.height),l&&l.length>0&&(n.names=l,n.values=h,l=null,h=null),n.u=n.x/s.width,n.v=n.y/s.height,90==n.degrees?(n.u2=(n.x+n.height)/s.width,n.v2=(n.y+n.width)/s.height):(n.u2=(n.x+n.width)/s.width,n.v2=(n.y+n.height)/s.height),this.regions.push(n)}else{for(s=new Gt,s.name=o.trim();0!=e.readEntry(i,o=e.readLine());){let t=r[i[0]];t&&t()}this.pages.push(s)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let i of this.pages)i.setTexture(t.get(e+i.name))}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()}}class Ht{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(let s=1,n=i+1;;s++){let i=e.indexOf(",",n);if(-1==i)return t[s]=e.substr(n).trim(),s;if(t[s]=e.substr(n,i-n).trim(),n=i+1,4==s)return 4}}}class Gt{constructor(){this.minFilter=Pt.Nearest,this.magFilter=Pt.Nearest,this.uWrap=Vt.ClampToEdge,this.vWrap=Vt.ClampToEdge}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}}class Zt extends Wt{}class Jt extends x{constructor(t){super(t),this.color=new r(1,1,1,1),this.tempColor=new r(0,0,0,0)}updateRegion(){let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=c.newFloatArray(t.length));let e=this.uvs,i=this.uvs.length,s=this.region.u,n=this.region.v,r=0,a=0;if(this.region instanceof Zt){let o=this.region,l=o.page.texture.getImage(),h=l.width,c=l.height;switch(o.degrees){case 90:s-=(o.originalHeight-o.offsetY-o.height)/h,n-=(o.originalWidth-o.offsetX-o.width)/c,r=o.originalHeight/h,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+t[o+1]*r,e[o+1]=n+(1-t[o])*a;return;case 180:s-=(o.originalWidth-o.offsetX-o.width)/h,n-=o.offsetY/c,r=o.originalWidth/h,a=o.originalHeight/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o])*r,e[o+1]=n+(1-t[o+1])*a;return;case 270:s-=o.offsetY/h,n-=o.offsetX/c,r=o.originalHeight/h,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o+1])*r,e[o+1]=n+t[o]*a;return}s-=o.offsetX/h,n-=(o.originalHeight-o.offsetY-o.height)/c,r=o.originalWidth/h,a=o.originalHeight/c}else this.region?(r=this.region.u2-s,a=this.region.v2-n):(s=n=0,r=a=1);for(let o=0;o<i;o+=2)e[o]=s+t[o]*r,e[o+1]=n+t[o+1]*a}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new Jt(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),c.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),c.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),c.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),c.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,i,s,n,r){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,i,s,n,r)}newLinkedMesh(){let t=new Jt(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.timelineAttahment=this.timelineAttahment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}class Kt extends x{constructor(t){super(t),this.closed=!1,this.constantSpeed=!1,this.color=new r(1,1,1,1)}copy(){let t=new Kt(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),c.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Qt extends x{constructor(t){super(t),this.color=new r(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=a.cosDeg(this.rotation),i=a.sinDeg(this.rotation),s=e*t.a+i*t.b,n=e*t.c+i*t.d;return Math.atan2(n,s)*a.radDeg}copy(){let t=new Qt(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class $t extends g{constructor(t){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new r(1,1,1,1),this.offset=c.newFloatArray(8),this.uvs=c.newFloatArray(8),this.tempColor=new r(1,1,1,1)}updateRegion(){let t=this.region,e=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*e,n=-this.height/2*this.scaleY+this.region.offsetY*i,r=s+this.region.width*e,a=n+this.region.height*i,o=this.rotation*Math.PI/180,l=Math.cos(o),h=Math.sin(o),c=this.x,d=this.y,u=s*l+c,m=s*h,p=n*l+d,f=n*h,g=r*l+c,x=r*h,w=a*l+d,b=a*h,y=this.offset;y[0]=u-f,y[1]=p+m,y[2]=u-b,y[3]=w+m,y[4]=g-b,y[5]=w+x,y[6]=g-f,y[7]=p+x;let v=this.uvs;90==t.degrees?(v[2]=t.u,v[3]=t.v2,v[4]=t.u,v[5]=t.v,v[6]=t.u2,v[7]=t.v,v[0]=t.u2,v[1]=t.v2):(v[0]=t.u,v[1]=t.v2,v[2]=t.u,v[3]=t.v,v[4]=t.u2,v[5]=t.v,v[6]=t.u2,v[7]=t.v2)}computeWorldVertices(t,e,i,s){null!=this.sequence&&this.sequence.apply(t,this);let n=t.bone,r=this.offset,a=n.worldX,o=n.worldY,l=n.a,h=n.b,c=n.c,d=n.d,u=0,m=0;u=r[0],m=r[1],e[i]=u*l+m*h+a,e[i+1]=u*c+m*d+o,i+=s,u=r[2],m=r[3],e[i]=u*l+m*h+a,e[i+1]=u*c+m*d+o,i+=s,u=r[4],m=r[5],e[i]=u*l+m*h+a,e[i+1]=u*c+m*d+o,i+=s,u=r[6],m=r[7],e[i]=u*l+m*h+a,e[i+1]=u*c+m*d+o}copy(){let t=new $t(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,c.arrayCopy(this.uvs,0,t.uvs,0,8),c.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}$t.X1=0,$t.Y1=1,$t.C1R=2,$t.C1G=3,$t.C1B=4,$t.C1A=5,$t.U1=6,$t.V1=7,$t.X2=8,$t.Y2=9,$t.C2R=10,$t.C2G=11,$t.C2B=12,$t.C2A=13,$t.U2=14,$t.V2=15,$t.X3=16,$t.Y3=17,$t.C3R=18,$t.C3G=19,$t.C3B=20,$t.C3A=21,$t.U3=22,$t.V3=23,$t.X4=24,$t.Y4=25,$t.C4R=26,$t.C4G=27,$t.C4B=28,$t.C4A=29,$t.U4=30,$t.V4=31;class te{constructor(t){this.atlas=t}loadSequence(t,e,i){let s=i.regions;for(let n=0,r=s.length;n<r;n++){let r=i.getPath(e,n);if(s[n]=this.atlas.findRegion(r),s[n].renderObject=s[n],null==s[n])throw new Error("Region not found in atlas: "+r+" (sequence: "+t+")")}}newRegionAttachment(t,e,i,s){let n=new $t(e);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");t.renderObject=t,n.region=t}return n}newMeshAttachment(t,e,i,s){let n=new Jt(e);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");t.renderObject=t,n.region=t}return n}newBoundingBoxAttachment(t,e){return new Yt(e)}newPathAttachment(t,e){return new Kt(e)}newPointAttachment(t,e){return new Qt(e)}newClippingAttachment(t,e){return new Bt(e)}}class ee{constructor(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Dt.Normal,this.skinRequired=!1,this.color=new r,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(Dt||(Dt={}));class ie{constructor(t,e,i){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,s,n,r,o){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=s,this.ascaleY=n,this.ashearX=r,this.ashearY=o;let l=this.parent;if(!l){let l=this.skeleton,h=i+90+o,c=l.scaleX,d=l.scaleY;return this.a=a.cosDeg(i+r)*s*c,this.b=a.cosDeg(h)*n*c,this.c=a.sinDeg(i+r)*s*d,this.d=a.sinDeg(h)*n*d,this.worldX=t*c+l.x,void(this.worldY=e*d+l.y)}let h=l.a,c=l.b,d=l.c,u=l.d;switch(this.worldX=h*t+c*e+l.worldX,this.worldY=d*t+u*e+l.worldY,this.data.transformMode){case Dt.Normal:{let t=i+90+o,e=a.cosDeg(i+r)*s,l=a.cosDeg(t)*n,m=a.sinDeg(i+r)*s,p=a.sinDeg(t)*n;return this.a=h*e+c*m,this.b=h*l+c*p,this.c=d*e+u*m,void(this.d=d*l+u*p)}case Dt.OnlyTranslation:{let t=i+90+o;this.a=a.cosDeg(i+r)*s,this.b=a.cosDeg(t)*n,this.c=a.sinDeg(i+r)*s,this.d=a.sinDeg(t)*n;break}case Dt.NoRotationOrReflection:{let t=h*h+d*d,e=0;t>1e-4?(t=Math.abs(h*u-c*d)/t,h/=this.skeleton.scaleX,d/=this.skeleton.scaleY,c=d*t,u=h*t,e=Math.atan2(d,h)*a.radDeg):(h=0,d=0,e=90-Math.atan2(u,c)*a.radDeg);let l=i+r-e,m=i+o-e+90,p=a.cosDeg(l)*s,f=a.cosDeg(m)*n,g=a.sinDeg(l)*s,x=a.sinDeg(m)*n;this.a=h*p-c*g,this.b=h*f-c*x,this.c=d*p+u*g,this.d=d*f+u*x;break}case Dt.NoScale:case Dt.NoScaleOrReflection:{let t=a.cosDeg(i),e=a.sinDeg(i),l=(h*t+c*e)/this.skeleton.scaleX,m=(d*t+u*e)/this.skeleton.scaleY,p=Math.sqrt(l*l+m*m);p>1e-5&&(p=1/p),l*=p,m*=p,p=Math.sqrt(l*l+m*m),this.data.transformMode==Dt.NoScale&&h*u-c*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p);let f=Math.PI/2+Math.atan2(m,l),g=Math.cos(f)*p,x=Math.sin(f)*p,w=a.cosDeg(r)*s,b=a.cosDeg(90+o)*n,y=a.sinDeg(r)*s,v=a.sinDeg(90+o)*n;this.a=l*w+g*y,this.b=l*b+g*v,this.c=m*w+x*y,this.d=m*b+x*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*a.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*a.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*a.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*a.radDeg);let e=t.a,i=t.b,s=t.c,n=t.d,r=1/(e*n-i*s),o=this.worldX-t.worldX,l=this.worldY-t.worldY;this.ax=o*n*r-l*i*r,this.ay=l*e*r-o*s*r;let h=r*n,c=r*e,d=r*i,u=r*s,m=h*this.a-d*this.c,p=h*this.b-d*this.d,f=c*this.c-u*this.a,g=c*this.d-u*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(m*m+f*f),this.ascaleX>1e-4){let t=m*g-p*f;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(m*p+f*g,t)*a.radDeg,this.arotation=Math.atan2(f,m)*a.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,p)*a.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,s=t.y-this.worldY;return t.x=i*this.d*e-s*this.b*e,t.y=s*this.a*e-i*this.c*e,t}localToWorld(t){let e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}worldToLocalRotation(t){let e=a.sinDeg(t),i=a.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*a.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=a.sinDeg(t),i=a.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*a.radDeg}rotateWorld(t){let e=this.a,i=this.b,s=this.c,n=this.d,r=a.cosDeg(t),o=a.sinDeg(t);this.a=r*e-o*s,this.b=r*i-o*n,this.c=o*e+r*s,this.d=o*i+r*n}}class se{constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}}class ne{constructor(t,e="",i=null){this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=i||new re}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,i){this.toLoad--,this.loaded++,this.assets[e]=i,t&&t(e,i)}error(t,e,i){this.toLoad--,this.loaded++,this.errors[e]=i,t&&t(e,i)}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=null,i=null){t=this.start(t),this.downloader.downloadBinary(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load binary ${t}: status ${e}, ${s}`)}))}loadText(t,e=null,i=null){t=this.start(t),this.downloader.downloadText(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load text ${t}: status ${e}, ${s}`)}))}loadJson(t,e=null,i=null){t=this.start(t),this.downloader.downloadJson(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load JSON ${t}: status ${e}, ${s}`)}))}loadTexture(t,e=null,i=null){if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(i,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((i=>{i&&this.success(e,t,this.textureLoader(i))}));else{let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{this.success(e,t,this.textureLoader(s))},s.onerror=()=>{this.error(i,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),s.src=t}}loadTextureAtlas(t,e=null,i=null){let s=t.lastIndexOf("/"),n=s>=0?t.substring(0,s+1):"";t=this.start(t),this.downloader.downloadText(t,(s=>{try{let r=new jt(s),a=r.pages.length,o=!1;for(let s of r.pages)this.loadTexture(n+s.name,((i,n)=>{o||(s.setTexture(n),0==--a&&this.success(e,t,r))}),((e,s)=>{o||this.error(i,t,`Couldn't load texture atlas ${t} page image: ${e}`),o=!0}))}catch(e){this.error(i,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,s)=>{this.error(i,t,`Couldn't load texture atlas ${t}: status ${e}, ${s}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let i=this.errors[t];throw Error("Asset not found: "+t+(i?"\n"+i:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}}class re{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+="base64,".length,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),i=e.length,s=new Uint8Array(i),n=0;n<i;n++)s[n]=e.charCodeAt(n);return s}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+="base64,".length,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.overrideMimeType("text/html"),s.open("GET",t,!0);let n=()=>{this.finish(t,s.status,s.responseText)};s.onload=n,s.onerror=n,s.send()}downloadJson(t,e,i){this.downloadText(t,(t=>{e(JSON.parse(t))}),i)}downloadBinary(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer";let n=()=>{this.finish(t,s.status,s.response)};s.onload=()=>{200==s.status||0==s.status?this.finish(t,200,new Uint8Array(s.response)):n()},s.onerror=n,s.send()}start(t,e,i){let s=this.callbacks[t];try{if(s)return!0;this.callbacks[t]=s=[]}finally{s.push(e,i)}}finish(t,e,i){let s=this.callbacks[t];delete this.callbacks[t];let n=200==e||0==e?[i]:[e,i];for(let t=n.length-1,e=s.length;t<e;t+=2)s[t].apply(null,n)}}class ae{constructor(t,e){if(!e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class oe{constructor(t){this.name=t}}class le{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,i,s,n,r,o){let l=t.parent,h=l.a,c=l.b,d=l.c,u=l.d,m=-t.ashearX-t.arotation,p=0,f=0;switch(t.data.transformMode){case Dt.OnlyTranslation:p=e-t.worldX,f=i-t.worldY;break;case Dt.NoRotationOrReflection:let s=Math.abs(h*u-c*d)/(h*h+d*d),n=h/t.skeleton.scaleX,r=d/t.skeleton.scaleY;c=-r*s*t.skeleton.scaleX,u=n*s*t.skeleton.scaleY,m+=Math.atan2(r,n)*a.radDeg;default:let o=e-l.worldX,g=i-l.worldY,x=h*u-c*d;p=(o*u-g*c)/x-t.ax,f=(g*h-o*d)/x-t.ay}m+=Math.atan2(f,p)*a.radDeg,t.ascaleX<0&&(m+=180),m>180?m-=360:m<-180&&(m+=360);let g=t.ascaleX,x=t.ascaleY;if(s||n){switch(t.data.transformMode){case Dt.NoScale:case Dt.NoScaleOrReflection:p=e-t.worldX,f=i-t.worldY}let a=t.data.length*g,l=Math.sqrt(p*p+f*f);if(s&&l<a||n&&l>a&&a>1e-4){let t=(l/a-1)*o+1;g*=t,r&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+m*o,g,x,t.ashearX,t.ashearY)}apply2(t,e,i,s,n,r,o,l,h){let c=t.ax,d=t.ay,u=t.ascaleX,m=t.ascaleY,p=u,f=m,g=e.ascaleX,x=0,w=0,b=0;u<0?(u=-u,x=180,b=-1):(x=0,b=1),m<0&&(m=-m,b=-b),g<0?(g=-g,w=180):w=0;let y=e.ax,v=0,A=0,S=0,C=t.a,k=t.b,E=t.c,T=t.d,I=Math.abs(u-m)<=1e-4;!I||r?(v=0,A=C*y+t.worldX,S=E*y+t.worldY):(v=e.ay,A=C*y+k*v+t.worldX,S=E*y+T*v+t.worldY);let M=t.parent;C=M.a,k=M.b,E=M.c,T=M.d;let F,L,R=1/(C*T-k*E),Y=A-M.worldX,B=S-M.worldY,X=(Y*T-B*k)*R-c,P=(B*C-Y*E)*R-d,V=Math.sqrt(X*X+P*P),D=e.data.length*g;if(V<1e-4)return this.apply1(t,i,s,!1,r,!1,h),void e.updateWorldTransformWith(y,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);Y=i-M.worldX,B=s-M.worldY;let O=(Y*T-B*k)*R-c,N=(B*C-Y*E)*R-d,U=O*O+N*N;if(0!=l){l*=u*(g+1)*.5;let t=Math.sqrt(U),e=t-V-D*u+l;if(e>0){let i=Math.min(1,e/(2*l))-1;i=(e-l*(1-i*i))/t,O-=i*O,N-=i*N,U=O*O+N*N}}t:if(I){D*=u;let t=(U-V*V-D*D)/(2*V*D);t<-1?(t=-1,L=Math.PI*n):t>1?(t=1,L=0,r&&(C=(Math.sqrt(U)/(V+D)-1)*h+1,p*=C,o&&(f*=C))):L=Math.acos(t)*n,C=V+D*t,k=D*Math.sin(L),F=Math.atan2(N*C-O*k,O*C+N*k)}else{C=u*D,k=m*D;let t=C*C,e=k*k,i=Math.atan2(N,O);E=e*V*V+t*U-t*e;let s=-2*e*V,r=e-t;if(T=s*s-4*r*E,T>=0){let t=Math.sqrt(T);s<0&&(t=-t),t=.5*-(s+t);let e=t/r,a=E/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=U){B=Math.sqrt(U-o*o)*n,F=i-Math.atan2(B,o),L=Math.atan2(B/m,(o-V)/u);break t}}let o=a.PI,l=V-C,h=l*l,c=0,d=0,p=V+C,f=p*p,g=0;E=-C*V/(t-e),E>=-1&&E<=1&&(E=Math.acos(E),Y=C*Math.cos(E)+V,B=k*Math.sin(E),T=Y*Y+B*B,T<h&&(o=E,h=T,l=Y,c=B),T>f&&(d=E,f=T,p=Y,g=B)),U<=.5*(h+f)?(F=i-Math.atan2(c*n,l),L=o*n):(F=i-Math.atan2(g*n,p),L=d*n)}let q=Math.atan2(v,y)*b,z=t.arotation;F=(F-q)*a.radDeg+x-z,F>180?F-=360:F<-180&&(F+=360),t.updateWorldTransformWith(c,d,z+F*h,p,f,0,0),z=e.arotation,L=((L+q)*a.radDeg-e.ashearX)*b+w-z,L>180?L-=360:L<-180&&(L+=360),e.updateWorldTransformWith(y,v,z+L*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class he extends se{constructor(t){super(t,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}}class ce extends se{constructor(t){super(t,0,!1),this.bones=new Array,this.mixRotate=0,this.mixX=0,this.mixY=0}}!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(Ot||(Ot={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(Nt||(Nt={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(Ut||(Ut={}));class de{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,s=t.bones.length;i<s;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof Kt))return;let e=this.mixRotate,i=this.mixX,s=this.mixY;if(0==e&&0==i&&0==s)return;let n=this.data,r=n.rotateMode==Ut.Tangent,o=n.rotateMode==Ut.ChainScale,l=this.bones,h=l.length,d=r?h:h+1,u=c.setArraySize(this.spaces,d),m=o?this.lengths=c.setArraySize(this.lengths,h):null,p=this.spacing;switch(n.spacingMode){case Nt.Percent:if(o)for(let t=0,e=d-1;t<e;t++){let e=l[t],i=e.data.length;if(i<de.epsilon)m[t]=0;else{let s=i*e.a,n=i*e.c;m[t]=Math.sqrt(s*s+n*n)}}c.arrayFill(u,1,d,p);break;case Nt.Proportional:let t=0;for(let e=0,i=d-1;e<i;){let i=l[e],s=i.data.length;if(s<de.epsilon)o&&(m[e]=0),u[++e]=p;else{let n=s*i.a,r=s*i.c,a=Math.sqrt(n*n+r*r);o&&(m[e]=a),u[++e]=a,t+=a}}if(t>0){t=d/t*p;for(let e=1;e<d;e++)u[e]*=t}break;default:let e=n.spacingMode==Nt.Length;for(let t=0,i=d-1;t<i;){let i=l[t],s=i.data.length;if(s<de.epsilon)o&&(m[t]=0),u[++t]=p;else{let n=s*i.a,r=s*i.c,a=Math.sqrt(n*n+r*r);o&&(m[t]=a),u[++t]=(e?s+p:p)*a/s}}}let f=this.computeWorldPositions(t,d,r),g=f[0],x=f[1],w=n.offsetRotation,b=!1;if(0==w)b=n.rotateMode==Ut.Chain;else{b=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?a.degRad:-a.degRad}for(let t=0,n=3;t<h;t++,n+=3){let h=l[t];h.worldX+=(g-h.worldX)*i,h.worldY+=(x-h.worldY)*s;let c=f[n],d=f[n+1],p=c-g,y=d-x;if(o){let i=m[t];if(0!=i){let t=(Math.sqrt(p*p+y*y)/i-1)*e+1;h.a*=t,h.c*=t}}if(g=c,x=d,e>0){let i=h.a,s=h.b,o=h.c,l=h.d,c=0,d=0,m=0;if(c=r?f[n-1]:0==u[t+1]?f[n+2]:Math.atan2(y,p),c-=Math.atan2(o,i),b){d=Math.cos(c),m=Math.sin(c);let t=h.data.length;g+=(t*(d*i-m*o)-p)*e,x+=(t*(m*i+d*o)-y)*e}else c+=w;c>a.PI?c-=a.PI2:c<-a.PI&&(c+=a.PI2),c*=e,d=Math.cos(c),m=Math.sin(c),h.a=d*i-m*o,h.b=d*s-m*l,h.c=m*i+d*o,h.d=m*s+d*l}h.updateAppliedTransform()}}computeWorldPositions(t,e,i){let s=this.target,n=this.position,r=this.spaces,a=c.setArraySize(this.positions,3*e+2),o=null,l=t.closed,h=t.worldVerticesLength,d=h/6,u=de.NONE;if(!t.constantSpeed){let m=t.lengths;d-=l?1:2;let p,f=m[d];switch(this.data.positionMode==Ot.Percent&&(n*=f),this.data.spacingMode){case Nt.Percent:p=f;break;case Nt.Proportional:p=f/e;break;default:p=1}o=c.setArraySize(this.world,8);for(let c=0,g=0,x=0;c<e;c++,g+=3){let e=r[c]*p;n+=e;let w=n;if(l)w%=f,w<0&&(w+=f),x=0;else{if(w<0){u!=de.BEFORE&&(u=de.BEFORE,t.computeWorldVertices(s,2,4,o,0,2)),this.addBeforePosition(w,o,0,a,g);continue}if(w>f){u!=de.AFTER&&(u=de.AFTER,t.computeWorldVertices(s,h-6,4,o,0,2)),this.addAfterPosition(w-f,o,0,a,g);continue}}for(;;x++){let t=m[x];if(!(w>t)){if(0==x)w/=t;else{let e=m[x-1];w=(w-e)/(t-e)}break}}x!=u&&(u=x,l&&x==d?(t.computeWorldVertices(s,h-4,4,o,0,2),t.computeWorldVertices(s,0,4,o,4,2)):t.computeWorldVertices(s,6*x+2,8,o,0,2)),this.addCurvePosition(w,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,g,i||c>0&&0==e)}return a}l?(h+=2,o=c.setArraySize(this.world,h),t.computeWorldVertices(s,2,h-4,o,0,2),t.computeWorldVertices(s,0,2,o,h-4,2),o[h-2]=o[0],o[h-1]=o[1]):(d--,h-=4,o=c.setArraySize(this.world,h),t.computeWorldVertices(s,2,h,o,0,2));let m,p=c.setArraySize(this.curves,d),f=0,g=o[0],x=o[1],w=0,b=0,y=0,v=0,A=0,S=0,C=0,k=0,E=0,T=0,I=0,M=0,F=0,L=0;for(let t=0,e=2;t<d;t++,e+=6)w=o[e],b=o[e+1],y=o[e+2],v=o[e+3],A=o[e+4],S=o[e+5],C=.1875*(g-2*w+y),k=.1875*(x-2*b+v),E=.09375*(3*(w-y)-g+A),T=.09375*(3*(b-v)-x+S),I=2*C+E,M=2*k+T,F=.75*(w-g)+C+.16666667*E,L=.75*(b-x)+k+.16666667*T,f+=Math.sqrt(F*F+L*L),F+=I,L+=M,I+=E,M+=T,f+=Math.sqrt(F*F+L*L),F+=I,L+=M,f+=Math.sqrt(F*F+L*L),F+=I+E,L+=M+T,f+=Math.sqrt(F*F+L*L),p[t]=f,g=A,x=S;switch(this.data.positionMode==Ot.Percent&&(n*=f),this.data.spacingMode){case Nt.Percent:m=f;break;case Nt.Proportional:m=f/e;break;default:m=1}let R=this.segments,Y=0;for(let t=0,s=0,c=0,d=0;t<e;t++,s+=3){let e=r[t]*m;n+=e;let B=n;if(l)B%=f,B<0&&(B+=f),c=0;else{if(B<0){this.addBeforePosition(B,o,0,a,s);continue}if(B>f){this.addAfterPosition(B-f,o,h-4,a,s);continue}}for(;;c++){let t=p[c];if(!(B>t)){if(0==c)B/=t;else{let e=p[c-1];B=(B-e)/(t-e)}break}}if(c!=u){u=c;let t=6*c;for(g=o[t],x=o[t+1],w=o[t+2],b=o[t+3],y=o[t+4],v=o[t+5],A=o[t+6],S=o[t+7],C=.03*(g-2*w+y),k=.03*(x-2*b+v),E=.006*(3*(w-y)-g+A),T=.006*(3*(b-v)-x+S),I=2*C+E,M=2*k+T,F=.3*(w-g)+C+.16666667*E,L=.3*(b-x)+k+.16666667*T,Y=Math.sqrt(F*F+L*L),R[0]=Y,t=1;t<8;t++)F+=I,L+=M,I+=E,M+=T,Y+=Math.sqrt(F*F+L*L),R[t]=Y;F+=I,L+=M,Y+=Math.sqrt(F*F+L*L),R[8]=Y,F+=I+E,L+=M+T,Y+=Math.sqrt(F*F+L*L),R[9]=Y,d=0}for(B*=Y;;d++){let t=R[d];if(!(B>t)){if(0==d)B/=t;else{let e=R[d-1];B=d+(B-e)/(t-e)}break}}this.addCurvePosition(.1*B,g,x,w,b,y,v,A,S,a,s,i||t>0&&0==e)}return a}addBeforePosition(t,e,i,s,n){let r=e[i],a=e[i+1],o=e[i+2]-r,l=e[i+3]-a,h=Math.atan2(l,o);s[n]=r+t*Math.cos(h),s[n+1]=a+t*Math.sin(h),s[n+2]=h}addAfterPosition(t,e,i,s,n){let r=e[i+2],a=e[i+3],o=r-e[i],l=a-e[i+1],h=Math.atan2(l,o);s[n]=r+t*Math.cos(h),s[n+1]=a+t*Math.sin(h),s[n+2]=h}addCurvePosition(t,e,i,s,n,r,a,o,l,h,c,d){if(0==t||isNaN(t))return h[c]=e,h[c+1]=i,void(h[c+2]=Math.atan2(n-i,s-e));let u=t*t,m=u*t,p=1-t,f=p*p,g=f*p,x=p*t,w=3*x,b=p*w,y=w*t,v=e*g+s*b+r*y+o*m,A=i*g+n*b+a*y+l*m;h[c]=v,h[c+1]=A,d&&(h[c+2]=t<.001?Math.atan2(n-i,s-e):Math.atan2(A-(i*f+n*x*2+a*u),v-(e*f+s*x*2+r*u)))}}de.NONE=-1,de.BEFORE=-2,de.AFTER=-3,de.epsilon=1e-5;class ue{constructor(t,e){if(this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new r,this.darkColor=t.darkColor?new r:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof x&&this.attachment instanceof x&&t.timelineAttahment==this.attachment.timelineAttahment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class me{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new m,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=0!=e||0!=i,l=this.target,h=l.a,c=l.b,d=l.c,u=l.d,m=h*u-c*d>0?a.degRad:-a.degRad,p=this.data.offsetRotation*m,f=this.data.offsetShearY*m,g=this.bones;for(let m=0,x=g.length;m<x;m++){let x=g[m];if(0!=t){let e=x.a,i=x.b,s=x.c,n=x.d,r=Math.atan2(d,h)-Math.atan2(s,e)+p;r>a.PI?r-=a.PI2:r<-a.PI&&(r+=a.PI2),r*=t;let o=Math.cos(r),l=Math.sin(r);x.a=o*e-l*s,x.b=o*i-l*n,x.c=l*e+o*s,x.d=l*i+o*n}if(o){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*i}if(0!=s){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+d*d)-t+this.data.offsetScaleX)*s)/t),x.a*=t,x.c*=t}if(0!=n){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(c*c+u*u)-t+this.data.offsetScaleY)*n)/t),x.b*=t,x.d*=t}if(r>0){let t=x.b,e=x.d,i=Math.atan2(e,t),s=Math.atan2(u,c)-Math.atan2(d,h)-(i-Math.atan2(x.c,x.a));s>a.PI?s-=a.PI2:s<-a.PI&&(s+=a.PI2),s=i+(s+f)*r;let n=Math.sqrt(t*t+e*e);x.b=Math.cos(s)*n,x.d=Math.sin(s)*n}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,o=0!=e||0!=i,l=this.target,h=l.a,c=l.b,d=l.c,u=l.d,m=h*u-c*d>0?a.degRad:-a.degRad,p=this.data.offsetRotation*m,f=this.data.offsetShearY*m,g=this.bones;for(let m=0,x=g.length;m<x;m++){let x=g[m];if(0!=t){let e=x.a,i=x.b,s=x.c,n=x.d,r=Math.atan2(d,h)+p;r>a.PI?r-=a.PI2:r<-a.PI&&(r+=a.PI2),r*=t;let o=Math.cos(r),l=Math.sin(r);x.a=o*e-l*s,x.b=o*i-l*n,x.c=l*e+o*s,x.d=l*i+o*n}if(o){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*i}if(0!=s){let t=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleX)*s+1;x.a*=t,x.c*=t}if(0!=n){let t=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1;x.b*=t,x.d*=t}if(r>0){let t=Math.atan2(u,c)-Math.atan2(d,h);t>a.PI?t-=a.PI2:t<-a.PI&&(t+=a.PI2);let e=x.b,i=x.d;t=Math.atan2(i,e)+(t-a.PI/2+f)*r;let s=Math.sqrt(e*e+i*i);x.b=Math.cos(t)*s,x.d=Math.sin(t)*s}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,a=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let d=h.ax,u=h.ay;d+=(a.ax-d+this.data.offsetX)*e,u+=(a.ay-u+this.data.offsetY)*i;let m=h.ascaleX,p=h.ascaleY;0!=s&&0!=m&&(m=(m+(a.ascaleX-m+this.data.offsetScaleX)*s)/m),0!=n&&0!=p&&(p=(p+(a.ascaleY-p+this.data.offsetScaleY)*n)/p);let f=h.ashearY;if(0!=r){let t=a.ashearY-f+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),f+=t*r}h.updateWorldTransformWith(d,u,c,m,p,h.ashearX,f)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,n=this.mixScaleY,r=this.mixShearY,a=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation+(a.arotation+this.data.offsetRotation)*t,d=h.ax+(a.ax+this.data.offsetX)*e,u=h.ay+(a.ay+this.data.offsetY)*i,m=h.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*s+1),p=h.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*n+1),f=h.ashearY+(a.ashearY+this.data.offsetShearY)*r;h.updateWorldTransformWith(d,u,c,m,p,h.ashearX,f)}}}class pe{constructor(t){if(this._updateCache=new Array,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,s=t.bones[e];if(s.parent){let t=this.bones[s.parent.index];i=new ie(s,this,t),t.children.push(i)}else i=new ie(s,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],s=this.bones[i.boneData.index],n=new ue(i,s);this.slots.push(n),this.drawOrder.push(n)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new le(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new me(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new de(i,this))}this.color=new r(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let e=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,n=e.length,r=i.length,a=s.length,o=n+r+a;t:for(let t=0;t<o;t++){for(let i=0;i<n;i++){let s=e[i];if(s.data.order==t){this.sortIkConstraint(s);continue t}}for(let e=0;e<r;e++){let s=i[e];if(s.data.order==t){this.sortTransformConstraint(s);continue t}}for(let e=0;e<a;e++){let i=s[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&c.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,s=i[0];if(this.sortBone(s),1==i.length)this._updateCache.push(t),this.sortReset(s.children);else{let e=i[i.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(s.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&c.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,s=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,s);let n=e.getAttachment();n instanceof Kt&&this.sortPathConstraintAttachmentWith(n,s);let r=t.bones,a=r.length;for(let t=0;t<a;t++)this.sortBone(r[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(r[t].children);for(let t=0;t<a;t++)r[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&c.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this.sortBone(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let s=t.attachments[e];if(s)for(let t in s)this.sortPathConstraintAttachmentWith(s[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Kt))return;let i=t.bones;if(i){let t=this.bones;for(let e=0,s=i.length;e<s;){let s=i[e++];for(s+=e;e<s;)this.sortBone(t[i[e++]])}}else this.sortBone(e)}sortBone(t){if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone(),i=t.a,s=t.b,n=t.c,r=t.d;e.worldX=i*this.x+s*this.y+t.worldX,e.worldY=n*this.x+r*this.y+t.worldY;let o=e.rotation+90+e.shearY,l=a.cosDeg(e.rotation+e.shearX)*e.scaleX,h=a.cosDeg(o)*e.scaleY,c=a.sinDeg(e.rotation+e.shearX)*e.scaleX,d=a.sinDeg(o)*e.scaleY;e.a=(i*l+s*c)*this.scaleX,e.b=(i*h+s*d)*this.scaleX,e.c=(n*l+r*c)*this.scaleY,e.d=(n*h+r*d)*this.scaleY;let u=this._updateCache;for(let t=0,i=u.length;t<i;t++){let i=u[t];i!=e&&i.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY,e.mixScaleX=s.mixScaleX,e.mixScaleY=s.mixScaleY,e.mixShearY=s.mixShearY}let s=this.pathConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY}}setSlotsToSetupPose(){let t=this.slots;c.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i],n=s.data.attachmentName;if(n){let e=t.getAttachment(i,n);e&&s.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlot(t).index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,n=i.length;s<n;s++){let n=i[s];if(n.data.name==t){let i=null;if(e&&(i=this.getAttachment(s,e),!i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void n.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}getBounds(t,e,i=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let s=this.drawOrder,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){let e=s[t];if(!e.bone.active)continue;let l=0,h=null,d=e.getAttachment();if(d instanceof $t)l=8,h=c.setArraySize(i,l,0),d.computeWorldVertices(e,h,0,2);else if(d instanceof Jt){let t=d;l=t.worldVerticesLength,h=c.setArraySize(i,l,0),t.computeWorldVertices(e,0,l,h,0,2)}if(h)for(let t=0,e=h.length;t<e;t+=2){let e=h[t],i=h[t+1];n=Math.min(n,e),r=Math.min(r,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(n,r),e.set(a-n,o-r)}}class fe{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}}class ge{constructor(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i}}class xe{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;t>=s.length&&(s.length=t+1),s[t]||(s[t]={}),s[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof Jt?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&(i[e]=null)}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let s in i){let n=i[s];n&&t.push(new ge(e,s,n))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let s in i){let n=i[s];n&&e.push(new ge(t,s,n))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let s=0;s<t.slots.length;s++){let n=t.slots[s],r=n.getAttachment();if(r&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(r==t[e]){let t=this.getAttachment(i,e);t&&n.setAttachment(t);break}}}i++}}}class we{constructor(t,e,i){if(this.color=new r(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(qt||(qt={}));class be extends se{constructor(t){super(t,0,!1),this.bones=new Array,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}}class ye{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new fe;i.name="";let s=new ve(t),n=s.readInt32(),a=s.readInt32();i.hash=0==a&&0==n?null:a.toString(16)+n.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat();let o=s.readBoolean();o&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let l=0;l=s.readInt(!0);for(let t=0;t<l;t++)s.strings.push(s.readString());l=s.readInt(!0);for(let t=0;t<l;t++){let n=s.readString(),a=0==t?null:i.bones[s.readInt(!0)],l=new ee(t,n,a);l.rotation=s.readFloat(),l.x=s.readFloat()*e,l.y=s.readFloat()*e,l.scaleX=s.readFloat(),l.scaleY=s.readFloat(),l.shearX=s.readFloat(),l.shearY=s.readFloat(),l.length=s.readFloat()*e,l.transformMode=s.readInt(!0),l.skinRequired=s.readBoolean(),o&&r.rgba8888ToColor(l.color,s.readInt32()),i.bones.push(l)}l=s.readInt(!0);for(let t=0;t<l;t++){let e=s.readString(),n=i.bones[s.readInt(!0)],a=new we(t,e,n);r.rgba8888ToColor(a.color,s.readInt32());let o=s.readInt32();-1!=o&&r.rgb888ToColor(a.darkColor=new r,o),a.attachmentName=s.readStringRef(),a.blendMode=s.readInt(!0),i.slots.push(a)}l=s.readInt(!0);for(let t,n=0;n<l;n++){let n=new he(s.readString());n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.mix=s.readFloat(),n.softness=s.readFloat()*e,n.bendDirection=s.readByte(),n.compress=s.readBoolean(),n.stretch=s.readBoolean(),n.uniform=s.readBoolean(),i.ikConstraints.push(n)}l=s.readInt(!0);for(let t,n=0;n<l;n++){let n=new be(s.readString());n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.local=s.readBoolean(),n.relative=s.readBoolean(),n.offsetRotation=s.readFloat(),n.offsetX=s.readFloat()*e,n.offsetY=s.readFloat()*e,n.offsetScaleX=s.readFloat(),n.offsetScaleY=s.readFloat(),n.offsetShearY=s.readFloat(),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),n.mixScaleX=s.readFloat(),n.mixScaleY=s.readFloat(),n.mixShearY=s.readFloat(),i.transformConstraints.push(n)}l=s.readInt(!0);for(let t,n=0;n<l;n++){let n=new ce(s.readString());n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.slots[s.readInt(!0)],n.positionMode=s.readInt(!0),n.spacingMode=s.readInt(!0),n.rotateMode=s.readInt(!0),n.offsetRotation=s.readFloat(),n.position=s.readFloat(),n.positionMode==Ot.Fixed&&(n.position*=e),n.spacing=s.readFloat(),n.spacingMode!=Nt.Length&&n.spacingMode!=Nt.Fixed||(n.spacing*=e),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),i.pathConstraints.push(n)}let h=this.readSkin(s,i,!0,o);h&&(i.defaultSkin=h,i.skins.push(h));{let t=i.skins.length;for(c.setArraySize(i.skins,l=t+s.readInt(!0));t<l;t++)i.skins[t]=this.readSkin(s,i,!1,o)}l=this.linkedMeshes.length;for(let t=0;t<l;t++){let e=this.linkedMeshes[t],s=(e.skin?i.findSkin(e.skin):i.defaultSkin).getAttachment(e.slotIndex,e.parent);e.mesh.timelineAttahment=e.inheritTimeline?s:e.mesh,e.mesh.setParentMesh(s),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,l=s.readInt(!0);for(let t=0;t<l;t++){let t=new oe(s.readStringRef());t.intValue=s.readInt(!1),t.floatValue=s.readFloat(),t.stringValue=s.readString(),t.audioPath=s.readString(),t.audioPath&&(t.volume=s.readFloat(),t.balance=s.readFloat()),i.events.push(t)}l=s.readInt(!0);for(let t=0;t<l;t++)i.animations.push(this.readAnimation(s,s.readString(),i));return i}readSkin(t,e,i,s){let n=null,r=0;if(i){if(r=t.readInt(!0),0==r)return null;n=new xe("default")}else{n=new xe(t.readStringRef()),n.bones.length=t.readInt(!0);for(let i=0,s=n.bones.length;i<s;i++)n.bones[i]=e.bones[t.readInt(!0)];for(let i=0,s=t.readInt(!0);i<s;i++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);r=t.readInt(!0)}for(let i=0;i<r;i++){let i=t.readInt(!0);for(let r=0,a=t.readInt(!0);r<a;r++){let r=t.readStringRef(),a=this.readAttachment(t,e,n,i,r,s);a&&n.setAttachment(i,r,a)}}return n}readAttachment(t,e,i,s,n,a){let o=this.scale,l=t.readStringRef();switch(l||(l=n),t.readByte()){case zt.Region:{let e=t.readStringRef(),s=t.readFloat(),n=t.readFloat(),a=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat(),m=t.readInt32(),p=this.readSequence(t);e||(e=l);let f=this.attachmentLoader.newRegionAttachment(i,l,e,p);return f?(f.path=e,f.x=n*o,f.y=a*o,f.scaleX=h,f.scaleY=c,f.rotation=s,f.width=d*o,f.height=u*o,r.rgba8888ToColor(f.color,m),f.sequence=p,null==p&&f.updateRegion(),f):null}case zt.BoundingBox:{let e=t.readInt(!0),s=this.readVertices(t,e),n=a?t.readInt32():0,o=this.attachmentLoader.newBoundingBoxAttachment(i,l);return o?(o.worldVerticesLength=e<<1,o.vertices=s.vertices,o.bones=s.bones,a&&r.rgba8888ToColor(o.color,n),o):null}case zt.Mesh:{let e=t.readStringRef(),s=t.readInt32(),n=t.readInt(!0),h=this.readFloatArray(t,n<<1,1),c=this.readShortArray(t),d=this.readVertices(t,n),u=t.readInt(!0),m=this.readSequence(t),p=null,f=0,g=0;a&&(p=this.readShortArray(t),f=t.readFloat(),g=t.readFloat()),e||(e=l);let x=this.attachmentLoader.newMeshAttachment(i,l,e,m);return x?(x.path=e,r.rgba8888ToColor(x.color,s),x.bones=d.bones,x.vertices=d.vertices,x.worldVerticesLength=n<<1,x.triangles=c,x.regionUVs=h,null==m&&x.updateRegion(),x.hullLength=u<<1,x.sequence=m,a&&(x.edges=p,x.width=f*o,x.height=g*o),x):null}case zt.LinkedMesh:{let e=t.readStringRef(),n=t.readInt32(),h=t.readStringRef(),c=t.readStringRef(),d=t.readBoolean(),u=this.readSequence(t),m=0,p=0;a&&(m=t.readFloat(),p=t.readFloat()),e||(e=l);let f=this.attachmentLoader.newMeshAttachment(i,l,e,u);return f?(f.path=e,r.rgba8888ToColor(f.color,n),f.sequence=u,a&&(f.width=m*o,f.height=p*o),this.linkedMeshes.push(new Ae(f,h,s,c,d)),f):null}case zt.Path:{let e=t.readBoolean(),s=t.readBoolean(),n=t.readInt(!0),h=this.readVertices(t,n),d=c.newArray(n/3,0);for(let e=0,i=d.length;e<i;e++)d[e]=t.readFloat()*o;let u=a?t.readInt32():0,m=this.attachmentLoader.newPathAttachment(i,l);return m?(m.closed=e,m.constantSpeed=s,m.worldVerticesLength=n<<1,m.vertices=h.vertices,m.bones=h.bones,m.lengths=d,a&&r.rgba8888ToColor(m.color,u),m):null}case zt.Point:{let e=t.readFloat(),s=t.readFloat(),n=t.readFloat(),h=a?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(i,l);return c?(c.x=s*o,c.y=n*o,c.rotation=e,a&&r.rgba8888ToColor(c.color,h),c):null}case zt.Clipping:{let s=t.readInt(!0),n=t.readInt(!0),o=this.readVertices(t,n),h=a?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(i,l);return c?(c.endSlot=e.slots[s],c.worldVerticesLength=n<<1,c.vertices=o.vertices,c.bones=o.bones,a&&r.rgba8888ToColor(c.color,h),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new w(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let i=this.scale,s=e<<1,n=new Se;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,s,i),n;let r=new Array,a=new Array;for(let s=0;s<e;s++){let e=t.readInt(!0);a.push(e);for(let s=0;s<e;s++)a.push(t.readInt(!0)),r.push(t.readFloat()*i),r.push(t.readFloat()*i),r.push(t.readFloat())}return n.vertices=c.toFloatArray(r),n.bones=a,n}readFloatArray(t,e,i){let s=new Array(e);if(1==i)for(let i=0;i<e;i++)s[i]=t.readFloat();else for(let n=0;n<e;n++)s[n]=t.readFloat()*i;return s}readShortArray(t){let e=t.readInt(!0),i=new Array(e);for(let s=0;s<e;s++)i[s]=t.readShort();return i}readAnimation(t,e,i){t.readInt(!0);let s=new Array,n=this.scale;new r,new r;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readByte(),n=t.readInt(!0),r=n-1;switch(i){case Ve:{let i=new ht(n,e);for(let e=0;e<n;e++)i.setFrame(e,t.readFloat(),t.readStringRef());s.push(i);break}case De:{let i=t.readInt(!0),a=new nt(n,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,d),e!=r;e++){let s=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case Ze:Ee(t,a,i++,e,0,o,s,l,n,1),Ee(t,a,i++,e,1,o,s,h,r,1),Ee(t,a,i++,e,2,o,s,c,u,1),Ee(t,a,i++,e,3,o,s,d,m,1)}o=s,l=n,h=r,c=u,d=m}s.push(a);break}case Oe:{let i=t.readInt(!0),a=new rt(n,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c),e!=r;e++){let s=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case Ze:Ee(t,a,i++,e,0,o,s,l,n,1),Ee(t,a,i++,e,1,o,s,h,r,1),Ee(t,a,i++,e,2,o,s,c,d,1)}o=s,l=n,h=r,c=d}s.push(a);break}case Ne:{let i=t.readInt(!0),a=new ot(n,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,d,u,m,p),e!=r;e++){let s=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case Ze:Ee(t,a,i++,e,0,o,s,l,n,1),Ee(t,a,i++,e,1,o,s,h,r,1),Ee(t,a,i++,e,2,o,s,c,f,1),Ee(t,a,i++,e,3,o,s,d,g,1),Ee(t,a,i++,e,4,o,s,u,x,1),Ee(t,a,i++,e,5,o,s,m,w,1),Ee(t,a,i++,e,6,o,s,p,b,1)}o=s,l=n,h=r,c=f,d=g,u=x,m=w,p=b}s.push(a);break}case Ue:{let i=t.readInt(!0),a=new lt(n,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,d,u,m),e!=r;e++){let s=t.readFloat(),n=t.readUnsignedByte()/255,r=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case Ze:Ee(t,a,i++,e,0,o,s,l,n,1),Ee(t,a,i++,e,1,o,s,h,r,1),Ee(t,a,i++,e,2,o,s,c,p,1),Ee(t,a,i++,e,3,o,s,d,f,1),Ee(t,a,i++,e,4,o,s,u,g,1),Ee(t,a,i++,e,5,o,s,m,x,1)}o=s,l=n,h=r,c=p,d=f,u=g,m=x}s.push(a);break}case qe:{let i=new at(n,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,s=0;i.setFrame(e,a,o),e!=r;e++){let n=t.readFloat(),r=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:i.setStepped(e);break;case Ze:Ee(t,i,s++,e,0,a,n,o,r,1)}a=n,o=r}s.push(i)}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readByte(),r=t.readInt(!0),a=t.readInt(!0);switch(i){case Te:s.push(Ce(t,new G(r,a,e),1));break;case Ie:s.push(ke(t,new Z(r,a,e),n));break;case Me:s.push(Ce(t,new J(r,a,e),n));break;case Fe:s.push(Ce(t,new K(r,a,e),n));break;case Le:s.push(ke(t,new Q(r,a,e),1));break;case Re:s.push(Ce(t,new $(r,a,e),1));break;case Ye:s.push(Ce(t,new tt(r,a,e),1));break;case Be:s.push(ke(t,new et(r,a,e),1));break;case Xe:s.push(Ce(t,new it(r,a,e),1));break;case Pe:s.push(Ce(t,new st(r,a,e),1))}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),r=i-1,a=new mt(i,t.readInt(!0),e),o=t.readFloat(),l=t.readFloat(),h=t.readFloat()*n;for(let e=0,i=0;a.setFrame(e,o,l,h,t.readByte(),t.readBoolean(),t.readBoolean()),e!=r;e++){let s=t.readFloat(),r=t.readFloat(),c=t.readFloat()*n;switch(t.readByte()){case Ge:a.setStepped(e);break;case Ze:Ee(t,a,i++,e,0,o,s,l,r,1),Ee(t,a,i++,e,1,o,s,h,c,n)}o=s,l=r,h=c}s.push(a)}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),n=i-1,r=new pt(i,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat();for(let e=0,i=0;r.setFrame(e,a,o,l,h,c,d,u),e!=n;e++){let s=t.readFloat(),n=t.readFloat(),m=t.readFloat(),p=t.readFloat(),f=t.readFloat(),g=t.readFloat(),x=t.readFloat();switch(t.readByte()){case Ge:r.setStepped(e);break;case Ze:Ee(t,r,i++,e,0,a,s,o,n,1),Ee(t,r,i++,e,1,a,s,l,m,1),Ee(t,r,i++,e,2,a,s,h,p,1),Ee(t,r,i++,e,3,a,s,c,f,1),Ee(t,r,i++,e,4,a,s,d,g,1),Ee(t,r,i++,e,5,a,s,u,x,1)}a=s,o=n,l=m,h=p,c=f,d=g,u=x}s.push(r)}for(let e=0,r=t.readInt(!0);e<r;e++){let e=t.readInt(!0),r=i.pathConstraints[e];for(let i=0,a=t.readInt(!0);i<a;i++)switch(t.readByte()){case _e:s.push(Ce(t,new ft(t.readInt(!0),t.readInt(!0),e),r.positionMode==Ot.Fixed?n:1));break;case je:s.push(Ce(t,new gt(t.readInt(!0),t.readInt(!0),e),r.spacingMode==Nt.Length||r.spacingMode==Nt.Fixed?n:1));break;case He:let i=new xt(t.readInt(!0),t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat();for(let e=0,s=0,n=i.getFrameCount()-1;i.setFrame(e,a,o,l,h),e!=n;e++){let n=t.readFloat(),r=t.readFloat(),c=t.readFloat(),d=t.readFloat();switch(t.readByte()){case Ge:i.setStepped(e);break;case Ze:Ee(t,i,s++,e,0,a,n,o,r,1),Ee(t,i,s++,e,1,a,n,l,c,1),Ee(t,i,s++,e,2,a,n,h,d,1)}a=n,o=r,l=c,h=d}s.push(i)}}for(let e=0,r=t.readInt(!0);e<r;e++){let e=i.skins[t.readInt(!0)];for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readInt(!0);for(let r=0,a=t.readInt(!0);r<a;r++){let r=t.readStringRef(),a=e.getAttachment(i,r),o=t.readByte(),l=t.readInt(!0),h=l-1;switch(o){case ze:{let e=a,r=e.bones,o=e.vertices,d=r?o.length/3*2:o.length,u=t.readInt(!0),m=new ct(l,u,i,e),p=t.readFloat();for(let e=0,i=0;;e++){let s,a=t.readInt(!0);if(0==a)s=r?c.newFloatArray(d):o;else{s=c.newFloatArray(d);let e=t.readInt(!0);if(a+=e,1==n)for(let i=e;i<a;i++)s[i]=t.readFloat();else for(let i=e;i<a;i++)s[i]=t.readFloat()*n;if(!r)for(let t=0,e=s.length;t<e;t++)s[t]+=o[t]}if(m.setFrame(e,p,s),e==h)break;let l=t.readFloat();switch(t.readByte()){case Ge:m.setStepped(e);break;case Ze:Ee(t,m,i++,e,0,p,l,0,1,1)}p=l}s.push(m);break}case We:{let e=new wt(l,i,a);for(let i=0;i<l;i++){let s=t.readFloat(),n=t.readInt32();e.setFrame(i,s,y[15&n],n>>4,t.readFloat())}s.push(e);break}}}}}let a=t.readInt(!0);if(a>0){let e=new ut(a),n=i.slots.length;for(let i=0;i<a;i++){let s=t.readFloat(),r=t.readInt(!0),a=c.newArray(n,0);for(let t=n-1;t>=0;t--)a[t]=-1;let o=c.newArray(n-r,0),l=0,h=0;for(let e=0;e<r;e++){let e=t.readInt(!0);for(;l!=e;)o[h++]=l++;a[l+t.readInt(!0)]=l++}for(;l<n;)o[h++]=l++;for(let t=n-1;t>=0;t--)-1==a[t]&&(a[t]=o[--h]);e.setFrame(i,s,a)}s.push(e)}let o=t.readInt(!0);if(o>0){let e=new dt(o);for(let s=0;s<o;s++){let n=t.readFloat(),r=i.events[t.readInt(!0)],a=new ae(n,r);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():r.stringValue,a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(s,a)}s.push(e)}let l=0;for(let t=0,e=s.length;t<e;t++)l=Math.max(l,s[t].getDuration());return new v(e,s,l)}}class ve{constructor(t,e=new Array,i=0,s=new DataView(t.buffer)){this.strings=e,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=127&e;return 0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let t=this.readByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(t),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}}class Ae{constructor(t,e,i,s,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=n}}class Se{constructor(t=null,e=null){this.bones=t,this.vertices=e}}function Ce(t,e,i){let s=t.readFloat(),n=t.readFloat()*i;for(let r=0,a=0,o=e.getFrameCount()-1;e.setFrame(r,s,n),r!=o;r++){let o=t.readFloat(),l=t.readFloat()*i;switch(t.readByte()){case Ge:e.setStepped(r);break;case Ze:Ee(t,e,a++,r,0,s,o,n,l,i)}s=o,n=l}return e}function ke(t,e,i){let s=t.readFloat(),n=t.readFloat()*i,r=t.readFloat()*i;for(let a=0,o=0,l=e.getFrameCount()-1;e.setFrame(a,s,n,r),a!=l;a++){let l=t.readFloat(),h=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case Ge:e.setStepped(a);break;case Ze:Ee(t,e,o++,a,0,s,l,n,h,i),Ee(t,e,o++,a,1,s,l,r,c,i)}s=l,n=h,r=c}return e}function Ee(t,e,i,s,n,r,a,o,l,h){e.setBezier(i,s,n,r,o,t.readFloat(),t.readFloat()*h,t.readFloat(),t.readFloat()*h,a,l)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(zt||(zt={}));const Te=0,Ie=1,Me=2,Fe=3,Le=4,Re=5,Ye=6,Be=7,Xe=8,Pe=9,Ve=0,De=1,Oe=2,Ne=3,Ue=4,qe=5,ze=0,We=1,_e=0,je=1,He=2,Ge=1,Ze=2;class Je{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new u((()=>c.newFloatArray(16)))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,n=this.polygonPool,r=t.slots,a=r.length;i.length=0,n.freeAll(s),s.length=0;for(let t=0;t<a;t++){let e=r[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof Yt){let t=a;i.push(t);let r=n.obtain();r.length!=t.worldVerticesLength&&(r=c.newFloatArray(t.worldVerticesLength)),s.push(r),t.computeWorldVertices(e,0,t.worldVerticesLength,r,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=this.polygons;for(let r=0,a=n.length;r<a;r++){let a=n[r],o=a;for(let n=0,r=a.length;n<r;n+=2){let r=o[n],a=o[n+1];t=Math.min(t,r),e=Math.min(e,a),i=Math.max(i,r),s=Math.max(s,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,s){let n=this.minX,r=this.minY,a=this.maxX,o=this.maxY;if(t<=n&&i<=n||e<=r&&s<=r||t>=a&&i>=a||e>=o&&s>=o)return!1;let l=(s-e)/(i-t),h=l*(n-t)+e;if(h>r&&h<o)return!0;if(h=l*(a-t)+e,h>r&&h<o)return!0;let c=(r-e)/l+t;return c>n&&c<a||(c=(o-e)/l+t,c>n&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let s=0,n=i.length;s<n;s++)if(this.containsPointPolygon(i[s],t,e))return this.boundingBoxes[s];return null}containsPointPolygon(t,e,i){let s=t,n=t.length,r=n-2,a=!1;for(let t=0;t<n;t+=2){let n=s[t+1],o=s[r+1];if(n<i&&o>=i||o<i&&n>=i){let l=s[t];l+(i-n)/(o-n)*(s[r]-l)<e&&(a=!a)}r=t}return a}intersectsSegment(t,e,i,s){let n=this.polygons;for(let r=0,a=n.length;r<a;r++)if(this.intersectsSegmentPolygon(n[r],t,e,i,s))return this.boundingBoxes[r];return null}intersectsSegmentPolygon(t,e,i,s,n){let r=t,a=t.length,o=e-s,l=i-n,h=e*n-i*s,c=r[a-2],d=r[a-1];for(let t=0;t<a;t+=2){let a=r[t],u=r[t+1],m=c*u-d*a,p=c-a,f=d-u,g=o*f-l*p,x=(h*p-o*m)/g;if((x>=c&&x<=a||x>=a&&x<=c)&&(x>=e&&x<=s||x>=s&&x<=e)){let t=(h*f-l*m)/g;if((t>=d&&t<=u||t>=u&&t<=d)&&(t>=i&&t<=n||t>=n&&t<=i))return!0}c=a,d=u}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class Ke{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new u((()=>new Array)),this.polygonIndicesPool=new u((()=>new Array))}triangulate(t){let e=t,i=t.length>>1,s=this.indicesArray;s.length=0;for(let t=0;t<i;t++)s[t]=t;let n=this.isConcaveArray;n.length=0;for(let t=0,r=i;t<r;++t)n[t]=Ke.isConcave(t,i,e,s);let r=this.triangles;for(r.length=0;i>3;){let t=i-1,a=0,o=1;for(;;){t:if(!n[a]){let r=s[t]<<1,l=s[a]<<1,h=s[o]<<1,c=e[r],d=e[r+1],u=e[l],m=e[l+1],p=e[h],f=e[h+1];for(let r=(o+1)%i;r!=t;r=(r+1)%i){if(!n[r])continue;let t=s[r]<<1,i=e[t],a=e[t+1];if(Ke.positiveArea(p,f,c,d,i,a)&&Ke.positiveArea(c,d,u,m,i,a)&&Ke.positiveArea(u,m,p,f,i,a))break t}break}if(0==o){do{if(!n[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%i}r.push(s[(i+a-1)%i]),r.push(s[a]),r.push(s[(a+1)%i]),s.splice(a,1),n.splice(a,1),i--;let l=(i+a-1)%i,h=a==i?0:a;n[l]=Ke.isConcave(l,i,e,s),n[h]=Ke.isConcave(h,i,e,s)}return 3==i&&(r.push(s[2]),r.push(s[0]),r.push(s[1])),r}decompose(t,e){let i=t,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n),n.length=0;let r=this.polygonIndicesPool.obtain();r.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,l=0;for(let t=0,h=e.length;t<h;t+=3){let h=e[t]<<1,c=e[t+1]<<1,d=e[t+2]<<1,u=i[h],m=i[h+1],p=i[c],f=i[c+1],g=i[d],x=i[d+1],w=!1;if(o==h){let t=a.length-4,e=Ke.winding(a[t],a[t+1],a[t+2],a[t+3],g,x),i=Ke.winding(g,x,a[0],a[1],a[2],a[3]);e==l&&i==l&&(a.push(g),a.push(x),r.push(d),w=!0)}w||(a.length>0?(s.push(a),n.push(r)):(this.polygonPool.free(a),this.polygonIndicesPool.free(r)),a=this.polygonPool.obtain(),a.length=0,a.push(u),a.push(m),a.push(p),a.push(f),a.push(g),a.push(x),r=this.polygonIndicesPool.obtain(),r.length=0,r.push(h),r.push(c),r.push(d),l=Ke.winding(u,m,p,f,g,x),o=h)}a.length>0&&(s.push(a),n.push(r));for(let t=0,e=s.length;t<e;t++){if(r=n[t],0==r.length)continue;let i=r[0],o=r[r.length-1];a=s[t];let l=a.length-4,h=a[l],c=a[l+1],d=a[l+2],u=a[l+3],m=a[0],p=a[1],f=a[2],g=a[3],x=Ke.winding(h,c,d,u,m,p);for(let l=0;l<e;l++){if(l==t)continue;let e=n[l];if(3!=e.length)continue;let w=e[0],b=e[1],y=e[2],v=s[l],A=v[v.length-2],S=v[v.length-1];if(w!=i||b!=o)continue;let C=Ke.winding(h,c,d,u,A,S),k=Ke.winding(A,S,m,p,f,g);C==x&&k==x&&(v.length=0,e.length=0,a.push(A),a.push(S),r.push(y),h=d,c=u,d=A,u=S,l=0)}}for(let t=s.length-1;t>=0;t--)a=s[t],0==a.length&&(s.splice(t,1),this.polygonPool.free(a),r=n[t],n.splice(t,1),this.polygonIndicesPool.free(r));return s}static isConcave(t,e,i,s){let n=s[(e+t-1)%e]<<1,r=s[t]<<1,a=s[(t+1)%e]<<1;return!this.positiveArea(i[n],i[n+1],i[r],i[r+1],i[a],i[a+1])}static positiveArea(t,e,i,s,n,r){return t*(r-s)+i*(e-r)+n*(s-e)>=0}static winding(t,e,i,s,n,r){let a=i-t,o=s-e;return n*o-r*a+a*e-t*o>=0?1:-1}}class Qe{constructor(){this.triangulator=new Ke,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let i=e.worldVerticesLength,s=c.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,s,0,2);let n=this.clippingPolygon;Qe.makeClockwise(n);let r=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n));for(let t=0,e=r.length;t<e;t++){let e=r[t];Qe.makeClockwise(e),e.push(e[0]),e.push(e[1])}return r.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,i,s,n,r,a,o){let l=this.clipOutput,h=this.clippedVertices,d=this.clippedTriangles,u=this.clippingPolygons,m=this.clippingPolygons.length,p=o?12:8,f=0;h.length=0,d.length=0;t:for(let e=0;e<s;e+=3){let s=i[e]<<1,g=t[s],x=t[s+1],w=n[s],b=n[s+1];s=i[e+1]<<1;let y=t[s],v=t[s+1],A=n[s],S=n[s+1];s=i[e+2]<<1;let C=t[s],k=t[s+1],E=n[s],T=n[s+1];for(let t=0;t<m;t++){let e=h.length;if(!this.clip(g,x,y,v,C,k,u[t],l)){let t=c.setArraySize(h,e+3*p);t[e]=g,t[e+1]=x,t[e+2]=r.r,t[e+3]=r.g,t[e+4]=r.b,t[e+5]=r.a,o?(t[e+6]=w,t[e+7]=b,t[e+8]=a.r,t[e+9]=a.g,t[e+10]=a.b,t[e+11]=a.a,t[e+12]=y,t[e+13]=v,t[e+14]=r.r,t[e+15]=r.g,t[e+16]=r.b,t[e+17]=r.a,t[e+18]=A,t[e+19]=S,t[e+20]=a.r,t[e+21]=a.g,t[e+22]=a.b,t[e+23]=a.a,t[e+24]=C,t[e+25]=k,t[e+26]=r.r,t[e+27]=r.g,t[e+28]=r.b,t[e+29]=r.a,t[e+30]=E,t[e+31]=T,t[e+32]=a.r,t[e+33]=a.g,t[e+34]=a.b,t[e+35]=a.a):(t[e+6]=w,t[e+7]=b,t[e+8]=y,t[e+9]=v,t[e+10]=r.r,t[e+11]=r.g,t[e+12]=r.b,t[e+13]=r.a,t[e+14]=A,t[e+15]=S,t[e+16]=C,t[e+17]=k,t[e+18]=r.r,t[e+19]=r.g,t[e+20]=r.b,t[e+21]=r.a,t[e+22]=E,t[e+23]=T),e=d.length;let i=c.setArraySize(d,e+3);i[e]=f,i[e+1]=f+1,i[e+2]=f+2,f+=3;continue t}{let t=l.length;if(0==t)continue;let i=v-k,s=C-y,n=g-C,u=k-x,m=1/(i*n+s*(x-k)),I=t>>1,M=this.clipOutput,F=c.setArraySize(h,e+I*p);for(let l=0;l<t;l+=2){let t=M[l],h=M[l+1];F[e]=t,F[e+1]=h,F[e+2]=r.r,F[e+3]=r.g,F[e+4]=r.b,F[e+5]=r.a;let c=t-C,d=h-k,f=(i*c+s*d)*m,g=(u*c+n*d)*m,x=1-f-g;F[e+6]=w*f+A*g+E*x,F[e+7]=b*f+S*g+T*x,o&&(F[e+8]=a.r,F[e+9]=a.g,F[e+10]=a.b,F[e+11]=a.a),e+=p}e=d.length;let L=c.setArraySize(d,e+3*(I-2));I--;for(let t=1;t<I;t++)L[e]=f,L[e+1]=f+t,L[e+2]=f+t+1,e+=3;f+=I+1}}}}clip(t,e,i,s,n,r,a,o){let l=o,h=!1,c=null;a.length%4>=2?(c=o,o=this.scratch):c=this.scratch,c.length=0,c.push(t),c.push(e),c.push(i),c.push(s),c.push(n),c.push(r),c.push(t),c.push(e),o.length=0;let d=a,u=a.length-4;for(let t=0;;t+=2){let e=d[t],i=d[t+1],s=d[t+2],n=d[t+3],r=e-s,a=i-n,m=c,p=c.length-2,f=o.length;for(let t=0;t<p;t+=2){let l=m[t],c=m[t+1],d=m[t+2],u=m[t+3],p=r*(u-n)-a*(d-s)>0;if(r*(c-n)-a*(l-s)>0){if(p){o.push(d),o.push(u);continue}let t=u-c,r=d-l,a=t*(s-e)-r*(n-i);if(Math.abs(a)>1e-6){let h=(r*(i-c)-t*(e-l))/a;o.push(e+(s-e)*h),o.push(i+(n-i)*h)}else o.push(e),o.push(i)}else if(p){let t=u-c,r=d-l,a=t*(s-e)-r*(n-i);if(Math.abs(a)>1e-6){let h=(r*(i-c)-t*(e-l))/a;o.push(e+(s-e)*h),o.push(i+(n-i)*h)}else o.push(e),o.push(i);o.push(d),o.push(u)}h=!0}if(f==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==u)break;let g=o;(o=c).length=0,c=g}if(l!=o){l.length=0;for(let t=0,e=o.length-2;t<e;t++)l[t]=o[t]}else l.length=l.length-2;return h}static makeClockwise(t){let e=t,i=t.length,s=e[i-2]*e[1]-e[0]*e[i-1],n=0,r=0,a=0,o=0;for(let t=0,l=i-3;t<l;t+=2)n=e[t],r=e[t+1],a=e[t+2],o=e[t+3],s+=n*o-a*r;if(!(s<0))for(let t=0,s=i-2,n=i>>1;t<n;t+=2){let i=e[t],n=e[t+1],r=s-t;e[t]=e[r],e[t+1]=e[r+1],e[r]=i,e[r+1]=n}}}class $e{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new fe,s="string"==typeof t?JSON.parse(t):t,n=s.skeleton;if(n&&(i.hash=n.hash,i.version=n.spine,i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height,i.fps=n.fps,i.imagesPath=n.images),s.bones)for(let t=0;t<s.bones.length;t++){let n=s.bones[t],r=null,a=ni(n,"parent",null);a&&(r=i.findBone(a));let o=new ee(i.bones.length,n.name,r);o.length=ni(n,"length",0)*e,o.x=ni(n,"x",0)*e,o.y=ni(n,"y",0)*e,o.rotation=ni(n,"rotation",0),o.scaleX=ni(n,"scaleX",1),o.scaleY=ni(n,"scaleY",1),o.shearX=ni(n,"shearX",0),o.shearY=ni(n,"shearY",0),o.transformMode=c.enumValue(Dt,ni(n,"transform","Normal")),o.skinRequired=ni(n,"skin",!1);let l=ni(n,"color",null);l&&o.color.setFromString(l),i.bones.push(o)}if(s.slots)for(let t=0;t<s.slots.length;t++){let e=s.slots[t],n=i.findBone(e.bone),a=new we(i.slots.length,e.name,n),o=ni(e,"color",null);o&&a.color.setFromString(o);let l=ni(e,"dark",null);l&&(a.darkColor=r.fromString(l)),a.attachmentName=ni(e,"attachment",null),a.blendMode=c.enumValue(qt,ni(e,"blend","normal")),i.slots.push(a)}if(s.ik)for(let t=0;t<s.ik.length;t++){let n=s.ik[t],r=new he(n.name);r.order=ni(n,"order",0),r.skinRequired=ni(n,"skin",!1);for(let t=0;t<n.bones.length;t++)r.bones.push(i.findBone(n.bones[t]));r.target=i.findBone(n.target),r.mix=ni(n,"mix",1),r.softness=ni(n,"softness",0)*e,r.bendDirection=ni(n,"bendPositive",!0)?1:-1,r.compress=ni(n,"compress",!1),r.stretch=ni(n,"stretch",!1),r.uniform=ni(n,"uniform",!1),i.ikConstraints.push(r)}if(s.transform)for(let t=0;t<s.transform.length;t++){let n=s.transform[t],r=new be(n.name);r.order=ni(n,"order",0),r.skinRequired=ni(n,"skin",!1);for(let t=0;t<n.bones.length;t++)r.bones.push(i.findBone(n.bones[t]));let a=n.target;r.target=i.findBone(a),r.local=ni(n,"local",!1),r.relative=ni(n,"relative",!1),r.offsetRotation=ni(n,"rotation",0),r.offsetX=ni(n,"x",0)*e,r.offsetY=ni(n,"y",0)*e,r.offsetScaleX=ni(n,"scaleX",0),r.offsetScaleY=ni(n,"scaleY",0),r.offsetShearY=ni(n,"shearY",0),r.mixRotate=ni(n,"mixRotate",1),r.mixX=ni(n,"mixX",1),r.mixY=ni(n,"mixY",r.mixX),r.mixScaleX=ni(n,"mixScaleX",1),r.mixScaleY=ni(n,"mixScaleY",r.mixScaleX),r.mixShearY=ni(n,"mixShearY",1),i.transformConstraints.push(r)}if(s.path)for(let t=0;t<s.path.length;t++){let n=s.path[t],r=new ce(n.name);r.order=ni(n,"order",0),r.skinRequired=ni(n,"skin",!1);for(let t=0;t<n.bones.length;t++)r.bones.push(i.findBone(n.bones[t]));let a=n.target;r.target=i.findSlot(a),r.positionMode=c.enumValue(Ot,ni(n,"positionMode","Percent")),r.spacingMode=c.enumValue(Nt,ni(n,"spacingMode","Length")),r.rotateMode=c.enumValue(Ut,ni(n,"rotateMode","Tangent")),r.offsetRotation=ni(n,"rotation",0),r.position=ni(n,"position",0),r.positionMode==Ot.Fixed&&(r.position*=e),r.spacing=ni(n,"spacing",0),r.spacingMode!=Nt.Length&&r.spacingMode!=Nt.Fixed||(r.spacing*=e),r.mixRotate=ni(n,"mixRotate",1),r.mixX=ni(n,"mixX",1),r.mixY=ni(n,"mixY",r.mixX),i.pathConstraints.push(r)}if(s.skins)for(let t=0;t<s.skins.length;t++){let e=s.skins[t],n=new xe(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++)n.bones.push(i.findBone(e.bones[t]));if(e.ik)for(let t=0;t<e.ik.length;t++)n.constraints.push(i.findIkConstraint(e.ik[t]));if(e.transform)for(let t=0;t<e.transform.length;t++)n.constraints.push(i.findTransformConstraint(e.transform[t]));if(e.path)for(let t=0;t<e.path.length;t++)n.constraints.push(i.findPathConstraint(e.path[t]));for(let t in e.attachments){let s=i.findSlot(t),r=e.attachments[t];for(let t in r){let e=this.readAttachment(r[t],n,s.index,t,i);e&&n.setAttachment(s.index,t,e)}}i.skins.push(n),"default"==n.name&&(i.defaultSkin=n)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],s=(e.skin?i.findSkin(e.skin):i.defaultSkin).getAttachment(e.slotIndex,e.parent);e.mesh.timelineAttahment=e.inheritTimeline?s:e.mesh,e.mesh.setParentMesh(s),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,s.events)for(let t in s.events){let e=s.events[t],n=new oe(t);n.intValue=ni(e,"int",0),n.floatValue=ni(e,"float",0),n.stringValue=ni(e,"string",""),n.audioPath=ni(e,"audio",null),n.audioPath&&(n.volume=ni(e,"volume",1),n.balance=ni(e,"balance",0)),i.events.push(n)}if(s.animations)for(let t in s.animations){let e=s.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,s,n){let r=this.scale;switch(s=ni(t,"name",s),ni(t,"type","region")){case"region":{let i=ni(t,"path",s),n=this.readSequence(ni(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,s,i,n);if(!a)return null;a.path=i,a.x=ni(t,"x",0)*r,a.y=ni(t,"y",0)*r,a.scaleX=ni(t,"scaleX",1),a.scaleY=ni(t,"scaleY",1),a.rotation=ni(t,"rotation",0),a.width=t.width*r,a.height=t.height*r,a.sequence=n;let o=ni(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,s);if(!i)return null;this.readVertices(t,i,t.vertexCount<<1);let n=ni(t,"color",null);return n&&i.color.setFromString(n),i}case"mesh":case"linkedmesh":{let n=ni(t,"path",s),a=this.readSequence(ni(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,s,n,a);if(!o)return null;o.path=n;let l=ni(t,"color",null);l&&o.color.setFromString(l),o.width=ni(t,"width",0)*r,o.height=ni(t,"height",0)*r,o.sequence=a;let h=ni(t,"parent",null);if(h)return this.linkedMeshes.push(new ti(o,ni(t,"skin",null),i,h,ni(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=ni(t,"edges",null),o.hullLength=2*ni(t,"hull",0),o}case"path":{let i=this.attachmentLoader.newPathAttachment(e,s);if(!i)return null;i.closed=ni(t,"closed",!1),i.constantSpeed=ni(t,"constantSpeed",!0);let n=t.vertexCount;this.readVertices(t,i,n<<1);let a=c.newArray(n/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*r;i.lengths=a;let o=ni(t,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,s);if(!i)return null;i.x=ni(t,"x",0)*r,i.y=ni(t,"y",0)*r,i.rotation=ni(t,"rotation",0);let n=ni(t,"color",null);return n&&i.color.setFromString(n),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,s);if(!i)return null;let r=ni(t,"end",null);r&&(i.endSlot=n.findSlot(r));let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=ni(t,"color",null);return o&&i.color.setFromString(o),i}}return null}readSequence(t){if(null==t)return null;let e=new w(ni(t,"count",0));return e.start=ni(t,"start",1),e.digits=ni(t,"digits",0),e.setupIndex=ni(t,"setup",0),e}readVertices(t,e,i){let s=this.scale;e.worldVerticesLength=i;let n=t.vertices;if(i==n.length){let t=c.toFloatArray(n);if(1!=s)for(let e=0,i=n.length;e<i;e++)t[e]*=s;return void(e.vertices=t)}let r=new Array,a=new Array;for(let t=0,e=n.length;t<e;){let e=n[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(n[t]),r.push(n[t+1]*s),r.push(n[t+2]*s),r.push(n[t+3])}e.bones=a,e.vertices=c.toFloatArray(r)}readAnimation(t,e,i){let s=this.scale,n=new Array;if(t.slots)for(let e in t.slots){let s=t.slots[e],a=i.findSlot(e).index;for(let t in s){let e=s[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new ht(i,a);for(let s=0;s<i;s++){let i=e[s];t.setFrame(s,ni(i,"time",0),ni(i,"name",null))}n.push(t)}else if("rgba"==t){let t=new nt(i,i<<2,a),s=e[0],o=ni(s,"time",0),l=r.fromString(s.color);for(let i=0,n=0;;i++){t.setFrame(i,o,l.r,l.g,l.b,l.a);let a=e[i+1];if(!a){t.shrink(n);break}let h=ni(a,"time",0),c=r.fromString(a.color),d=s.curve;d&&(n=si(d,t,n,i,0,o,h,l.r,c.r,1),n=si(d,t,n,i,1,o,h,l.g,c.g,1),n=si(d,t,n,i,2,o,h,l.b,c.b,1),n=si(d,t,n,i,3,o,h,l.a,c.a,1)),o=h,l=c,s=a}n.push(t)}else if("rgb"==t){let t=new rt(i,3*i,a),s=e[0],o=ni(s,"time",0),l=r.fromString(s.color);for(let i=0,n=0;;i++){t.setFrame(i,o,l.r,l.g,l.b);let a=e[i+1];if(!a){t.shrink(n);break}let h=ni(a,"time",0),c=r.fromString(a.color),d=s.curve;d&&(n=si(d,t,n,i,0,o,h,l.r,c.r,1),n=si(d,t,n,i,1,o,h,l.g,c.g,1),n=si(d,t,n,i,2,o,h,l.b,c.b,1)),o=h,l=c,s=a}n.push(t)}else if("alpha"==t)n.push(ei(e,new at(i,i,a),0,1));else if("rgba2"==t){let t=new ot(i,7*i,a),s=e[0],o=ni(s,"time",0),l=r.fromString(s.light),h=r.fromString(s.dark);for(let i=0,n=0;;i++){t.setFrame(i,o,l.r,l.g,l.b,l.a,h.r,h.g,h.b);let a=e[i+1];if(!a){t.shrink(n);break}let c=ni(a,"time",0),d=r.fromString(a.light),u=r.fromString(a.dark),m=s.curve;m&&(n=si(m,t,n,i,0,o,c,l.r,d.r,1),n=si(m,t,n,i,1,o,c,l.g,d.g,1),n=si(m,t,n,i,2,o,c,l.b,d.b,1),n=si(m,t,n,i,3,o,c,l.a,d.a,1),n=si(m,t,n,i,4,o,c,h.r,u.r,1),n=si(m,t,n,i,5,o,c,h.g,u.g,1),n=si(m,t,n,i,6,o,c,h.b,u.b,1)),o=c,l=d,h=u,s=a}n.push(t)}else if("rgb2"==t){let t=new lt(i,6*i,a),s=e[0],o=ni(s,"time",0),l=r.fromString(s.light),h=r.fromString(s.dark);for(let i=0,n=0;;i++){t.setFrame(i,o,l.r,l.g,l.b,h.r,h.g,h.b);let a=e[i+1];if(!a){t.shrink(n);break}let c=ni(a,"time",0),d=r.fromString(a.light),u=r.fromString(a.dark),m=s.curve;m&&(n=si(m,t,n,i,0,o,c,l.r,d.r,1),n=si(m,t,n,i,1,o,c,l.g,d.g,1),n=si(m,t,n,i,2,o,c,l.b,d.b,1),n=si(m,t,n,i,3,o,c,h.r,u.r,1),n=si(m,t,n,i,4,o,c,h.g,u.g,1),n=si(m,t,n,i,5,o,c,h.b,u.b,1)),o=c,l=d,h=u,s=a}n.push(t)}}}if(t.bones)for(let e in t.bones){let r=t.bones[e],a=i.findBone(e).index;for(let t in r){let e=r[t],i=e.length;if(0!=i)if("rotate"===t)n.push(ei(e,new G(i,i,a),0,1));else if("translate"===t){let t=new Z(i,i<<1,a);n.push(ii(e,t,"x","y",0,s))}else if("translatex"===t){let t=new J(i,i,a);n.push(ei(e,t,0,s))}else if("translatey"===t){let t=new K(i,i,a);n.push(ei(e,t,0,s))}else if("scale"===t){let t=new Q(i,i<<1,a);n.push(ii(e,t,"x","y",1,1))}else if("scalex"===t){let t=new $(i,i,a);n.push(ei(e,t,1,1))}else if("scaley"===t){let t=new tt(i,i,a);n.push(ei(e,t,1,1))}else if("shear"===t){let t=new et(i,i<<1,a);n.push(ii(e,t,"x","y",0,1))}else if("shearx"===t){let t=new it(i,i,a);n.push(ei(e,t,0,1))}else if("sheary"===t){let t=new st(i,i,a);n.push(ei(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let r=t.ik[e],a=r[0];if(!a)continue;let o=i.findIkConstraint(e),l=i.ikConstraints.indexOf(o),h=new mt(r.length,r.length<<1,l),c=ni(a,"time",0),d=ni(a,"mix",1),u=ni(a,"softness",0)*s;for(let t=0,e=0;;t++){h.setFrame(t,c,d,u,ni(a,"bendPositive",!0)?1:-1,ni(a,"compress",!1),ni(a,"stretch",!1));let i=r[t+1];if(!i){h.shrink(e);break}let n=ni(i,"time",0),o=ni(i,"mix",1),l=ni(i,"softness",0)*s,m=a.curve;m&&(e=si(m,h,e,t,0,c,n,d,o,1),e=si(m,h,e,t,1,c,n,u,l,s)),c=n,d=o,u=l,a=i}n.push(h)}if(t.transform)for(let e in t.transform){let s=t.transform[e],r=s[0];if(!r)continue;let a=i.findTransformConstraint(e),o=i.transformConstraints.indexOf(a),l=new pt(s.length,6*s.length,o),h=ni(r,"time",0),c=ni(r,"mixRotate",1),d=ni(r,"mixX",1),u=ni(r,"mixY",d),m=ni(r,"mixScaleX",1),p=ni(r,"mixScaleY",m),f=ni(r,"mixShearY",1);for(let t=0,e=0;;t++){l.setFrame(t,h,c,d,u,m,p,f);let i=s[t+1];if(!i){l.shrink(e);break}let n=ni(i,"time",0),a=ni(i,"mixRotate",1),o=ni(i,"mixX",1),g=ni(i,"mixY",o),x=ni(i,"mixScaleX",1),w=ni(i,"mixScaleY",x),b=ni(i,"mixShearY",1),y=r.curve;y&&(e=si(y,l,e,t,0,h,n,c,a,1),e=si(y,l,e,t,1,h,n,d,o,1),e=si(y,l,e,t,2,h,n,u,g,1),e=si(y,l,e,t,3,h,n,m,x,1),e=si(y,l,e,t,4,h,n,p,w,1),e=si(y,l,e,t,5,h,n,f,b,1)),h=n,c=a,d=o,u=g,m=x,p=w,m=x,r=i}n.push(l)}if(t.path)for(let e in t.path){let r=t.path[e],a=i.findPathConstraint(e),o=i.pathConstraints.indexOf(a);for(let t in r){let e=r[t],i=e[0];if(!i)continue;let l=e.length;if("position"===t){let t=new ft(l,l,o);n.push(ei(e,t,0,a.positionMode==Ot.Fixed?s:1))}else if("spacing"===t){let t=new gt(l,l,o);n.push(ei(e,t,0,a.spacingMode==Nt.Length||a.spacingMode==Nt.Fixed?s:1))}else if("mix"===t){let t=new xt(l,3*l,o),s=ni(i,"time",0),r=ni(i,"mixRotate",1),a=ni(i,"mixX",1),h=ni(i,"mixY",a);for(let n=0,o=0;;n++){t.setFrame(n,s,r,a,h);let l=e[n+1];if(!l){t.shrink(o);break}let c=ni(l,"time",0),d=ni(l,"mixRotate",1),u=ni(l,"mixX",1),m=ni(l,"mixY",u),p=i.curve;p&&(o=si(p,t,o,n,0,s,c,r,d,1),o=si(p,t,o,n,1,s,c,a,u,1),o=si(p,t,o,n,2,s,c,h,m,1)),s=c,r=d,a=u,h=m,i=l}n.push(t)}}}if(t.attachments)for(let e in t.attachments){let r=t.attachments[e],a=i.findSkin(e);for(let t in r){let e=r[t],o=i.findSlot(t).index;for(let t in e){let i=e[t],r=a.getAttachment(o,t);for(let t in i){let e=i[t],a=e[0];if(a)if("deform"==t){let t=r.bones,i=r.vertices,l=t?i.length/3*2:i.length,h=new ct(e.length,e.length,o,r),d=ni(a,"time",0);for(let n=0,r=0;;n++){let o,u=ni(a,"vertices",null);if(u){o=c.newFloatArray(l);let e=ni(a,"offset",0);if(c.arrayCopy(u,0,o,e,u.length),1!=s)for(let t=e,i=t+u.length;t<i;t++)o[t]*=s;if(!t)for(let t=0;t<l;t++)o[t]+=i[t]}else o=t?c.newFloatArray(l):i;h.setFrame(n,d,o);let m=e[n+1];if(!m){h.shrink(r);break}let p=ni(m,"time",0),f=a.curve;f&&(r=si(f,h,r,n,0,d,p,0,1,1)),d=p,a=m}n.push(h)}else if("sequence"==t){let t=new wt(e.length,o,r),i=0;for(let s=0;s<e.length;s++){let n=ni(a,"delay",i),r=ni(a,"time",0),o=b[ni(a,"mode","hold")],l=ni(a,"index",0);t.setFrame(s,r,o,l,n),i=n,a=e[s+1]}n.push(t)}}}}}if(t.drawOrder){let e=new ut(t.drawOrder.length),s=i.slots.length,r=0;for(let n=0;n<t.drawOrder.length;n++,r++){let a=t.drawOrder[n],o=null,l=ni(a,"offsets",null);if(l){o=c.newArray(s,-1);let t=c.newArray(s-l.length,0),e=0,n=0;for(let s=0;s<l.length;s++){let r=l[s],a=i.findSlot(r.slot).index;for(;e!=a;)t[n++]=e++;o[e+r.offset]=e++}for(;e<s;)t[n++]=e++;for(let e=s-1;e>=0;e--)-1==o[e]&&(o[e]=t[--n])}e.setFrame(r,ni(a,"time",0),o)}n.push(e)}if(t.events){let e=new dt(t.events.length),s=0;for(let n=0;n<t.events.length;n++,s++){let r=t.events[n],a=i.findEvent(r.name),o=new ae(c.toSinglePrecision(ni(r,"time",0)),a);o.intValue=ni(r,"int",a.intValue),o.floatValue=ni(r,"float",a.floatValue),o.stringValue=ni(r,"string",a.stringValue),o.data.audioPath&&(o.volume=ni(r,"volume",1),o.balance=ni(r,"balance",0)),e.setFrame(s,o)}n.push(e)}let a=0;for(let t=0,e=n.length;t<e;t++)a=Math.max(a,n[t].getDuration());i.animations.push(new v(e,n,a))}}class ti{constructor(t,e,i,s,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=n}}function ei(t,e,i,s){let n=t[0],r=ni(n,"time",0),a=ni(n,"value",i)*s,o=0;for(let l=0;;l++){e.setFrame(l,r,a);let h=t[l+1];if(!h)return e.shrink(o),e;let c=ni(h,"time",0),d=ni(h,"value",i)*s;n.curve&&(o=si(n.curve,e,o,l,0,r,c,a,d,s)),r=c,a=d,n=h}}function ii(t,e,i,s,n,r){let a=t[0],o=ni(a,"time",0),l=ni(a,i,n)*r,h=ni(a,s,n)*r,c=0;for(let d=0;;d++){e.setFrame(d,o,l,h);let u=t[d+1];if(!u)return e.shrink(c),e;let m=ni(u,"time",0),p=ni(u,i,n)*r,f=ni(u,s,n)*r,g=a.curve;g&&(c=si(g,e,c,d,0,o,m,l,p,r),c=si(g,e,c,d,1,o,m,h,f,r)),o=m,l=p,h=f,a=u}}function si(t,e,i,s,n,r,a,o,l,h){if("stepped"==t)return e.setStepped(s),i;let c=n<<2,d=t[c],u=t[c+1]*h,m=t[c+2],p=t[c+3]*h;return e.setBezier(i,s,n,r,o,d,u,m,p,a,l),i+1}function ni(t,e,i){return void 0!==t[e]?t[e]:i}var ri;void 0===Math.fround&&(Math.fround=(ri=new Float32Array(1),function(t){return ri[0]=t,ri[0]}));class ai{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,i,s){t.x+=a.randomTriangular(-this.jitterX,this.jitterY),t.y+=a.randomTriangular(-this.jitterX,this.jitterY)}end(){}}class oi{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,i,s){let n=this.angle*a.degreesToRadians,r=t.x-this.worldX,o=t.y-this.worldY,l=Math.sqrt(r*r+o*o);if(l<this.radius){let e=oi.interpolation.apply(0,n,(this.radius-l)/this.radius),i=Math.cos(e),s=Math.sin(e);t.x=i*r-s*o+this.worldX,t.y=s*r+i*o+this.worldY}}end(){}}oi.interpolation=new h(2);class li{constructor(t,e={alpha:"true"}){this.restorables=new Array,t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?(this.gl=t,this.canvas=this.gl.canvas):this.setupCanvas(t,e)}setupCanvas(t,e){this.gl=t.getContext("webgl2",e)||t.getContext("webgl",e),this.canvas=t,t.addEventListener("webglcontextlost",(t=>{t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()}))}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}}const hi=771;class ci{static getDestGLBlendMode(t){switch(t){case qt.Normal:return hi;case qt.Additive:return 1;case qt.Multiply:case qt.Screen:return hi;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,e=!1){switch(t){case qt.Normal:case qt.Additive:return e?1:770;case qt.Multiply:return 774;case qt.Screen:return 1;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case qt.Normal:case qt.Additive:return 1;case qt.Multiply:return hi;case qt.Screen:return 769;default:throw new Error("Unknown blend mode: "+t)}}}class di extends Xt{constructor(t,e,i=!1){super(e),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.context=t instanceof li?t:new li(t),this.useMipMaps=i,this.restore(),this.context.addRestorable(this)}setFilters(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,di.validateMagFilter(e))}static validateMagFilter(t){switch(t){case Pt.MipMap:case Pt.MipMapLinearLinear:case Pt.MipMapLinearNearest:case Pt.MipMapNearestLinear:case Pt.MipMapNearestNearest:return Pt.Linear;default:return t}}setWraps(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),di.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){let e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}}di.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;class ui extends ne{constructor(t,e="",i=null){super((e=>new di(t,e)),e,i)}}class mi{constructor(t=0,e=0,i=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[pi]+this.y*e[fi]+this.z*e[gi]+e[xi],this.x*e[wi]+this.y*e[bi]+this.z*e[yi]+e[vi],this.x*e[Ai]+this.y*e[Si]+this.z*e[Ci]+e[ki])}project(t){let e=t.values,i=1/(this.x*e[Ei]+this.y*e[Ti]+this.z*e[Ii]+e[Mi]);return this.set((this.x*e[pi]+this.y*e[fi]+this.z*e[gi]+e[xi])*i,(this.x*e[wi]+this.y*e[bi]+this.z*e[yi]+e[vi])*i,(this.x*e[Ai]+this.y*e[Si]+this.z*e[Ci]+e[ki])*i)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x,i=t.y-this.y,s=t.z-this.z;return Math.sqrt(e*e+i*i+s*s)}}const pi=0,fi=4,gi=8,xi=12,wi=1,bi=5,yi=9,vi=13,Ai=2,Si=6,Ci=10,ki=14,Ei=3,Ti=7,Ii=11,Mi=15;class Fi{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[pi]=1,t[bi]=1,t[Ci]=1,t[Mi]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,e=this.values;return t[pi]=e[pi],t[fi]=e[wi],t[gi]=e[Ai],t[xi]=e[Ei],t[wi]=e[fi],t[bi]=e[bi],t[yi]=e[Si],t[vi]=e[Ti],t[Ai]=e[gi],t[Si]=e[yi],t[Ci]=e[Ci],t[ki]=e[Ii],t[Ei]=e[xi],t[Ti]=e[vi],t[Ii]=e[ki],t[Mi]=e[Mi],this.set(t)}identity(){let t=this.values;return t[pi]=1,t[fi]=0,t[gi]=0,t[xi]=0,t[wi]=0,t[bi]=1,t[yi]=0,t[vi]=0,t[Ai]=0,t[Si]=0,t[Ci]=1,t[ki]=0,t[Ei]=0,t[Ti]=0,t[Ii]=0,t[Mi]=1,this}invert(){let t=this.values,e=this.temp,i=t[Ei]*t[Si]*t[yi]*t[xi]-t[Ai]*t[Ti]*t[yi]*t[xi]-t[Ei]*t[bi]*t[Ci]*t[xi]+t[wi]*t[Ti]*t[Ci]*t[xi]+t[Ai]*t[bi]*t[Ii]*t[xi]-t[wi]*t[Si]*t[Ii]*t[xi]-t[Ei]*t[Si]*t[gi]*t[vi]+t[Ai]*t[Ti]*t[gi]*t[vi]+t[Ei]*t[fi]*t[Ci]*t[vi]-t[pi]*t[Ti]*t[Ci]*t[vi]-t[Ai]*t[fi]*t[Ii]*t[vi]+t[pi]*t[Si]*t[Ii]*t[vi]+t[Ei]*t[bi]*t[gi]*t[ki]-t[wi]*t[Ti]*t[gi]*t[ki]-t[Ei]*t[fi]*t[yi]*t[ki]+t[pi]*t[Ti]*t[yi]*t[ki]+t[wi]*t[fi]*t[Ii]*t[ki]-t[pi]*t[bi]*t[Ii]*t[ki]-t[Ai]*t[bi]*t[gi]*t[Mi]+t[wi]*t[Si]*t[gi]*t[Mi]+t[Ai]*t[fi]*t[yi]*t[Mi]-t[pi]*t[Si]*t[yi]*t[Mi]-t[wi]*t[fi]*t[Ci]*t[Mi]+t[pi]*t[bi]*t[Ci]*t[Mi];if(0==i)throw new Error("non-invertible matrix");let s=1/i;return e[pi]=t[yi]*t[ki]*t[Ti]-t[vi]*t[Ci]*t[Ti]+t[vi]*t[Si]*t[Ii]-t[bi]*t[ki]*t[Ii]-t[yi]*t[Si]*t[Mi]+t[bi]*t[Ci]*t[Mi],e[fi]=t[xi]*t[Ci]*t[Ti]-t[gi]*t[ki]*t[Ti]-t[xi]*t[Si]*t[Ii]+t[fi]*t[ki]*t[Ii]+t[gi]*t[Si]*t[Mi]-t[fi]*t[Ci]*t[Mi],e[gi]=t[gi]*t[vi]*t[Ti]-t[xi]*t[yi]*t[Ti]+t[xi]*t[bi]*t[Ii]-t[fi]*t[vi]*t[Ii]-t[gi]*t[bi]*t[Mi]+t[fi]*t[yi]*t[Mi],e[xi]=t[xi]*t[yi]*t[Si]-t[gi]*t[vi]*t[Si]-t[xi]*t[bi]*t[Ci]+t[fi]*t[vi]*t[Ci]+t[gi]*t[bi]*t[ki]-t[fi]*t[yi]*t[ki],e[wi]=t[vi]*t[Ci]*t[Ei]-t[yi]*t[ki]*t[Ei]-t[vi]*t[Ai]*t[Ii]+t[wi]*t[ki]*t[Ii]+t[yi]*t[Ai]*t[Mi]-t[wi]*t[Ci]*t[Mi],e[bi]=t[gi]*t[ki]*t[Ei]-t[xi]*t[Ci]*t[Ei]+t[xi]*t[Ai]*t[Ii]-t[pi]*t[ki]*t[Ii]-t[gi]*t[Ai]*t[Mi]+t[pi]*t[Ci]*t[Mi],e[yi]=t[xi]*t[yi]*t[Ei]-t[gi]*t[vi]*t[Ei]-t[xi]*t[wi]*t[Ii]+t[pi]*t[vi]*t[Ii]+t[gi]*t[wi]*t[Mi]-t[pi]*t[yi]*t[Mi],e[vi]=t[gi]*t[vi]*t[Ai]-t[xi]*t[yi]*t[Ai]+t[xi]*t[wi]*t[Ci]-t[pi]*t[vi]*t[Ci]-t[gi]*t[wi]*t[ki]+t[pi]*t[yi]*t[ki],e[Ai]=t[bi]*t[ki]*t[Ei]-t[vi]*t[Si]*t[Ei]+t[vi]*t[Ai]*t[Ti]-t[wi]*t[ki]*t[Ti]-t[bi]*t[Ai]*t[Mi]+t[wi]*t[Si]*t[Mi],e[Si]=t[xi]*t[Si]*t[Ei]-t[fi]*t[ki]*t[Ei]-t[xi]*t[Ai]*t[Ti]+t[pi]*t[ki]*t[Ti]+t[fi]*t[Ai]*t[Mi]-t[pi]*t[Si]*t[Mi],e[Ci]=t[fi]*t[vi]*t[Ei]-t[xi]*t[bi]*t[Ei]+t[xi]*t[wi]*t[Ti]-t[pi]*t[vi]*t[Ti]-t[fi]*t[wi]*t[Mi]+t[pi]*t[bi]*t[Mi],e[ki]=t[xi]*t[bi]*t[Ai]-t[fi]*t[vi]*t[Ai]-t[xi]*t[wi]*t[Si]+t[pi]*t[vi]*t[Si]+t[fi]*t[wi]*t[ki]-t[pi]*t[bi]*t[ki],e[Ei]=t[yi]*t[Si]*t[Ei]-t[bi]*t[Ci]*t[Ei]-t[yi]*t[Ai]*t[Ti]+t[wi]*t[Ci]*t[Ti]+t[bi]*t[Ai]*t[Ii]-t[wi]*t[Si]*t[Ii],e[Ti]=t[fi]*t[Ci]*t[Ei]-t[gi]*t[Si]*t[Ei]+t[gi]*t[Ai]*t[Ti]-t[pi]*t[Ci]*t[Ti]-t[fi]*t[Ai]*t[Ii]+t[pi]*t[Si]*t[Ii],e[Ii]=t[gi]*t[bi]*t[Ei]-t[fi]*t[yi]*t[Ei]-t[gi]*t[wi]*t[Ti]+t[pi]*t[yi]*t[Ti]+t[fi]*t[wi]*t[Ii]-t[pi]*t[bi]*t[Ii],e[Mi]=t[fi]*t[yi]*t[Ai]-t[gi]*t[bi]*t[Ai]+t[gi]*t[wi]*t[Si]-t[pi]*t[yi]*t[Si]-t[fi]*t[wi]*t[Ci]+t[pi]*t[bi]*t[Ci],t[pi]=e[pi]*s,t[fi]=e[fi]*s,t[gi]=e[gi]*s,t[xi]=e[xi]*s,t[wi]=e[wi]*s,t[bi]=e[bi]*s,t[yi]=e[yi]*s,t[vi]=e[vi]*s,t[Ai]=e[Ai]*s,t[Si]=e[Si]*s,t[Ci]=e[Ci]*s,t[ki]=e[ki]*s,t[Ei]=e[Ei]*s,t[Ti]=e[Ti]*s,t[Ii]=e[Ii]*s,t[Mi]=e[Mi]*s,this}determinant(){let t=this.values;return t[Ei]*t[Si]*t[yi]*t[xi]-t[Ai]*t[Ti]*t[yi]*t[xi]-t[Ei]*t[bi]*t[Ci]*t[xi]+t[wi]*t[Ti]*t[Ci]*t[xi]+t[Ai]*t[bi]*t[Ii]*t[xi]-t[wi]*t[Si]*t[Ii]*t[xi]-t[Ei]*t[Si]*t[gi]*t[vi]+t[Ai]*t[Ti]*t[gi]*t[vi]+t[Ei]*t[fi]*t[Ci]*t[vi]-t[pi]*t[Ti]*t[Ci]*t[vi]-t[Ai]*t[fi]*t[Ii]*t[vi]+t[pi]*t[Si]*t[Ii]*t[vi]+t[Ei]*t[bi]*t[gi]*t[ki]-t[wi]*t[Ti]*t[gi]*t[ki]-t[Ei]*t[fi]*t[yi]*t[ki]+t[pi]*t[Ti]*t[yi]*t[ki]+t[wi]*t[fi]*t[Ii]*t[ki]-t[pi]*t[bi]*t[Ii]*t[ki]-t[Ai]*t[bi]*t[gi]*t[Mi]+t[wi]*t[Si]*t[gi]*t[Mi]+t[Ai]*t[fi]*t[yi]*t[Mi]-t[pi]*t[Si]*t[yi]*t[Mi]-t[wi]*t[fi]*t[Ci]*t[Mi]+t[pi]*t[bi]*t[Ci]*t[Mi]}translate(t,e,i){let s=this.values;return s[xi]+=t,s[vi]+=e,s[ki]+=i,this}copy(){return(new Fi).set(this.values)}projection(t,e,i,s){this.identity();let n=1/Math.tan(i*(Math.PI/180)/2),r=(e+t)/(t-e),a=2*e*t/(t-e),o=this.values;return o[pi]=n/s,o[wi]=0,o[Ai]=0,o[Ei]=0,o[fi]=0,o[bi]=n,o[Si]=0,o[Ti]=0,o[gi]=0,o[yi]=0,o[Ci]=r,o[Ii]=-1,o[xi]=0,o[vi]=0,o[ki]=a,o[Mi]=0,this}ortho2d(t,e,i,s){return this.ortho(t,t+i,e,e+s,0,1)}ortho(t,e,i,s,n,r){this.identity();let a=2/(e-t),o=2/(s-i),l=-2/(r-n),h=-(e+t)/(e-t),c=-(s+i)/(s-i),d=-(r+n)/(r-n),u=this.values;return u[pi]=a,u[wi]=0,u[Ai]=0,u[Ei]=0,u[fi]=0,u[bi]=o,u[Si]=0,u[Ti]=0,u[gi]=0,u[yi]=0,u[Ci]=l,u[Ii]=0,u[xi]=h,u[vi]=c,u[ki]=d,u[Mi]=1,this}multiply(t){let e=this.temp,i=this.values,s=t.values;return e[pi]=i[pi]*s[pi]+i[fi]*s[wi]+i[gi]*s[Ai]+i[xi]*s[Ei],e[fi]=i[pi]*s[fi]+i[fi]*s[bi]+i[gi]*s[Si]+i[xi]*s[Ti],e[gi]=i[pi]*s[gi]+i[fi]*s[yi]+i[gi]*s[Ci]+i[xi]*s[Ii],e[xi]=i[pi]*s[xi]+i[fi]*s[vi]+i[gi]*s[ki]+i[xi]*s[Mi],e[wi]=i[wi]*s[pi]+i[bi]*s[wi]+i[yi]*s[Ai]+i[vi]*s[Ei],e[bi]=i[wi]*s[fi]+i[bi]*s[bi]+i[yi]*s[Si]+i[vi]*s[Ti],e[yi]=i[wi]*s[gi]+i[bi]*s[yi]+i[yi]*s[Ci]+i[vi]*s[Ii],e[vi]=i[wi]*s[xi]+i[bi]*s[vi]+i[yi]*s[ki]+i[vi]*s[Mi],e[Ai]=i[Ai]*s[pi]+i[Si]*s[wi]+i[Ci]*s[Ai]+i[ki]*s[Ei],e[Si]=i[Ai]*s[fi]+i[Si]*s[bi]+i[Ci]*s[Si]+i[ki]*s[Ti],e[Ci]=i[Ai]*s[gi]+i[Si]*s[yi]+i[Ci]*s[Ci]+i[ki]*s[Ii],e[ki]=i[Ai]*s[xi]+i[Si]*s[vi]+i[Ci]*s[ki]+i[ki]*s[Mi],e[Ei]=i[Ei]*s[pi]+i[Ti]*s[wi]+i[Ii]*s[Ai]+i[Mi]*s[Ei],e[Ti]=i[Ei]*s[fi]+i[Ti]*s[bi]+i[Ii]*s[Si]+i[Mi]*s[Ti],e[Ii]=i[Ei]*s[gi]+i[Ti]*s[yi]+i[Ii]*s[Ci]+i[Mi]*s[Ii],e[Mi]=i[Ei]*s[xi]+i[Ti]*s[vi]+i[Ii]*s[ki]+i[Mi]*s[Mi],this.set(this.temp)}multiplyLeft(t){let e=this.temp,i=this.values,s=t.values;return e[pi]=s[pi]*i[pi]+s[fi]*i[wi]+s[gi]*i[Ai]+s[xi]*i[Ei],e[fi]=s[pi]*i[fi]+s[fi]*i[bi]+s[gi]*i[Si]+s[xi]*i[Ti],e[gi]=s[pi]*i[gi]+s[fi]*i[yi]+s[gi]*i[Ci]+s[xi]*i[Ii],e[xi]=s[pi]*i[xi]+s[fi]*i[vi]+s[gi]*i[ki]+s[xi]*i[Mi],e[wi]=s[wi]*i[pi]+s[bi]*i[wi]+s[yi]*i[Ai]+s[vi]*i[Ei],e[bi]=s[wi]*i[fi]+s[bi]*i[bi]+s[yi]*i[Si]+s[vi]*i[Ti],e[yi]=s[wi]*i[gi]+s[bi]*i[yi]+s[yi]*i[Ci]+s[vi]*i[Ii],e[vi]=s[wi]*i[xi]+s[bi]*i[vi]+s[yi]*i[ki]+s[vi]*i[Mi],e[Ai]=s[Ai]*i[pi]+s[Si]*i[wi]+s[Ci]*i[Ai]+s[ki]*i[Ei],e[Si]=s[Ai]*i[fi]+s[Si]*i[bi]+s[Ci]*i[Si]+s[ki]*i[Ti],e[Ci]=s[Ai]*i[gi]+s[Si]*i[yi]+s[Ci]*i[Ci]+s[ki]*i[Ii],e[ki]=s[Ai]*i[xi]+s[Si]*i[vi]+s[Ci]*i[ki]+s[ki]*i[Mi],e[Ei]=s[Ei]*i[pi]+s[Ti]*i[wi]+s[Ii]*i[Ai]+s[Mi]*i[Ei],e[Ti]=s[Ei]*i[fi]+s[Ti]*i[bi]+s[Ii]*i[Si]+s[Mi]*i[Ti],e[Ii]=s[Ei]*i[gi]+s[Ti]*i[yi]+s[Ii]*i[Ci]+s[Mi]*i[Ii],e[Mi]=s[Ei]*i[xi]+s[Ti]*i[vi]+s[Ii]*i[ki]+s[Mi]*i[Mi],this.set(this.temp)}lookAt(t,e,i){Fi.initTemps();let s=Fi.xAxis,n=Fi.yAxis,r=Fi.zAxis;r.setFrom(e).normalize(),s.setFrom(e).normalize(),s.cross(i).normalize(),n.setFrom(s).cross(r).normalize(),this.identity();let a=this.values;return a[pi]=s.x,a[fi]=s.y,a[gi]=s.z,a[wi]=n.x,a[bi]=n.y,a[yi]=n.z,a[Ai]=-r.x,a[Si]=-r.y,a[Ci]=-r.z,Fi.tmpMatrix.identity(),Fi.tmpMatrix.values[xi]=-t.x,Fi.tmpMatrix.values[vi]=-t.y,Fi.tmpMatrix.values[ki]=-t.z,this.multiply(Fi.tmpMatrix),this}static initTemps(){null===Fi.xAxis&&(Fi.xAxis=new mi),null===Fi.yAxis&&(Fi.yAxis=new mi),null===Fi.zAxis&&(Fi.zAxis=new mi)}}Fi.xAxis=null,Fi.yAxis=null,Fi.zAxis=null,Fi.tmpMatrix=new Fi;class Li{constructor(t,e){this.position=new mi(0,0,0),this.direction=new mi(0,0,-1),this.up=new mi(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new Fi,this.inverseProjectionView=new Fi,this.projection=new Fi,this.view=new Fi,this.viewportWidth=t,this.viewportHeight=e,this.update()}update(){let t=this.projection,e=this.view,i=this.projectionView,s=this.inverseProjectionView,n=this.zoom,r=this.viewportWidth,a=this.viewportHeight;t.ortho(n*(-r/2),n*(r/2),n*(-a/2),n*(a/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),i.set(t.values),i.multiply(e),s.set(i.values).invert()}screenToWorld(t,e,i){let s=t.x,n=i-t.y-1;return t.x=2*s/e-1,t.y=2*n/i-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,i){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=i*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}}class Ri{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.element=t,this.setupCallbacks(t)}setupCallbacks(t){let e=e=>{if(e instanceof MouseEvent){let i=t.getBoundingClientRect();this.mouseX=e.clientX-i.left,this.mouseY=e.clientY-i.top,this.listeners.map((t=>{this.buttonDown?t.dragged&&t.dragged(this.mouseX,this.mouseY):t.moved&&t.moved(this.mouseX,this.mouseY)}))}},i=s=>{if(s instanceof MouseEvent){let n=t.getBoundingClientRect();this.mouseX=s.clientX-n.left,this.mouseY=s.clientY-n.top,this.buttonDown=!1,this.listeners.map((t=>{t.up&&t.up(this.mouseX,this.mouseY)})),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}};t.addEventListener("mousedown",(s=>{if(s instanceof MouseEvent){let n=t.getBoundingClientRect();this.mouseX=s.clientX-n.left,this.mouseY=s.clientY-n.top,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.mouseX,this.mouseY)})),document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}),!0),t.addEventListener("mousemove",e,!0),t.addEventListener("mouseup",i,!0),t.addEventListener("wheel",(t=>{t.preventDefault();let e=t.deltaY;t.deltaMode==WheelEvent.DOM_DELTA_LINE&&(e*=8),t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e*=24),this.listeners.map((e=>{e.wheel&&e.wheel(t.deltaY)}))}),!0),t.addEventListener("touchstart",(e=>{if(!this.touch0||!this.touch1){let i=e.changedTouches.item(0),s=t.getBoundingClientRect(),n=i.clientX-s.left,r=i.clientY-s.top,a=new Yi(i.identifier,n,r);if(this.mouseX=n,this.mouseY=r,this.buttonDown=!0,this.touch0){if(!this.touch1){this.touch1=a;let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(t*t+e*e),this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,this.initialPinchDistance)}))}}else this.touch0=a,this.listeners.map((t=>{t.down&&t.down(a.x,a.y)}))}e.preventDefault()}),!1),t.addEventListener("touchmove",(e=>{if(this.touch0){var i=e.changedTouches;let r=t.getBoundingClientRect();for(var s=0;s<i.length;s++){var n=i[s];let t=n.clientX-r.left,e=n.clientY-r.top;this.touch0.identifier===n.identifier&&(this.touch0.x=this.mouseX=t,this.touch0.y=this.mouseY=e,this.listeners.map((i=>{i.dragged&&i.dragged(t,e)}))),this.touch1&&this.touch1.identifier===n.identifier&&(this.touch1.x=this.mouseX=t,this.touch1.y=this.mouseY=e)}if(this.touch0&&this.touch1){let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x,i=Math.sqrt(t*t+e*e);this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,i)}))}}e.preventDefault()}),!1);let s=e=>{if(this.touch0){var i=e.changedTouches;let r=t.getBoundingClientRect();for(var s=0;s<i.length;s++){var n=i[s];let t=n.clientX-r.left,e=n.clientY-r.top;if(this.touch0.identifier===n.identifier){if(this.touch0=null,this.mouseX=t,this.mouseY=e,this.listeners.map((i=>{i.up&&i.up(t,e)})),!this.touch1){this.buttonDown=!1;break}this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.touch0.x,this.touch0.y)}))}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}e.preventDefault()};t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",s)}addListener(t){this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}}class Yi{constructor(t,e,i){this.identifier=t,this.x=e,this.y=i}}class Bi{constructor(t,e){this.canvas=t,this.camera=e;let i=0,s=0,n=0,r=0,a=0,o=0,l=0;new Ri(t).addListener({down:(t,h)=>{i=e.position.x,s=e.position.y,n=a=t,r=o=h,l=e.zoom},dragged:(l,h)=>{let c=l-n,d=h-r,u=e.screenToWorld(new mi(0,0),t.clientWidth,t.clientHeight),m=e.screenToWorld(new mi(c,d),t.clientWidth,t.clientHeight).sub(u);e.position.set(i-m.x,s-m.y,0),e.update(),a=l,o=h},wheel:i=>{let s=i/200*e.zoom,n=e.zoom+s;if(n>0){let s=0,r=0;if(i<0)s=a,r=o;else{let e=new mi(t.clientWidth/2+15,t.clientHeight/2),i=a-e.x,n=t.clientHeight-1-o-e.y;s=e.x-i,r=t.clientHeight-1-e.y+n}let l=e.screenToWorld(new mi(s,r),t.clientWidth,t.clientHeight);e.zoom=n,e.update();let h=e.screenToWorld(new mi(s,r),t.clientWidth,t.clientHeight);e.position.add(l.sub(h)),e.update()}},zoom:(t,i)=>{let s=t/i;e.zoom=l*s},up:(t,e)=>{a=t,o=e},moved:(t,e)=>{a=t,o=e}})}}class Xi{constructor(t,e,i){this.vertexShader=e,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=i,this.context=t instanceof li?t:new li(t),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){let i=this.context.gl,s=i.createShader(t);if(i.shaderSource(s,e),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS)){let t="Couldn't compile shader: "+i.getShaderInfoLog(s);if(i.deleteShader(s),!i.isContextLost())throw new Error(t)}return s}compileProgram(t,e){let i=this.context.gl,s=i.createProgram();if(i.attachShader(s,t),i.attachShader(s,e),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS)){let t="Couldn't compile shader program: "+i.getProgramInfoLog(s);if(i.deleteProgram(s),!i.isContextLost())throw new Error(t)}return s}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,i){this.context.gl.uniform2f(this.getUniformLocation(t),e,i)}setUniform3f(t,e,i,s){this.context.gl.uniform3f(this.getUniformLocation(t),e,i,s)}setUniform4f(t,e,i,s,n){this.context.gl.uniform4f(this.getUniformLocation(t),e,i,s,n)}setUniform2x2f(t,e){let i=this.context.gl;this.tmp2x2.set(e),i.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let i=this.context.gl;this.tmp3x3.set(e),i.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let i=this.context.gl;this.tmp4x4.set(e),i.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl,i=e.getUniformLocation(this.program,t);if(!i&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return i}getAttributeLocation(t){let e=this.context.gl,i=e.getAttribLocation(this.program,t);if(-1==i&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return i}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e=`\n\t\t\t\tattribute vec4 ${Xi.POSITION};\n\t\t\t\tattribute vec4 ${Xi.COLOR};\n\t\t\t\tattribute vec2 ${Xi.TEXCOORDS};\n\t\t\t\tuniform mat4 ${Xi.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${Xi.COLOR};\n\t\t\t\t\tv_texCoords = ${Xi.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${Xi.MVP_MATRIX} * ${Xi.POSITION};\n\t\t\t\t}\n\t\t\t`;return new Xi(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")}static newTwoColoredTextured(t){let e=`\n\t\t\t\tattribute vec4 ${Xi.POSITION};\n\t\t\t\tattribute vec4 ${Xi.COLOR};\n\t\t\t\tattribute vec4 ${Xi.COLOR2};\n\t\t\t\tattribute vec2 ${Xi.TEXCOORDS};\n\t\t\t\tuniform mat4 ${Xi.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ${Xi.COLOR};\n\t\t\t\t\tv_dark = ${Xi.COLOR2};\n\t\t\t\t\tv_texCoords = ${Xi.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${Xi.MVP_MATRIX} * ${Xi.POSITION};\n\t\t\t\t}\n\t\t\t`;return new Xi(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")}static newColored(t){let e=`\n\t\t\t\tattribute vec4 ${Xi.POSITION};\n\t\t\t\tattribute vec4 ${Xi.COLOR};\n\t\t\t\tuniform mat4 ${Xi.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${Xi.COLOR};\n\t\t\t\t\tgl_Position = ${Xi.MVP_MATRIX} * ${Xi.POSITION};\n\t\t\t\t}\n\t\t\t`;return new Xi(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")}}Xi.MVP_MATRIX="u_projTrans",Xi.POSITION="a_position",Xi.COLOR="a_color",Xi.COLOR2="a_color2",Xi.TEXCOORDS="a_texCoords",Xi.SAMPLER="u_texture";class Pi{constructor(t,e,i,s){this.attributes=e,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t instanceof li?t:new li(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(s),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,i,s){let n=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?n.drawElements(e,s,n.UNSIGNED_SHORT,2*i):n.drawArrays(e,i,s),this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let s=0;s<this.attributes.length;s++){let n=this.attributes[s],r=t.getAttributeLocation(n.name);e.enableVertexAttribArray(r),e.vertexAttribPointer(r,n.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*i),i+=n.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let e=this.context.gl;for(let i=0;i<this.attributes.length;i++){let s=this.attributes[i],n=t.getAttributeLocation(s.name);e.disableVertexAttribArray(n)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}class Vi{constructor(t,e,i){this.name=t,this.type=e,this.numElements=i}}class Di extends Vi{constructor(){super(Xi.POSITION,zi.Float,2)}}class Oi extends Vi{constructor(){super(Xi.POSITION,zi.Float,3)}}class Ni extends Vi{constructor(t=0){super(Xi.TEXCOORDS+(0==t?"":t),zi.Float,2)}}class Ui extends Vi{constructor(){super(Xi.COLOR,zi.Float,4)}}class qi extends Vi{constructor(){super(Xi.COLOR2,zi.Float,4)}}var zi,Wi;!function(t){t[t.Float=0]="Float"}(zi||(zi={}));class _i{constructor(t,e=!0,i=10920){if(this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=t instanceof li?t:new li(t);let s=e?[new Di,new Ui,new Ni,new qi]:[new Di,new Ui,new Ni];this.mesh=new Pi(t,s,i,3*i);let n=this.context.gl;this.srcColorBlend=n.SRC_ALPHA,this.srcAlphaBlend=n.ONE,this.dstBlend=n.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,i){if((this.srcColorBlend!=t||this.srcAlphaBlend!=e||this.dstBlend!=i)&&(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing)){this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i)}}draw(t,e,i){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let s=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let n=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<i.length;t++,e++)n[t]=i[e]+s;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND)}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose()}}class ji{constructor(t,e=10920){if(this.isDrawing=!1,this.shapeType=Wi.Filled,this.color=new r(1,1,1,1),this.vertexIndex=0,this.tmp=new m,e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof li?t:new li(t),this.mesh=new Pi(t,[new Di,new Ui],e,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,i){if(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing){this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i)}}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,i,s){this.color.set(t,e,i,s)}point(t,e,i=null){this.check(Wi.Point,1),null===i&&(i=this.color),this.vertex(t,e,i)}line(t,e,i,s,n=null){this.check(Wi.Line,2);this.mesh.getVertices(),this.vertexIndex;null===n&&(n=this.color),this.vertex(t,e,n),this.vertex(i,s,n)}triangle(t,e,i,s,n,r,a,o=null,l=null,h=null){this.check(t?Wi.Filled:Wi.Line,3);this.mesh.getVertices(),this.vertexIndex;null===o&&(o=this.color),null===l&&(l=this.color),null===h&&(h=this.color),t?(this.vertex(e,i,o),this.vertex(s,n,l),this.vertex(r,a,h)):(this.vertex(e,i,o),this.vertex(s,n,l),this.vertex(s,n,o),this.vertex(r,a,l),this.vertex(r,a,o),this.vertex(e,i,l))}quad(t,e,i,s,n,r,a,o,l,h=null,c=null,d=null,u=null){this.check(t?Wi.Filled:Wi.Line,3);this.mesh.getVertices(),this.vertexIndex;null===h&&(h=this.color),null===c&&(c=this.color),null===d&&(d=this.color),null===u&&(u=this.color),t?(this.vertex(e,i,h),this.vertex(s,n,c),this.vertex(r,a,d),this.vertex(r,a,d),this.vertex(o,l,u),this.vertex(e,i,h)):(this.vertex(e,i,h),this.vertex(s,n,c),this.vertex(s,n,c),this.vertex(r,a,d),this.vertex(r,a,d),this.vertex(o,l,u),this.vertex(o,l,u),this.vertex(e,i,h))}rect(t,e,i,s,n,r=null){this.quad(t,e,i,e+s,i,e+s,i+n,e,i+n,r,r,r,r)}rectLine(t,e,i,s,n,r,a=null){this.check(t?Wi.Filled:Wi.Line,8),null===a&&(a=this.color);let o=this.tmp.set(n-i,e-s);o.normalize(),r*=.5;let l=o.x*r,h=o.y*r;t?(this.vertex(e+l,i+h,a),this.vertex(e-l,i-h,a),this.vertex(s+l,n+h,a),this.vertex(s-l,n-h,a),this.vertex(s+l,n+h,a),this.vertex(e-l,i-h,a)):(this.vertex(e+l,i+h,a),this.vertex(e-l,i-h,a),this.vertex(s+l,n+h,a),this.vertex(s-l,n-h,a),this.vertex(s+l,n+h,a),this.vertex(e+l,i+h,a),this.vertex(s-l,n-h,a),this.vertex(e-l,i-h,a))}x(t,e,i){this.line(t-i,e-i,t+i,e+i),this.line(t-i,e+i,t+i,e-i)}polygon(t,e,i,s=null){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Wi.Line,2*i),null===s&&(s=this.color);this.mesh.getVertices(),this.vertexIndex;i<<=1;let n=t[e<<=1],r=t[e+1],a=e+i;for(let o=e,l=e+i-2;o<l;o+=2){let e=t[o],i=t[o+1],l=0,h=0;o+2>=a?(l=n,h=r):(l=t[o+2],h=t[o+3]),this.vertex(e,i,s),this.vertex(l,h,s)}}circle(t,e,i,s,n=null,r=0){if(0===r&&(r=Math.max(1,6*a.cbrt(s)|0)),r<=0)throw new Error("segments must be > 0.");null===n&&(n=this.color);let o=2*a.PI/r,l=Math.cos(o),h=Math.sin(o),c=s,d=0;if(t){this.check(Wi.Filled,3*r+3),r--;for(let t=0;t<r;t++){this.vertex(e,i,n),this.vertex(e+c,i+d,n);let t=c;c=l*c-h*d,d=h*t+l*d,this.vertex(e+c,i+d,n)}this.vertex(e,i,n),this.vertex(e+c,i+d,n)}else{this.check(Wi.Line,2*r+2);for(let t=0;t<r;t++){this.vertex(e+c,i+d,n);let t=c;c=l*c-h*d,d=h*t+l*d,this.vertex(e+c,i+d,n)}this.vertex(e+c,i+d,n)}c=s,d=0,this.vertex(e+c,i+d,n)}curve(t,e,i,s,n,r,a,o,l,h=null){this.check(Wi.Line,2*l+2),null===h&&(h=this.color);let c=1/l,d=c*c,u=c*c*c,m=3*c,p=3*d,f=6*d,g=6*u,x=t-2*i+n,w=e-2*s+r,b=3*(i-n)-t+a,y=3*(s-r)-e+o,v=t,A=e,S=(i-t)*m+x*p+b*u,C=(s-e)*m+w*p+y*u,k=x*f+b*g,E=w*f+y*g,T=b*g,I=y*g;for(;l-- >0;)this.vertex(v,A,h),v+=S,A+=C,S+=k,C+=E,k+=T,E+=I,this.vertex(v,A,h);this.vertex(v,A,h),this.vertex(a,o,h)}vertex(t,e,i){let s=this.vertexIndex,n=this.mesh.getVertices();n[s++]=t,n[s++]=e,n[s++]=i.r,n[s++]=i.g,n[s++]=i.b,n[s++]=i.a,this.vertexIndex=s}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}}!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(Wi||(Wi={}));class Hi{constructor(t){this.boneLineColor=new r(1,0,0,1),this.boneOriginColor=new r(0,1,0,1),this.attachmentLineColor=new r(0,0,1,.5),this.triangleLineColor=new r(1,.64,0,.5),this.pathColor=(new r).setFromString("FF7F00"),this.clipColor=new r(.8,0,0,2),this.aabbColor=new r(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new Je,this.temp=new Array,this.vertices=c.newFloatArray(2048),this.context=t instanceof li?t:new li(t)}draw(t,e,i=null){let s=e.x,n=e.y,r=this.context.gl,a=this.premultipliedAlpha?r.ONE:r.SRC_ALPHA;t.setBlendMode(a,r.ONE,r.ONE_MINUS_SRC_ALPHA);let o=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,s=o.length;e<s;e++){let s=o[e];if(i&&i.indexOf(s.data.name)>-1)continue;if(!s.parent)continue;let n=s.data.length*s.a+s.worldX,r=s.data.length*s.c+s.worldY;t.rectLine(!0,s.worldX,s.worldY,n,r,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(s,n,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let i=e.slots;for(let e=0,s=i.length;e<s;e++){let s=i[e],n=s.getAttachment();if(n instanceof $t){let e=n,i=this.vertices;e.computeWorldVertices(s,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=e.slots;for(let e=0,s=i.length;e<s;e++){let s=i[e];if(!s.bone.active)continue;let n=s.getAttachment();if(!(n instanceof Jt))continue;let r=n,a=this.vertices;r.computeWorldVertices(s,0,r.worldVerticesLength,a,0,2);let o=r.triangles,l=r.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,i=o.length;e<i;e+=3){let i=2*o[e],s=2*o[e+1],n=2*o[e+2];t.triangle(!1,a[i],a[i+1],a[s],a[s+1],a[n],a[n+1])}}if(this.drawMeshHull&&l>0){t.setColor(this.attachmentLineColor),l=2*(l>>1);let e=a[l-2],i=a[l-1];for(let s=0,n=l;s<n;s+=2){let n=a[s],r=a[s+1];t.line(n,r,e,i),e=n,i=r}}}}if(this.drawBoundingBoxes){let i=this.bounds;i.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,i.minX,i.minY,i.getWidth(),i.getHeight());let s=i.polygons,n=i.boundingBoxes;for(let e=0,i=s.length;e<i;e++){let i=s[e];t.setColor(n[e].color),t.polygon(i,0,i.length)}}if(this.drawPaths){let i=e.slots;for(let e=0,s=i.length;e<s;e++){let s=i[e];if(!s.bone.active)continue;let n=s.getAttachment();if(!(n instanceof Kt))continue;let r=n,a=r.worldVerticesLength,o=this.temp=c.setArraySize(this.temp,a,0);r.computeWorldVertices(s,0,a,o,0,2);let l=this.pathColor,h=o[2],d=o[3],u=0,m=0;if(r.closed){t.setColor(l);let e=o[0],i=o[1],s=o[a-2],n=o[a-1];u=o[a-4],m=o[a-3],t.curve(h,d,e,i,s,n,u,m,32),t.setColor(Hi.LIGHT_GRAY),t.line(h,d,e,i),t.line(u,m,s,n)}a-=4;for(let e=4;e<a;e+=6){let i=o[e],s=o[e+1],n=o[e+2],r=o[e+3];u=o[e+4],m=o[e+5],t.setColor(l),t.curve(h,d,i,s,n,r,u,m,32),t.setColor(Hi.LIGHT_GRAY),t.line(h,d,i,s),t.line(u,m,n,r),h=u,d=m}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,s=o.length;e<s;e++){let s=o[e];i&&i.indexOf(s.data.name)>-1||t.circle(!0,s.worldX,s.worldY,3*this.scale,Hi.GREEN,8)}}if(this.drawClipping){let i=e.slots;t.setColor(this.clipColor);for(let e=0,s=i.length;e<s;e++){let s=i[e];if(!s.bone.active)continue;let n=s.getAttachment();if(!(n instanceof Bt))continue;let r=n,a=r.worldVerticesLength,o=this.temp=c.setArraySize(this.temp,a,0);r.computeWorldVertices(s,0,a,o,0,2);for(let e=0,i=o.length;e<i;e+=2){let i=o[e],s=o[e+1],n=o[(e+2)%o.length],r=o[(e+3)%o.length];t.line(i,s,n,r)}}}}dispose(){}}Hi.LIGHT_GRAY=new r(192/255,192/255,192/255,1),Hi.GREEN=new r(0,1,0,1);class Gi{constructor(t,e,i){this.vertices=t,this.numVertices=e,this.numFloats=i}}class Zi{constructor(t,e=!0){this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new r,this.tempColor2=new r,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new Gi(null,0,0),this.clipper=new Qe,this.temp=new m,this.temp2=new m,this.temp3=new r,this.temp4=new r,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=c.newFloatArray(1024*this.vertexSize)}draw(t,e,i=-1,s=-1){let n=this.clipper,r=this.premultipliedAlpha,a=this.twoColorTint,o=null,l=this.temp,h=this.temp2,d=this.temp3,u=this.temp4,m=this.renderable,p=null,f=null,g=e.drawOrder,x=null,w=e.color,b=a?12:8,y=!1;-1==i&&(y=!0);for(let e=0,v=g.length;e<v;e++){let v=n.isClipping()?2:b,A=g[e];if(!A.bone.active){n.clipEndWithSlot(A);continue}if(i>=0&&i==A.data.index&&(y=!0),!y){n.clipEndWithSlot(A);continue}s>=0&&s==A.data.index&&(y=!1);let S=A.getAttachment(),C=null;if(S instanceof $t){let t=S;m.vertices=this.vertices,m.numVertices=4,m.numFloats=v<<2,t.computeWorldVertices(A,m.vertices,0,v),f=Zi.QUAD_TRIANGLES,p=t.uvs,C=t.region.renderObject.page.texture,x=t.color}else{if(!(S instanceof Jt)){if(S instanceof Bt){let t=S;n.clipStart(A,t);continue}n.clipEndWithSlot(A);continue}{let t=S;m.vertices=this.vertices,m.numVertices=t.worldVerticesLength>>1,m.numFloats=m.numVertices*v,m.numFloats>m.vertices.length&&(m.vertices=this.vertices=c.newFloatArray(m.numFloats)),t.computeWorldVertices(A,0,t.worldVerticesLength,m.vertices,0,v),f=t.triangles,C=t.region.renderObject.page.texture,p=t.uvs,x=t.color}}if(C){let e=A.color,i=this.tempColor;i.r=w.r*e.r*x.r,i.g=w.g*e.g*x.g,i.b=w.b*e.b*x.b,i.a=w.a*e.a*x.a,r&&(i.r*=i.a,i.g*=i.a,i.b*=i.a);let s=this.tempColor2;A.darkColor?(r?(s.r=A.darkColor.r*i.a,s.g=A.darkColor.g*i.a,s.b=A.darkColor.b*i.a):s.setFromColor(A.darkColor),s.a=r?1:0):s.set(0,0,0,1);let c=A.data.blendMode;if(c!=o&&(o=c,t.setBlendMode(ci.getSourceColorGLBlendMode(o,r),ci.getSourceAlphaGLBlendMode(o),ci.getDestGLBlendMode(o))),n.isClipping()){n.clipTriangles(m.vertices,m.numFloats,f,f.length,p,i,s,a);let e=new Float32Array(n.clippedVertices),r=n.clippedTriangles;if(this.vertexEffect){let t=this.vertexEffect,i=e;if(a)for(let s=0,n=e.length;s<n;s+=b)l.x=i[s],l.y=i[s+1],d.set(i[s+2],i[s+3],i[s+4],i[s+5]),h.x=i[s+6],h.y=i[s+7],u.set(i[s+8],i[s+9],i[s+10],i[s+11]),t.transform(l,h,d,u),i[s]=l.x,i[s+1]=l.y,i[s+2]=d.r,i[s+3]=d.g,i[s+4]=d.b,i[s+5]=d.a,i[s+6]=h.x,i[s+7]=h.y,i[s+8]=u.r,i[s+9]=u.g,i[s+10]=u.b,i[s+11]=u.a;else for(let s=0,n=e.length;s<n;s+=b)l.x=i[s],l.y=i[s+1],d.set(i[s+2],i[s+3],i[s+4],i[s+5]),h.x=i[s+6],h.y=i[s+7],u.set(0,0,0,0),t.transform(l,h,d,u),i[s]=l.x,i[s+1]=l.y,i[s+2]=d.r,i[s+3]=d.g,i[s+4]=d.b,i[s+5]=d.a,i[s+6]=h.x,i[s+7]=h.y}t.draw(C,e,r)}else{let e=m.vertices;if(this.vertexEffect){let t=this.vertexEffect;if(a)for(let n=0,r=0,a=m.numFloats;n<a;n+=b,r+=2)l.x=e[n],l.y=e[n+1],h.x=p[r],h.y=p[r+1],d.setFromColor(i),u.setFromColor(s),t.transform(l,h,d,u),e[n]=l.x,e[n+1]=l.y,e[n+2]=d.r,e[n+3]=d.g,e[n+4]=d.b,e[n+5]=d.a,e[n+6]=h.x,e[n+7]=h.y,e[n+8]=u.r,e[n+9]=u.g,e[n+10]=u.b,e[n+11]=u.a;else for(let s=0,n=0,r=m.numFloats;s<r;s+=b,n+=2)l.x=e[s],l.y=e[s+1],h.x=p[n],h.y=p[n+1],d.setFromColor(i),u.set(0,0,0,0),t.transform(l,h,d,u),e[s]=l.x,e[s+1]=l.y,e[s+2]=d.r,e[s+3]=d.g,e[s+4]=d.b,e[s+5]=d.a,e[s+6]=h.x,e[s+7]=h.y}else if(a)for(let t=2,n=0,r=m.numFloats;t<r;t+=b,n+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=p[n],e[t+5]=p[n+1],e[t+6]=s.r,e[t+7]=s.g,e[t+8]=s.b,e[t+9]=s.a;else for(let t=2,s=0,n=m.numFloats;t<n;t+=b,s+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=p[s],e[t+5]=p[s+1];let n=m.vertices.subarray(0,m.numFloats);t.draw(C,n,f)}}n.clipEndWithSlot(A)}n.clipEnd()}}Zi.QUAD_TRIANGLES=[0,1,2,2,3,0];const Ji=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],Ki=[0,1,2,2,3,0],Qi=new r(1,1,1,1);class $i{constructor(t,e,i=!0){this.twoColorTint=!1,this.canvas=t,this.context=e instanceof li?e:new li(e),this.twoColorTint=i,this.camera=new Li(t.width,t.height),this.batcherShader=i?Xi.newTwoColoredTextured(this.context):Xi.newColoredTextured(this.context),this.batcher=new _i(this.context,i),this.shapesShader=Xi.newColored(this.context),this.shapes=new ji(this.context),this.skeletonRenderer=new Zi(this.context,i),this.skeletonDebugRenderer=new Hi(this.context)}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,i=-1,s=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,i,s)}drawSkeletonDebug(t,e=!1,i=null){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,i)}drawTexture(t,e,i,s,n,r=null){this.enableRenderer(this.batcher),null===r&&(r=Qi);var a=0;Ji[a++]=e,Ji[a++]=i,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=0,Ji[a++]=1,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a++]=0),Ji[a++]=e+s,Ji[a++]=i,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=1,Ji[a++]=1,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a++]=0),Ji[a++]=e+s,Ji[a++]=i+n,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=1,Ji[a++]=0,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a++]=0),Ji[a++]=e,Ji[a++]=i+n,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=0,Ji[a++]=0,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a]=0),this.batcher.draw(t,Ji,Ki)}drawTextureUV(t,e,i,s,n,r,a,o,l,h=null){this.enableRenderer(this.batcher),null===h&&(h=Qi);var c=0;Ji[c++]=e,Ji[c++]=i,Ji[c++]=h.r,Ji[c++]=h.g,Ji[c++]=h.b,Ji[c++]=h.a,Ji[c++]=r,Ji[c++]=a,this.twoColorTint&&(Ji[c++]=0,Ji[c++]=0,Ji[c++]=0,Ji[c++]=0),Ji[c++]=e+s,Ji[c++]=i,Ji[c++]=h.r,Ji[c++]=h.g,Ji[c++]=h.b,Ji[c++]=h.a,Ji[c++]=o,Ji[c++]=a,this.twoColorTint&&(Ji[c++]=0,Ji[c++]=0,Ji[c++]=0,Ji[c++]=0),Ji[c++]=e+s,Ji[c++]=i+n,Ji[c++]=h.r,Ji[c++]=h.g,Ji[c++]=h.b,Ji[c++]=h.a,Ji[c++]=o,Ji[c++]=l,this.twoColorTint&&(Ji[c++]=0,Ji[c++]=0,Ji[c++]=0,Ji[c++]=0),Ji[c++]=e,Ji[c++]=i+n,Ji[c++]=h.r,Ji[c++]=h.g,Ji[c++]=h.b,Ji[c++]=h.a,Ji[c++]=r,Ji[c++]=l,this.twoColorTint&&(Ji[c++]=0,Ji[c++]=0,Ji[c++]=0,Ji[c]=0),this.batcher.draw(t,Ji,Ki)}drawTextureRotated(t,e,i,s,n,r,o,l,h=null){this.enableRenderer(this.batcher),null===h&&(h=Qi);let c=e+r,d=i+o,u=-r,m=-o,p=s-r,f=n-o,g=u,x=m,w=u,b=f,y=p,v=f,A=p,S=m,C=0,k=0,E=0,T=0,I=0,M=0,F=0,L=0;if(0!=l){let t=a.cosDeg(l),e=a.sinDeg(l);C=t*g-e*x,k=e*g+t*x,F=t*w-e*b,L=e*w+t*b,I=t*y-e*v,M=e*y+t*v,E=I+(C-F),T=M+(k-L)}else C=g,k=x,F=w,L=b,I=y,M=v,E=A,T=S;C+=c,k+=d,E+=c,T+=d,I+=c,M+=d,F+=c,L+=d;var R=0;Ji[R++]=C,Ji[R++]=k,Ji[R++]=h.r,Ji[R++]=h.g,Ji[R++]=h.b,Ji[R++]=h.a,Ji[R++]=0,Ji[R++]=1,this.twoColorTint&&(Ji[R++]=0,Ji[R++]=0,Ji[R++]=0,Ji[R++]=0),Ji[R++]=E,Ji[R++]=T,Ji[R++]=h.r,Ji[R++]=h.g,Ji[R++]=h.b,Ji[R++]=h.a,Ji[R++]=1,Ji[R++]=1,this.twoColorTint&&(Ji[R++]=0,Ji[R++]=0,Ji[R++]=0,Ji[R++]=0),Ji[R++]=I,Ji[R++]=M,Ji[R++]=h.r,Ji[R++]=h.g,Ji[R++]=h.b,Ji[R++]=h.a,Ji[R++]=1,Ji[R++]=0,this.twoColorTint&&(Ji[R++]=0,Ji[R++]=0,Ji[R++]=0,Ji[R++]=0),Ji[R++]=F,Ji[R++]=L,Ji[R++]=h.r,Ji[R++]=h.g,Ji[R++]=h.b,Ji[R++]=h.a,Ji[R++]=0,Ji[R++]=0,this.twoColorTint&&(Ji[R++]=0,Ji[R++]=0,Ji[R++]=0,Ji[R]=0),this.batcher.draw(t,Ji,Ki)}drawRegion(t,e,i,s,n,r=null){this.enableRenderer(this.batcher),null===r&&(r=Qi);var a=0;Ji[a++]=e,Ji[a++]=i,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=t.u,Ji[a++]=t.v2,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a++]=0),Ji[a++]=e+s,Ji[a++]=i,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=t.u2,Ji[a++]=t.v2,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a++]=0),Ji[a++]=e+s,Ji[a++]=i+n,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=t.u2,Ji[a++]=t.v,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a++]=0),Ji[a++]=e,Ji[a++]=i+n,Ji[a++]=r.r,Ji[a++]=r.g,Ji[a++]=r.b,Ji[a++]=r.a,Ji[a++]=t.u,Ji[a++]=t.v,this.twoColorTint&&(Ji[a++]=0,Ji[a++]=0,Ji[a++]=0,Ji[a]=0),this.batcher.draw(t.page.texture,Ji,Ki)}line(t,e,i,s,n=null,r=null){this.enableRenderer(this.shapes),this.shapes.line(t,e,i,s,n)}triangle(t,e,i,s,n,r,a,o=null,l=null,h=null){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,i,s,n,r,a,o,l,h)}quad(t,e,i,s,n,r,a,o,l,h=null,c=null,d=null,u=null){this.enableRenderer(this.shapes),this.shapes.quad(t,e,i,s,n,r,a,o,l,h,c,d,u)}rect(t,e,i,s,n,r=null){this.enableRenderer(this.shapes),this.shapes.rect(t,e,i,s,n,r)}rectLine(t,e,i,s,n,r,a=null){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,i,s,n,r,a)}polygon(t,e,i,s=null){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,i,s)}circle(t,e,i,s,n=null,r=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,i,s,n,r)}curve(t,e,i,s,n,r,a,o,l,h=null){this.enableRenderer(this.shapes),this.shapes.curve(t,e,i,s,n,r,a,o,l,h)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let e=this.canvas;var i=window.devicePixelRatio||1,s=Math.round(e.clientWidth*i),n=Math.round(e.clientHeight*i);if(e.width==s&&e.height==n||(e.width=s,e.height=n),this.context.gl.viewport(0,0,e.width,e.height),t===ts.Expand)this.camera.setViewport(s,n);else if(t===ts.Fit){let t=e.width,i=e.height,s=this.camera.viewportWidth,n=this.camera.viewportHeight,r=n/s<i/t?s/t:n/i;this.camera.setViewport(t*r,i*r)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof _i?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Xi.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof ji?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Xi.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}}var ts;let es,is;!function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(ts||(ts={}));let ss=0;const ns=163;class rs{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new p,this.backgroundColor=new r(.135,.135,.135,1),this.tempColor=new r,this.renderer=t,this.timeKeeper.maxDelta=9,!is){let t=navigator.userAgent.indexOf("Safari")>-1,e=()=>ss++;is=new Image,is.src=os,t||(is.crossOrigin="anonymous"),is.onload=e,es=new Image,es.src=as,t||(es.crossOrigin="anonymous"),es.onload=e}}draw(t=!1){if(ss<2||t&&this.fadeOut>1)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));let i=this.tempColor,s=this.renderer,n=s.canvas,r=s.context.gl;if(s.resize(ts.Expand),s.camera.position.set(n.width/2,n.height/2,0),s.batcher.setBlendMode(r.ONE,r.ONE,r.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;i.setFromColor(this.backgroundColor),e=1-this.fadeOut/1,e=1-(e-1)*(e-1),i.a*=e,i.a>0&&(s.camera.zoom=1,s.begin(),s.quad(!0,0,0,n.width,0,n.width,n.height,0,n.height,i,i,i,i),s.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(r.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),r.clear(r.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),i.set(e,e,e,e),this.logo||(this.logo=new di(s.context,is),this.spinner=new di(s.context,es)),s.camera.zoom=Math.max(1,ns/n.height),s.begin(),s.drawTexture(this.logo,(n.width-165)/2,(n.height-108)/2,165,108,i),s.drawTextureRotated(this.spinner,(n.width-ns)/2,(n.height-ns)/2,ns,ns,81.5,81.5,this.angle,i),s.end()}}let as="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAALKElEQVR42u2de2iW5R/GPzuqcwfnnKfNmafl5tTNHWzqNi3DEMQykcAoJSsySkspjSIk0iD/07Kf4R+FnVBDUTshZGpWUEJaaiWFgZlUFmXmIe3HNXthyebeZ77P9H13ffBG8Y8H7ut7vff93N/7fu4vGGPiFZiez/Qtw9lytJajfzfw9z/j+efPOv7cV8W+lUNY2a8T/ayTCRsWFLJA5rtUO1LLkV5p9LJeJizQiHeqnlOtmVFtdTGrrZkJCxYXsTgaI6r9MY4/UpNItW4mFDaXsTlaM6qVZlBq3UwofFrJp0HMWJ9DvXUzobCznJ1BzFjWlTLrZkJh/TDWBzFjTgo51s2EgnKI0Rrx+FiOWzNzVaym91Syx5qZsGBWb2ZFa0ZN6dbMhAWTcpkUrRmXD2K5NTNhgVbH0Zpxbl/mWjMTFvRIo0e0ZpzcncnWzISKtvmiMWNRJ4qslwmVXRXsas2Ix8ZwzFqZsGFREYtaM+Oaa1ljrUzYkJ9G/ok6TlzKjJWZVFor0y7c1Zu7WjLiqiGsskamXdHopyT4vALmzS9k/t19uHtKHlOSIMn6xAtARjIZ1sFcUSZ0Y4La+G6M18hS2IlCn4a+WoC0JNL0d/dUupdnUj40g6EJ2VEdMnhrOG/p5f/jUXz8SgmvaGU6KpNRNsLVQV0OdXf24s63h/P2gWoOrBjMCr2GJFQnnxnIM3q5P1PPmaYv+4ev4/C6UtbpV2gzXCkgL5W8Bwt48OIc6ul6Tp+s4+SyASxLiI4+PYCn1bHzDZxvaQW6vZzto7MYnQIpNkf7kp5EuozYUroqEjcNKHHd0Tl9mBPN1pk+hFeieGBnBtog7UXjsj9pWg+m6duecw2cay1OC/uxMC47KmP9OIYfoz1YoC20J/rzRG4quTZK2EAyJGs20qwUbYw0aNRmUxtvfUW/uEtNzc1NB1/X8LVyd15hh82F43AvD+VlXcsSJEZa1CQ3ejleAO7oxR3RDP0XN91X4+NXYb8nkv7UNTwV7e0YTdu7I3g33t7tuaEbNwSZpps2fSyvs4M2Tjhot+jb0Xzbltj8r5j/xVt/6Z1Ob93U1ZYO691EhhzchcHeXosVjcNZysyezLw4xRZt05R+fTeuj8vOj+zKyG0j2aZcVVs6v+QalnjrMFZASQYl2nBoSyz06e3j/Xk8rgWYmMvEICu2pm1HOTuc7okV8FgRj0XukwzanhvCc/F+72TjoQjdObN1OFuDLmh0xP+WHtxiI10ukJlCprb4guiv1fP+avZrS1C7NAkliHZjDtZwMMgqbukAltpMlwuMy2FcEBPqvfLLar5Uqi0hBdEwryy+Mv5n6zkbjTBa+dlMlwvUZFETZKGiFM7tvbhdJ3gSVRO0wzIjnxmvl/J6a6JsGMYGrahtpssFeqbR841S3mhN80OjOaSDEdqd6SjaMKgzgzRK7q1ib3PT9sYyNo7JZoyNFNvRcVMZmy7WOvIuryv/Zvdmdt90+nY0bRp3AvROohFwdwW7dTG7RFlbwlqdrbOBYg005NAQmZU0HWt1rXMBH1Xw0dQ8pmqzoaPmdhun7bHZjNVe9qP9eFQfO1VkUmHjhAVUZ1GtnKFSbjrkrPfy4i4UW5t/6ZxM54J0CqxFe81KpGsQyE4h23oYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjLna+bdOy+IiFquIpGq16Pb79cNYv3IIK/X/ugx+Ui6TVKvYVU9Nc8gX8od8Ir/IN/KPfCQ/yVfyl/6/pfJvLChkQdD6wyqntquCXYuKWJSfRr6D0dEAxV3xlw/khyD+kd/ku/88cHo+09tS3LBpO1HHCVUqcIA6CqB4K+6X6x35L/JM2loXurlWmUmlA5XogOIcK8/If5HncrSWo7F6cKIWPjT/RXGOlWfkv8hzaWsN4uaaysE6WIkOKM6x8oz8F3kusXqo2vxC5jtYiQ4ozrH0TeS5qIZcrB7qkrwdA8U5Vp6R/yLPZV8V+2L14Cl5THGwEh1QnGPlGfkv8lyUlIzFQ1cNYVVHrcjZ0VCcFe9Y+Eb+izy3ceclUl43aFN52DXXssYpnY6a4qFS8ZcP2uIf+e7inRh6pdFrdTGrm8uiHx/L8T2V7NGWzvJBLJ/bl7mTuzO5qBNFDoiJID/IF/KHfCK/yDfyT3O7d/KbfNfS80hNIrU0g9L6HOq1x5iTQo6FNpeLfCQ/yVfyl3xmXYwxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHNk9z4JwJ0SqKTdQkbyEwhU393T6V7zzR6pieR3tE1ITeVXImhe6BXDGZFdRbVeank2TBhcaEMr0rwbixj49IBLL2/L/ffmMuNHfqO9tFZjJYBd1ewO3Lx+IcVfKhqna5nHZYR6XFPH+5R3eeI5t9fx/fvjeC9Jdew5OKZKqFR/RDVKL6vL/f9PJafmyvHsL+a/ff24V6NmjZQbGchVbY6UM2BluqHv1rCqzVZ1KQlkZboepCdQvacPsz5bjTfXao+yMEaDt7Wk9tSIMVGig3TejCtJSM2bSpkPjWPqd1S6Zao+lORSYWmgkOjORRNwZqd5ezMSiHLRooNr5XwWjS6/1XHX9vL2T67N7M1iyXa9JCrYjVrS1gbpJyw6hBfsmiNCYT0P9/A+Wj1/6qGr5YNYFlJBiWJogEzezLz/ZG8/9s4fgtSyuvNYbyp1IONFBtu7sHNv4/j9yAxUHWrdaWsG9+N8XHd+YxkMpSy+aySz841cC5oXbmHCnnI74yxAgZ3YbDeB4PEQCOpBpFNZWwa2ZWRcdnxLsl00crtRB0n2lLg8JNRfDKoM4NsolgBSmw/UMADba1+qpmqfyf6x1u/0a/og3I+aEunP6/i86osqmygcGarF4p54dex/Bo0LqfqOfVwIQ/HW5/RSkwV1oN2WLlHTc82TljAwM4M1O5LWwYKZTjibYXNS0N5KcjKTe10PadfLObFuJwK4ozp+UzXDBTUjL+M5ZcBnRkQV53dMIwNQTu6bSTbVEzbi5awuVByd2E/FgaN0Tc1fKOzBHHV2aAdVSdv6s5NNkp7cSH/++xAng2yyHx+CM/H21YhfdPp+0U1X0TbSZnXx8faG9Aop0MS0cToh1p+iLcpOkLj9t/JOk5eqoPHxnDsyf486an5yqCDK7XZ1O4oZ4dWyy3FSXHUAYq47uyYbMZoGmhpG3DlEFb6uNiVBhpyaHhnBO8oJmfqOROJjzIiP43hJ8UxITqqX56S2Hur2KsOnq3nrE6PPNKPRwrSKbAZrjTQNZmuE7oxYXMZmxWbw9dxWFu4W4ezVedOE6qzI7oyYkY+M7TPeWsPbk2UX1qioSN+E3OZqOR2cReKE+qQRFN0Pi7y73g/UawU1KzezJpXwLz5hczX1ueUPKYkNb6GJQZ+j7/aAfRZREsv+quGsMoamXZBW2Gt5eU0alorEzYsKmJRa/m4NdeyxlqZsCGa84DKnVorEzboC7podis69DfIJmwufHMc7famvvmxZiYsKOtKWbRm1OcW1syEBboSJFozLh/EcmtmwgIluaM14/phrLdmJixYXMTiaM24p5I91syEBTphFOR7Y2tmwgJNvUFOr+tov3UzoaAv44KYUatv62ZCoemdhtG0+hzqrZsJBR08DWLG0gxKrZu50qvpxos3U5NItW4mFPp1ot+lPlpq2lYXs9qamVBZUMiC1ox4pJYjvlfStAu6GmTLcLboMtPIV4/6im5fFfuUi9QIap2MiWP+D96R1vPmsD/fAAAAAElFTkSuQmCC",os="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=";class ls{constructor(t,e){this.time=new p,void 0===e.pathPrefix&&(e.pathPrefix=""),void 0===e.app&&(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),void 0===e.webglConfig&&(e.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new li(t,e.webglConfig),this.renderer=new $i(t,this.context),this.gl=this.context.gl,this.assetManager=new ui(this.context,e.pathPrefix),this.input=new Ri(t),e.app.loadAssets(this);let i=()=>{requestAnimationFrame(i),this.time.update(),e.app.update(this,this.time.delta),e.app.render(this)},s=()=>{this.assetManager.isLoadingComplete()?this.assetManager.hasErrors()?e.app.error(this,this.assetManager.getErrors()):(e.app.initialize(this),i()):requestAnimationFrame(s)};requestAnimationFrame(s)}clear(t,e,i,s){this.gl.clearColor(t,e,i,s),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}}class hs{constructor(t,e){if(this.config=e,this.bg=new r,this.bgFullscreen=new r,this.playTime=0,this.cancelId=0,this.paused=!0,this.speed=1,this.time=new p,this.stopRequestAnimationFrame=!1,this.viewport={},this.viewportTransitionStart=0,this.parent="string"==typeof t?document.getElementById(t):t,!this.parent)throw new Error("SpinePlayer parent not found: "+t);void 0===e.showControls&&(e.showControls=!0);let i=e.showControls?'\n<div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">\n<div class="spine-player-timeline"></div>\n<div class="spine-player-buttons">\n<button class="spine-player-button spine-player-button-icon-pause"></button>\n<div class="spine-player-button-spacer"></div>\n<button class="spine-player-button spine-player-button-icon-speed"></button>\n<button class="spine-player-button spine-player-button-icon-animations"></button>\n<button class="spine-player-button spine-player-button-icon-skins"></button>\n<button class="spine-player-button spine-player-button-icon-settings"></button>\n<button class="spine-player-button spine-player-button-icon-fullscreen"></button>\n<img class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cpath%20d%3D%22M104%2012.68a1.31%201.31%200%200%201-.37%201%201.28%201.28%200%200%201-.85.31H91.57a10.51%2010.51%200%200%200%20.29%202.55%204.92%204.92%200%200%200%201%202%204.27%204.27%200%200%200%201.64%201.26%206.89%206.89%200%200%200%202.6.44%2010.66%2010.66%200%200%200%202.17-.2%2012.81%2012.81%200%200%200%201.64-.44q.69-.25%201.14-.44a1.87%201.87%200%200%201%20.68-.2.44.44%200%200%201%20.27.04.43.43%200%200%201%20.16.2%201.38%201.38%200%200%201%20.09.37%204.89%204.89%200%200%201%200%20.58%204.14%204.14%200%200%201%200%20.43v.32a.83.83%200%200%201-.09.26%201.1%201.1%200%200%201-.17.22%202.77%202.77%200%200%201-.61.34%208.94%208.94%200%200%201-1.32.46%2018.54%2018.54%200%200%201-1.88.41%2013.78%2013.78%200%200%201-2.28.18%2010.55%2010.55%200%200%201-3.68-.59%206.82%206.82%200%200%201-2.66-1.74%207.44%207.44%200%200%201-1.63-2.89%2013.48%2013.48%200%200%201-.55-4%2012.76%2012.76%200%200%201%20.57-3.94%208.35%208.35%200%200%201%201.64-3%207.15%207.15%200%200%201%202.58-1.87%208.47%208.47%200%200%201%203.39-.65%208.19%208.19%200%200%201%203.41.64%206.46%206.46%200%200%201%202.32%201.73%207%207%200%200%201%201.3%202.54%2011.17%2011.17%200%200%201%20.43%203.13zm-3.14-.93a5.69%205.69%200%200%200-1.09-3.86%204.17%204.17%200%200%200-3.42-1.4%204.52%204.52%200%200%200-2%20.44%204.41%204.41%200%200%200-1.47%201.15A5.29%205.29%200%200%200%2092%209.75a7%207%200%200%200-.36%202zM80.68%2021.94a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.31%206.31%200%200%201-.76%200%206.5%206.5%200%200%201-.78%200%201.74%201.74%200%200%201-.47-.11.59.59%200%200%201-.25-.18.42.42%200%200%201-.08-.26V12a9.8%209.8%200%200%200-.23-2.35%204.86%204.86%200%200%200-.66-1.53%202.88%202.88%200%200%200-1.13-1%203.57%203.57%200%200%200-1.6-.34%204%204%200%200%200-2.35.83A12.71%2012.71%200%200%200%2069.11%2010v11.9a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.51%206.51%200%200%201-.78%200%206.31%206.31%200%200%201-.76%200%201.88%201.88%200%200%201-.48-.11.52.52%200%200%201-.25-.18.46.46%200%200%201-.07-.26v-17a.53.53%200%200%201%20.03-.21.5.5%200%200%201%20.23-.19%201.28%201.28%200%200%201%20.44-.11%208.53%208.53%200%200%201%201.39%200%201.12%201.12%200%200%201%20.43.11.6.6%200%200%201%20.22.19.47.47%200%200%201%20.07.26V7.2a10.46%2010.46%200%200%201%202.87-2.36%206.17%206.17%200%200%201%202.88-.75%206.41%206.41%200%200%201%202.87.58%205.16%205.16%200%200%201%201.88%201.54%206.15%206.15%200%200%201%201%202.26%2013.46%2013.46%200%200%201%20.31%203.11z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M43.35%202.86c.09%202.6%201.89%204%205.48%204.61%203%20.48%205.79.24%206.69-2.37%201.75-5.09-2.4-3.82-6-4.39s-6.31-2.03-6.17%202.15zm1.08%2010.69c.33%201.94%202.14%203.06%204.91%203s4.84-1.16%205.13-3.25c.53-3.88-2.53-2.38-5.3-2.3s-5.4-1.26-4.74%202.55zM48%2022.44c.55%201.45%202.06%202.06%204.1%201.63s3.45-1.11%203.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2019.6%2048%2022.44zm1.78%206.78c.16%201.22%201.22%202%202.88%201.93s2.92-.67%203.13-2c.4-2.43-1.46-1.53-3.12-1.51s-3.17-.82-2.89%201.58z%22%20fill%3D%22%23ff4000%22%2F%3E%3Cpath%20d%3D%22M35.28%2013.16a15.33%2015.33%200%200%201-.48%204%208.75%208.75%200%200%201-1.42%203%206.35%206.35%200%200%201-2.32%201.91%207.14%207.14%200%200%201-3.16.67%206.1%206.1%200%200%201-1.4-.15%205.34%205.34%200%200%201-1.26-.47%207.29%207.29%200%200%201-1.24-.81q-.61-.49-1.29-1.15v8.51a.47.47%200%200%201-.08.26.56.56%200%200%201-.25.19%201.74%201.74%200%200%201-.47.11%206.47%206.47%200%200%201-.78%200%206.26%206.26%200%200%201-.76%200%201.89%201.89%200%200%201-.48-.11.49.49%200%200%201-.25-.19.51.51%200%200%201-.07-.26V4.91a.57.57%200%200%201%20.06-.27.46.46%200%200%201%20.23-.18%201.47%201.47%200%200%201%20.44-.1%207.41%207.41%200%200%201%201.3%200%201.45%201.45%200%200%201%20.43.1.52.52%200%200%201%20.24.18.51.51%200%200%201%20.07.27V7.2a18.06%2018.06%200%200%201%201.49-1.38%209%209%200%200%201%201.45-1%206.82%206.82%200%200%201%201.49-.59%207.09%207.09%200%200%201%204.78.52%206%206%200%200%201%202.13%202%208.79%208.79%200%200%201%201.2%202.9%2015.72%2015.72%200%200%201%20.4%203.51zm-3.28.36a15.64%2015.64%200%200%200-.2-2.53%207.32%207.32%200%200%200-.69-2.17%204.06%204.06%200%200%200-1.3-1.51%203.49%203.49%200%200%200-2-.57%204.1%204.1%200%200%200-1.2.18%204.92%204.92%200%200%200-1.2.57%208.54%208.54%200%200%200-1.28%201A15.77%2015.77%200%200%200%2022.76%2010v6.77a13.53%2013.53%200%200%200%202.46%202.4%204.12%204.12%200%200%200%202.44.83%203.56%203.56%200%200%200%202-.57A4.28%204.28%200%200%200%2031%2018a7.58%207.58%200%200%200%20.77-2.12%2011.43%2011.43%200%200%200%20.23-2.36zM12%2017.3a5.39%205.39%200%200%201-.48%202.33%204.73%204.73%200%200%201-1.37%201.72%206.19%206.19%200%200%201-2.12%201.06%209.62%209.62%200%200%201-2.71.36%2010.38%2010.38%200%200%201-3.21-.5A7.63%207.63%200%200%201%201%2021.82a3.25%203.25%200%200%201-.66-.43%201.09%201.09%200%200%201-.3-.53%203.59%203.59%200%200%201-.04-.93%204.06%204.06%200%200%201%200-.61%202%202%200%200%201%20.09-.4.42.42%200%200%201%20.16-.22.43.43%200%200%201%20.24-.07%201.35%201.35%200%200%201%20.61.26q.41.26%201%20.56a9.22%209.22%200%200%200%201.41.55%206.25%206.25%200%200%200%201.87.26%205.62%205.62%200%200%200%201.44-.17%203.48%203.48%200%200%200%201.12-.5%202.23%202.23%200%200%200%20.73-.84%202.68%202.68%200%200%200%20.26-1.21%202%202%200%200%200-.37-1.21%203.55%203.55%200%200%200-1-.87%208.09%208.09%200%200%200-1.36-.66l-1.56-.61a16%2016%200%200%201-1.57-.73%206%206%200%200%201-1.37-1%204.52%204.52%200%200%201-1-1.4%204.69%204.69%200%200%201-.37-2%204.88%204.88%200%200%201%20.39-1.87%204.46%204.46%200%200%201%201.16-1.61%205.83%205.83%200%200%201%201.94-1.11A8.06%208.06%200%200%201%206.53%204a8.28%208.28%200%200%201%201.36.11%209.36%209.36%200%200%201%201.23.28%205.92%205.92%200%200%201%20.94.37%204.09%204.09%200%200%201%20.59.35%201%201%200%200%201%20.26.26.83.83%200%200%201%20.09.26%201.32%201.32%200%200%200%20.06.35%203.87%203.87%200%200%201%200%20.51%204.76%204.76%200%200%201%200%20.56%201.39%201.39%200%200%201-.09.39.5.5%200%200%201-.16.22.35.35%200%200%201-.21.07%201%201%200%200%201-.49-.21%207%207%200%200%200-.83-.44%209.26%209.26%200%200%200-1.2-.44%205.49%205.49%200%200%200-1.58-.16%204.93%204.93%200%200%200-1.4.18%202.69%202.69%200%200%200-1%20.51%202.16%202.16%200%200%200-.59.83%202.43%202.43%200%200%200-.2%201%202%202%200%200%200%20.38%201.24%203.6%203.6%200%200%200%201%20.88%208.25%208.25%200%200%200%201.38.68l1.58.62q.8.32%201.59.72a6%206%200%200%201%201.39%201%204.37%204.37%200%200%201%201%201.36%204.46%204.46%200%200%201%20.37%201.8z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E">\n</div></div>':"";this.parent.appendChild(this.dom=ps(`<div class="spine-player" style="position:relative;height:100%"><canvas class="spine-player-canvas" style="display:block;width:100%;height:100%"></canvas>${i}</div>`));try{this.validateConfig(e)}catch(t){this.showError(t.message,t)}this.initialize(),window.addEventListener("resize",(()=>this.drawFrame(!1))),requestAnimationFrame((()=>this.drawFrame()))}validateConfig(t){if(!t)throw new Error("A configuration object must be passed to to new SpinePlayer().");if(t.skelUrl&&(t.binaryUrl=t.skelUrl),!t.jsonUrl&&!t.binaryUrl)throw new Error("A URL must be specified for the skeleton JSON or binary file.");if(!t.atlasUrl)throw new Error("A URL must be specified for the atlas file.");if(t.backgroundColor||(t.backgroundColor=t.alpha?"00000000":"000000"),t.fullScreenBackgroundColor||(t.fullScreenBackgroundColor=t.backgroundColor),t.backgroundImage&&!t.backgroundImage.url&&(t.backgroundImage=null),void 0===t.premultipliedAlpha&&(t.premultipliedAlpha=!0),void 0===t.mipmaps&&(t.mipmaps=!0),t.debug||(t.debug={}),t.animations&&t.animation&&t.animations.indexOf(t.animation)<0)throw new Error("Animation '"+t.animation+"' is not in the config animation list: "+gs(t.animations));if(t.skins&&t.skin&&t.skins.indexOf(t.skin)<0)throw new Error("Default skin '"+t.skin+"' is not in the config skins list: "+gs(t.skins));t.viewport||(t.viewport={}),t.viewport.animations||(t.viewport.animations={}),void 0===t.viewport.debugRender&&(t.viewport.debugRender=!1),void 0===t.viewport.transitionTime&&(t.viewport.transitionTime=.25),t.controlBones||(t.controlBones=[]),void 0===t.showLoading&&(t.showLoading=!0),void 0===t.defaultMix&&(t.defaultMix=.25)}initialize(){let t=this.config,e=this.dom;if(!t.alpha){let e=t.backgroundColor;this.dom.style.backgroundColor=("#"==e.charAt(0)?e:"#"+e).substr(0,7)}try{this.canvas=ms(e,"spine-player-canvas"),this.context=new li(this.canvas,{alpha:t.alpha}),this.sceneRenderer=new $i(this.canvas,this.context,!0),t.showLoading&&(this.loadingScreen=new rs(this.sceneRenderer))}catch(t){this.showError("Sorry, your browser does not support \nPlease use the latest version of Firefox, Chrome, Edge, or Safari.",t)}if(this.assetManager=new ui(this.context,"",t.downloader),t.rawDataURIs)for(let e in t.rawDataURIs)this.assetManager.setRawDataURI(e,t.rawDataURIs[e]);if(t.jsonUrl?this.assetManager.loadJson(t.jsonUrl):this.assetManager.loadBinary(t.binaryUrl),this.assetManager.loadTextureAtlas(t.atlasUrl),t.backgroundImage&&this.assetManager.loadTexture(t.backgroundImage.url),this.bg.setFromString(t.backgroundColor),this.bgFullscreen.setFromString(t.fullScreenBackgroundColor),t.showControls){this.playerControls=e.children[1];let t=this.playerControls.children,i=t[0],s=t[1].children;this.playButton=s[0];let n=s[2];this.animationButton=s[3],this.skinButton=s[4];let r=s[5],a=s[6],o=s[7];this.timelineSlider=new us,i.appendChild(this.timelineSlider.create()),this.timelineSlider.change=t=>{this.pause();let e=this.animationState.getCurrent(0).animation.duration*t;this.animationState.update(e-this.playTime),this.animationState.apply(this.skeleton),this.skeleton.updateWorldTransform(),this.playTime=e},this.playButton.onclick=()=>this.paused?this.play():this.pause(),n.onclick=()=>this.showSpeedDialog(n),this.animationButton.onclick=()=>this.showAnimationsDialog(this.animationButton),this.skinButton.onclick=()=>this.showSkinsDialog(this.skinButton),r.onclick=()=>this.showSettingsDialog(r);let l=this.canvas.clientWidth,h=this.canvas.clientHeight,c=this.canvas.style.width,d=this.canvas.style.height,u=!1;a.onclick=()=>{let t=()=>{u=!u,u||(this.canvas.style.width=l+"px",this.canvas.style.height=h+"px",this.drawFrame(!1),requestAnimationFrame((()=>{this.canvas.style.width=c,this.canvas.style.height=d})))},i=e;i.onfullscreenchange=t,i.onwebkitfullscreenchange=t;let s=document;s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement?s.exitFullscreen?s.exitFullscreen():s.mozCancelFullScreen?s.mozCancelFullScreen():s.webkitExitFullscreen?s.webkitExitFullscreen():s.msExitFullscreen&&s.msExitFullscreen():(l=this.canvas.clientWidth,h=this.canvas.clientHeight,c=this.canvas.style.width,d=this.canvas.style.height,i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullScreen?i.webkitRequestFullScreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen())},o.onclick=()=>window.open("http://esotericsoftware.com")}return e}loadSkeleton(){if(this.error)return;this.assetManager.hasErrors()&&this.showError("Error: Assets could not be loaded.\n"+gs(this.assetManager.getErrors()));let t,e=this.config,i=this.assetManager.require(e.atlasUrl),s=this.context.gl,n=s.getExtension("EXT_texture_filter_anisotropic"),r=-1!=s.getParameter(s.VERSION).indexOf("WebGL 1.0");for(let t of i.pages){let i=t.minFilter;var o=e.mipmaps,l=a.isPowerOfTwo(t.width)&&a.isPowerOfTwo(t.height);r&&!l&&(o=!1),o&&(n?(s.texParameterf(s.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,8),i=Pt.MipMapLinearLinear):i=Pt.Linear,t.texture.setFilters(i,Pt.Nearest)),i!=Pt.Nearest&&i!=Pt.Linear&&t.texture.update(!0)}if(e.jsonUrl)try{let s=this.assetManager.remove(e.jsonUrl);if(!s)throw new Error("Empty JSON data.");if(e.jsonField&&(s=s[e.jsonField],!s))throw new Error("JSON field does not exist: "+e.jsonField);let n=new $e(new te(i));t=n.readSkeletonData(s)}catch(t){this.showError(`Error: Could not load skeleton JSON.\n${t.message}`,t)}else{let s=this.assetManager.remove(e.binaryUrl),n=new ye(new te(i));try{t=n.readSkeletonData(s)}catch(t){this.showError(`Error: Could not load skeleton binary.\n${t.message}`,t)}}this.skeleton=new pe(t);let h=new Rt(t);h.defaultMix=e.defaultMix,this.animationState=new bt(h),e.controlBones.forEach((e=>{t.findBone(e)||this.showError(`Error: Control bone does not exist in skeleton: ${e}`)})),!e.skin&&t.skins.length&&(e.skin=t.skins[0].name),e.skins&&e.skin.length&&e.skins.forEach((t=>{this.skeleton.data.findSkin(t)||this.showError(`Error: Skin in config list does not exist in skeleton: ${t}`)})),e.skin&&(this.skeleton.data.findSkin(e.skin)||this.showError(`Error: Skin does not exist in skeleton: ${e.skin}`),this.skeleton.setSkinByName(e.skin),this.skeleton.setSlotsToSetupPose()),Object.getOwnPropertyNames(e.viewport.animations).forEach((e=>{t.findAnimation(e)||this.showError(`Error: Animation for which a viewport was specified does not exist in skeleton: ${e}`)})),e.animations&&e.animations.length&&(e.animations.forEach((t=>{this.skeleton.data.findAnimation(t)||this.showError(`Error: Animation in config list does not exist in skeleton: ${t}`)})),e.animation||(e.animation=e.animations[0])),e.animation&&!t.findAnimation(e.animation)&&this.showError(`Error: Animation does not exist in skeleton: ${e.animation}`),this.setupInput(),e.showControls&&((1==t.skins.length||e.skins&&1==e.skins.length)&&this.skinButton.classList.add("spine-player-hidden"),(1==t.animations.length||e.animations&&1==e.animations.length)&&this.animationButton.classList.add("spine-player-hidden")),e.success&&e.success(this);let c=this.animationState.getCurrent(0);c?this.currentViewport||(this.setViewport(c.animation),this.play()):e.animation?(c=this.setAnimation(e.animation),this.play()):(c=this.animationState.setEmptyAnimation(0),c.trackEnd=1e8,this.setViewport(c.animation),this.pause())}setupInput(){let t=this.config,e=t.controlBones;if(!e.length&&!t.showControls)return;let i=this.selectedBones=new Array(e.length),s=this.canvas,n=null,r=new m,o=new mi,l=new mi,h=new m,c=this.skeleton,d=this.sceneRenderer,u=function(t,n){l.set(t,s.clientHeight-n,0),r.x=r.y=0;let a,h=24,u=0;for(let t=0;t<e.length;t++){i[t]=null;let n=c.findBone(e[t]),m=d.camera.worldToScreen(o.set(n.worldX,n.worldY,0),s.clientWidth,s.clientHeight).distance(l);m<h&&(h=m,a=n,u=t,r.x=o.x-l.x,r.y=o.y-l.y)}return a&&(i[u]=a),a};if(new Ri(s).addListener({down:(t,e)=>{n=u(t,e)},up:()=>{n?n=null:t.showControls&&(this.paused?this.play():this.pause())},dragged:(t,e)=>{n&&(t=a.clamp(t+r.x,0,s.clientWidth),e=a.clamp(e-r.y,0,s.clientHeight),d.camera.screenToWorld(o.set(t,e,0),s.clientWidth,s.clientHeight),n.parent?(n.parent.worldToLocal(h.set(o.x-c.x,o.y-c.y)),n.x=h.x,n.y=h.y):(n.x=o.x-c.x,n.y=o.y-c.y))},moved:(t,e)=>u(t,e)}),t.showControls){document.addEventListener("mousemove",(t=>{t instanceof MouseEvent&&n(t.clientX,t.clientY)})),document.addEventListener("touchmove",(t=>{if(t instanceof TouchEvent){let e=t.changedTouches;if(e.length){let t=e[0];n(t.clientX,t.clientY)}}}));let t=(t,e,i)=>{let s=t-i.left,n=e-i.top;return s>=0&&s<=i.width&&n>=0&&n<=i.height},e=!0,i=!1,n=(n,r)=>{let a=ms(this.dom,"spine-player-popup");e=t(n,r,this.playerControls.getBoundingClientRect()),i=t(n,r,s.getBoundingClientRect()),clearTimeout(this.cancelId),!(a||e||i||this.paused)?this.playerControls.classList.add("spine-player-controls-hidden"):this.playerControls.classList.remove("spine-player-controls-hidden"),e||a||this.paused||(this.cancelId=setTimeout((()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")}),1e3))}}}play(){this.paused=!1;let t=this.config;t.showControls&&(this.cancelId=setTimeout((()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")}),1e3),this.playButton.classList.remove("spine-player-button-icon-play"),this.playButton.classList.add("spine-player-button-icon-pause"),t.animation||(t.animations&&t.animations.length?t.animation=t.animations[0]:this.skeleton.data.animations.length&&(t.animation=this.skeleton.data.animations[0].name),t.animation&&this.setAnimation(t.animation)))}pause(){this.paused=!0,this.config.showControls&&(this.playerControls.classList.remove("spine-player-controls-hidden"),clearTimeout(this.cancelId),this.playButton.classList.remove("spine-player-button-icon-pause"),this.playButton.classList.add("spine-player-button-icon-play"))}setAnimation(t,e=!0){return t=this.setViewport(t),this.animationState.setAnimationWith(0,t,e)}addAnimation(t,e=!0,i=0){return t=this.setViewport(t),this.animationState.addAnimationWith(0,t,e,i)}setViewport(t){"string"==typeof t&&(t=this.skeleton.data.findAnimation(t)),this.previousViewport=this.currentViewport;let e=this.config.viewport,i=this.currentViewport={padLeft:void 0!==e.padLeft?e.padLeft:"10%",padRight:void 0!==e.padRight?e.padRight:"10%",padTop:void 0!==e.padTop?e.padTop:"10%",padBottom:void 0!==e.padBottom?e.padBottom:"10%"};void 0!==e.x&&void 0!==e.y&&e.width&&e.height?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):this.calculateAnimationViewport(t,i);let s=this.config.viewport.animations[t.name];return s&&(void 0!==s.x&&void 0!==s.y&&s.width&&s.height&&(i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height),void 0!==s.padLeft&&(i.padLeft=s.padLeft),void 0!==s.padRight&&(i.padRight=s.padRight),void 0!==s.padTop&&(i.padTop=s.padTop),void 0!==s.padBottom&&(i.padBottom=s.padBottom)),i.padLeft=this.percentageToWorldUnit(i.width,i.padLeft),i.padRight=this.percentageToWorldUnit(i.width,i.padRight),i.padBottom=this.percentageToWorldUnit(i.height,i.padBottom),i.padTop=this.percentageToWorldUnit(i.height,i.padTop),this.viewportTransitionStart=performance.now(),t}percentageToWorldUnit(t,e){return"string"==typeof e?t*parseFloat(e.substr(0,e.length-1))/100:e}calculateAnimationViewport(t,e){this.skeleton.setToSetupPose();let i=t.duration?t.duration/100:0,s=0,n=1e8,r=-1e8,a=1e8,o=-1e8,l=new m,h=new m;for(let e=0;e<100;e++,s+=i)t.apply(this.skeleton,s,s,!1,null,1,A.setup,S.mixIn),this.skeleton.updateWorldTransform(),this.skeleton.getBounds(l,h),isNaN(l.x)||isNaN(l.y)||isNaN(h.x)||isNaN(h.y)?this.showError("Animation bounds are invalid: "+t.name):(n=Math.min(l.x,n),r=Math.max(l.x+h.x,r),a=Math.min(l.y,a),o=Math.max(l.y+h.y,o));e.x=n,e.y=a,e.width=r-n,e.height=o-a}drawFrame(t=!0){try{if(this.error)return;t&&!this.stopRequestAnimationFrame&&requestAnimationFrame((()=>this.drawFrame()));let e=document,i=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement?this.bgFullscreen:this.bg;this.time.update();let s=this.time.delta,n=this.assetManager.isLoadingComplete();!this.skeleton&&n&&this.loadSkeleton();let a=this.skeleton,o=this.config;if(a){let t=this.sceneRenderer;t.resize(ts.Expand);let e=this.paused?0:s*this.speed;if(o.frame&&o.frame(this,e),!this.paused&&(this.animationState.update(e),this.animationState.apply(a),a.updateWorldTransform(),o.showControls)){this.playTime+=e;let t=this.animationState.getCurrent(0);if(t){let e=t.animation.duration;for(;this.playTime>=e&&0!=e;)this.playTime-=e;this.playTime=Math.max(0,Math.min(this.playTime,e)),this.timelineSlider.setValue(this.playTime/e)}}let n=this.viewport;if(n.x=this.currentViewport.x-this.currentViewport.padLeft,n.y=this.currentViewport.y-this.currentViewport.padBottom,n.width=this.currentViewport.width+this.currentViewport.padLeft+this.currentViewport.padRight,n.height=this.currentViewport.height+this.currentViewport.padBottom+this.currentViewport.padTop,this.previousViewport){let t=(performance.now()-this.viewportTransitionStart)/1e3/o.viewport.transitionTime;if(t<1){let e=this.previousViewport.x-this.previousViewport.padLeft,i=this.previousViewport.y-this.previousViewport.padBottom,s=this.previousViewport.width+this.previousViewport.padLeft+this.previousViewport.padRight,r=this.previousViewport.height+this.previousViewport.padBottom+this.previousViewport.padTop;n.x=e+(n.x-e)*t,n.y=i+(n.y-i)*t,n.width=s+(n.width-s)*t,n.height=r+(n.height-r)*t}}t.camera.zoom=this.canvas.height/this.canvas.width>n.height/n.width?n.width/this.canvas.width:n.height/this.canvas.height,t.camera.position.x=n.x+n.width/2,t.camera.position.y=n.y+n.height/2;let l=this.context.gl;l.clearColor(i.r,i.g,i.b,i.a),l.clear(l.COLOR_BUFFER_BIT),o.update&&o.update(this,e),t.begin();let h=o.backgroundImage;if(h){let e=this.assetManager.require(h.url);void 0!==h.x&&void 0!==h.y&&h.width&&h.height?t.drawTexture(e,h.x,h.y,h.width,h.height):t.drawTexture(e,n.x,n.y,n.width,n.height)}t.drawSkeleton(a,o.premultipliedAlpha),((t.skeletonDebugRenderer.drawBones=o.debug.bones)||(t.skeletonDebugRenderer.drawBoundingBoxes=o.debug.bounds)||(t.skeletonDebugRenderer.drawClipping=o.debug.clipping)||(t.skeletonDebugRenderer.drawMeshHull=o.debug.hulls)||(t.skeletonDebugRenderer.drawPaths=o.debug.paths)||(t.skeletonDebugRenderer.drawRegionAttachments=o.debug.regions)||(t.skeletonDebugRenderer.drawMeshTriangles=o.debug.meshes))&&t.drawSkeletonDebug(a,o.premultipliedAlpha);let c=o.controlBones;if(c.length){let e=this.selectedBones;l.lineWidth(2);for(let i=0;i<c.length;i++){let s=a.findBone(c[i]);if(!s)continue;let n=e[i]?xs:bs,r=e[i]?ws:ys;t.circle(!0,a.x+s.worldX,a.y+s.worldY,20,n),t.circle(!1,a.x+s.worldX,a.y+s.worldY,20,r)}}o.viewport.debugRender&&(l.lineWidth(1),t.rect(!1,this.currentViewport.x,this.currentViewport.y,this.currentViewport.width,this.currentViewport.height,r.GREEN),t.rect(!1,n.x,n.y,n.width,n.height,r.RED)),t.end(),o.draw&&o.draw(this,e)}o.showLoading&&(this.loadingScreen.backgroundColor.setFromColor(i),this.loadingScreen.draw(n)),n&&o.loading&&o.loading(this,s)}catch(t){this.showError(`Error: Unable to render skeleton.\n${t.message}`,t)}}stopRendering(){this.stopRequestAnimationFrame=!0}hidePopup(t){return this.popup&&this.popup.hide(t)}showSpeedDialog(t){let e="speed";if(this.hidePopup(e))return;let i=new cs(e,t,this,this.playerControls,'\n<div class="spine-player-popup-title">Speed</div>\n<hr>\n<div class="spine-player-row" style="align-items:center;padding:8px">\n<div class="spine-player-column">\n\t<div class="spine-player-speed-slider" style="margin-bottom:4px"></div>\n\t<div class="spine-player-row" style="justify-content:space-between"><div>0.1x</div><div>1x</div><div>2x</div></div>\n</div>\n</div>'),s=new us(2,.1,!0);ms(i.dom,"spine-player-speed-slider").appendChild(s.create()),s.setValue(this.speed/2),s.change=t=>this.speed=2*t,i.show()}showAnimationsDialog(t){let e="animations";if(this.hidePopup(e))return;if(!this.skeleton||!this.skeleton.data.animations.length)return;let i=new cs(e,t,this,this.playerControls,'<div class="spine-player-popup-title">Animations</div><hr><ul class="spine-player-list"></ul>'),s=ms(i.dom,"spine-player-list");this.skeleton.data.animations.forEach((t=>{if(this.config.animations&&this.config.animations.indexOf(t.name)<0)return;let e=ps('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');t.name==this.config.animation&&e.classList.add("selected"),ms(e,"selectable-text").innerText=t.name,s.appendChild(e),e.onclick=()=>{fs(s.children,"selected"),e.classList.add("selected"),this.config.animation=t.name,this.playTime=0,this.setAnimation(t.name),this.play()}})),i.show()}showSkinsDialog(t){let e="skins";if(this.hidePopup(e))return;if(!this.skeleton||!this.skeleton.data.animations.length)return;let i=new cs(e,t,this,this.playerControls,'<div class="spine-player-popup-title">Skins</div><hr><ul class="spine-player-list"></ul>'),s=ms(i.dom,"spine-player-list");this.skeleton.data.skins.forEach((t=>{if(this.config.skins&&this.config.skins.indexOf(t.name)<0)return;let e=ps('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');t.name==this.config.skin&&e.classList.add("selected"),ms(e,"selectable-text").innerText=t.name,s.appendChild(e),e.onclick=()=>{fs(s.children,"selected"),e.classList.add("selected"),this.config.skin=t.name,this.skeleton.setSkinByName(this.config.skin),this.skeleton.setSlotsToSetupPose()}})),i.show()}showSettingsDialog(t){let e="settings";if(this.hidePopup(e))return;if(!this.skeleton||!this.skeleton.data.animations.length)return;let i=new cs(e,t,this,this.playerControls,'<div class="spine-player-popup-title">Debug</div><hr><ul class="spine-player-list"></li>'),s=ms(i.dom,"spine-player-list"),n=(t,e)=>{let i=ps('<li class="spine-player-list-item"></li>'),n=new ds(t);i.appendChild(n.create());let r=this.config.debug;n.setEnabled(r[e]),n.change=t=>r[e]=t,s.appendChild(i)};n("Bones","bones"),n("Regions","regions"),n("Meshes","meshes"),n("Bounds","bounds"),n("Paths","paths"),n("Clipping","clipping"),n("Points","points"),n("Hulls","hulls"),i.show()}showError(t,e=null){if(!this.error)throw this.error=!0,this.dom.appendChild(ps('<div class="spine-player-error" style="background:#000;color:#fff;position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:auto;z-index:999">'+t.replace("\n","<br><br>")+"</div>")),this.config.error&&this.config.error(this,t),e||new Error(t);if(e)throw e}}class cs{constructor(t,e,i,s,n){this.id=t,this.button=e,this.player=i,this.dom=ps('<div class="spine-player-popup spine-player-hidden"></div>'),this.dom.innerHTML=n,s.appendChild(this.dom),this.className="spine-player-button-icon-"+t+"-selected"}hide(t){if(this.dom.remove(),this.button.classList.remove(this.className),this.id==t)return this.player.popup=null,!0}show(){this.player.popup=this,this.button.classList.add(this.className),this.dom.classList.remove("spine-player-hidden");let t=!1,e=()=>{t||requestAnimationFrame(e);let i=this.player.dom,s=Math.abs(i.getBoundingClientRect().bottom-i.getBoundingClientRect().bottom),n=Math.abs(i.getBoundingClientRect().right-i.getBoundingClientRect().right);this.dom.style.maxHeight=i.clientHeight-s-n+"px"};requestAnimationFrame(e);let i=!0,s=e=>{i||this.player.popup!=this?i=!1:this.dom.contains(e.target)||(this.dom.remove(),window.removeEventListener("click",s),this.button.classList.remove(this.className),this.player.popup=null,t=!0)};window.addEventListener("click",s)}}class ds{constructor(t){this.text=t,this.enabled=!1}create(){return this.switch=ps(`\n<div class="spine-player-switch">\n\t<span class="spine-player-switch-text">${this.text}</span>\n\t<div class="spine-player-switch-knob-area">\n\t\t<div class="spine-player-switch-knob"></div>\n\t</div>\n</div>`),this.switch.addEventListener("click",(()=>{this.setEnabled(!this.enabled),this.change&&this.change(this.enabled)})),this.switch}setEnabled(t){t?this.switch.classList.add("active"):this.switch.classList.remove("active"),this.enabled=t}isEnabled(){return this.enabled}}class us{constructor(t=0,e=.1,i=!1){this.snaps=t,this.snapPercentage=e,this.big=i}create(){this.slider=ps(`\n<div class="spine-player-slider ${this.big?"big":""}">\n\t<div class="spine-player-slider-value"></div>\n\t\x3c!--<div class="spine-player-slider-knob"></div>--\x3e\n</div>`),this.value=ms(this.slider,"spine-player-slider-value"),this.setValue(0);let t=!1;return new Ri(this.slider).addListener({down:(e,i)=>{t=!0,this.value.classList.add("hovering")},up:(e,i)=>{t=!1,this.change&&this.change(this.setValue(e/this.slider.clientWidth)),this.value.classList.remove("hovering")},moved:(e,i)=>{t&&this.change&&this.change(this.setValue(e/this.slider.clientWidth))},dragged:(t,e)=>{this.change&&this.change(this.setValue(t/this.slider.clientWidth))}}),this.slider}setValue(t){if(t=Math.max(0,Math.min(1,t)),this.snaps){let e=1/this.snaps,i=t%e;i<e*this.snapPercentage?t-=i:i>e-e*this.snapPercentage&&(t=t-i+e),t=Math.max(0,Math.min(1,t))}return this.value.style.width=100*t+"%",t}}function ms(t,e){return t.getElementsByClassName(e)[0]}function ps(t){let e=document.createElement("div");return e.innerHTML=t,e.children[0]}function fs(t,e){for(let i=0;i<t.length;i++)t[i].classList.remove(e)}function gs(t){return JSON.stringify(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")}const xs=new r(.478,0,0,.25),ws=new r(1,1,1,1),bs=new r(.478,0,0,.5),ys=new r(1,0,0,.8);class vs{constructor(t){this.prefix="<html>\n<head>\n<style>\nbody { margin: 0px; }\n</style>\n</head>\n<body>".trim(),this.postfix="</body>",this.timerId=0,this.render(t)}render(t){t.innerHTML='\n\t\t\t\t<div class="spine-player-editor-container">\n\t\t\t\t\t<div class="spine-player-editor-code"></div>\n\t\t\t\t\t<iframe class="spine-player-editor-player"></iframe>\n\t\t\t\t</div>\n\t\t\t';let e=t.getElementsByClassName("spine-player-editor-code")[0];this.player=t.getElementsByClassName("spine-player-editor-player")[0],requestAnimationFrame((()=>{this.code=CodeMirror(e,{lineNumbers:!0,tabSize:3,indentUnit:3,indentWithTabs:!0,scrollBarStyle:"native",mode:"htmlmixed",theme:"monokai"}),this.code.on("change",(()=>{this.startPlayer()})),this.setCode(vs.DEFAULT_CODE)}))}setPreAndPostfix(t,e){this.prefix=t,this.postfix=e,this.startPlayer()}setCode(t){this.code.setValue(t),this.startPlayer()}startPlayer(){clearTimeout(this.timerId),this.timerId=setTimeout((()=>{let t=this.code.getDoc().getValue();t=this.prefix+t+this.postfix,t=window.btoa(t),this.player.src="",this.player.src="data:text/html;base64,"+t}),500)}}vs.DEFAULT_CODE='\n<script src="https://esotericsoftware.com/files/spine-player/4.0/spine-player.js"><\/script>\n<link rel="stylesheet" href="https://esotericsoftware.com/files/spine-player/4.0/spine-player.css">\n\n<div id="player-container" style="width: 100%; height: 100vh;"></div>\n\n<script>\nnew spine.SpinePlayer("player-container", {\n\tjsonUrl: "https://esotericsoftware.com/files/examples/4.0/spineboy/export/spineboy-pro.json",\n\tatlasUrl: "https://esotericsoftware.com/files/examples/4.0/spineboy/export/spineboy-pma.atlas"\n});\n<\/script>\n\t\t'.trim()},171:t=>{var e,i,s;e=window,i=0,s=function t(e,s){var n=this,r=this,a=!1;if(Array.isArray(e))return!!e.length&&e.map((function(e){return new t(e,s)}));var o={init:function(){var t=this;this.options=Object.assign({duration:600,ariaEnabled:!0,collapse:!0,showMultiple:!1,openOnInit:[],elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",beforeOpen:function(){},onOpen:function(){},beforeClose:function(){},onClose:function(){}},s);var n=this.options,a=n.elementClass,o=n.openOnInit,l="string"==typeof e;this.container=l?document.querySelector(e):e,this.elements=Array.from(this.container.childNodes).filter((function(t){return t.classList&&t.classList.contains(a)})),this.firstElement=this.elements[0],this.lastElement=this.elements[this.elements.length-1],this.currFocusedIdx=0,this.elements.map((function(e,s){return e.classList.add("js-enabled"),t.generateIDs(e),t.setARIA(e),t.setTransition(e),i++,o.includes(s)?t.showElement(e,!1):t.closeElement(e,!1)})),r.attachEvents()},setTransition:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.options,s=i.duration,n=i.panelClass,r=t.querySelector(".".concat(n)),a=l("transitionDuration");r.style[a]=e?null:"".concat(s,"ms")},generateIDs:function(t){var e=this.options,s=e.triggerClass,n=e.panelClass,r=t.querySelector(".".concat(s)),a=t.querySelector(".".concat(n));t.setAttribute("id","ac-".concat(i)),r.setAttribute("id","ac-trigger-".concat(i)),a.setAttribute("id","ac-panel-".concat(i))},removeIDs:function(t){var e=this.options,i=e.triggerClass,s=e.panelClass,n=t.querySelector(".".concat(i)),r=t.querySelector(".".concat(s));t.removeAttribute("id"),n.removeAttribute("id"),r.removeAttribute("id")},setARIA:function(t){var e=this.options,s=e.ariaEnabled,n=e.triggerClass,r=e.panelClass;if(s){var a=t.querySelector(".".concat(n)),o=t.querySelector(".".concat(r));a.setAttribute("role","button"),a.setAttribute("aria-controls","ac-panel-".concat(i)),a.setAttribute("aria-disabled",!1),a.setAttribute("aria-expanded",!1),o.setAttribute("role","region"),o.setAttribute("aria-labelledby","ac-trigger-".concat(i))}},updateARIA:function(t,e){var i=e.ariaExpanded,s=e.ariaDisabled,n=this.options,r=n.ariaEnabled,a=n.triggerClass;if(r){var o=t.querySelector(".".concat(a));o.setAttribute("aria-expanded",i),o.setAttribute("aria-disabled",s)}},removeARIA:function(t){var e=this.options,i=e.ariaEnabled,s=e.triggerClass,n=e.panelClass;if(i){var r=t.querySelector(".".concat(s)),a=t.querySelector(".".concat(n));r.removeAttribute("role"),r.removeAttribute("aria-controls"),r.removeAttribute("aria-disabled"),r.removeAttribute("aria-expanded"),a.removeAttribute("role"),a.removeAttribute("aria-labelledby")}},focus:function(t,e){t.preventDefault();var i=this.options.triggerClass;e.querySelector(".".concat(i)).focus()},focusFirstElement:function(t){this.focus(t,this.firstElement),this.currFocusedIdx=0},focusLastElement:function(t){this.focus(t,this.lastElement),this.currFocusedIdx=this.elements.length-1},focusNextElement:function(t){var e=this.currFocusedIdx+1;if(e>this.elements.length-1)return this.focusFirstElement(t);this.focus(t,this.elements[e]),this.currFocusedIdx=e},focusPrevElement:function(t){var e=this.currFocusedIdx-1;if(e<0)return this.focusLastElement(t);this.focus(t,this.elements[e]),this.currFocusedIdx=e},showElement:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.options,s=i.panelClass,n=i.activeClass,r=i.collapse,a=i.beforeOpen,o=t.querySelector(".".concat(s)),l=o.scrollHeight;t.classList.add(n),e&&a(t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.style.height=e?"".concat(l,"px"):"auto"}))})),this.updateARIA(t,{ariaExpanded:!0,ariaDisabled:!r})},closeElement:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.options,s=i.panelClass,n=i.activeClass,r=i.beforeClose,a=t.querySelector(".".concat(s)),o=a.scrollHeight;t.classList.remove(n),e?(r(t),requestAnimationFrame((function(){a.style.height="".concat(o,"px"),requestAnimationFrame((function(){a.style.height=0}))})),this.updateARIA(t,{ariaExpanded:!1,ariaDisabled:!1})):a.style.height=0},toggleElement:function(t){var e=this.options,i=e.activeClass,s=e.collapse,n=t.classList.contains(i);if(!n||s)return n?this.closeElement(t):this.showElement(t)},closeElements:function(){var t=this,e=this.options,i=e.activeClass;e.showMultiple||this.elements.map((function(e,s){e.classList.contains(i)&&s!=t.currFocusedIdx&&t.closeElement(e)}))},handleClick:function(t){var e=this,i=t.currentTarget;this.elements.map((function(s,n){s.contains(i)&&"A"!==t.target.nodeName&&(e.currFocusedIdx=n,e.closeElements(),e.focus(t,s),e.toggleElement(s))}))},handleKeydown:function(t){switch(t.keyCode){case 38:return this.focusPrevElement(t);case 40:return this.focusNextElement(t);case 36:return this.focusFirstElement(t);case 35:return this.focusLastElement(t);default:return null}},handleTransitionEnd:function(t){if("height"===t.propertyName){var e=this.options,i=e.onOpen,s=e.onClose,n=t.currentTarget,r=parseInt(n.style.height),a=this.elements.find((function(t){return t.contains(n)}));r>0?(n.style.height="auto",i(a)):s(a)}}};this.attachEvents=function(){if(!a){var t=o.options,e=t.triggerClass,i=t.panelClass;o.handleClick=o.handleClick.bind(o),o.handleKeydown=o.handleKeydown.bind(o),o.handleTransitionEnd=o.handleTransitionEnd.bind(o),o.elements.map((function(t){var s=t.querySelector(".".concat(e)),n=t.querySelector(".".concat(i));s.addEventListener("click",o.handleClick),s.addEventListener("keydown",o.handleKeydown),n.addEventListener("webkitTransitionEnd",o.handleTransitionEnd),n.addEventListener("transitionend",o.handleTransitionEnd)})),a=!0}},this.detachEvents=function(){if(a){var t=o.options,e=t.triggerClass,i=t.panelClass;o.elements.map((function(t){var s=t.querySelector(".".concat(e)),n=t.querySelector(".".concat(i));s.removeEventListener("click",o.handleClick),s.removeEventListener("keydown",o.handleKeydown),n.removeEventListener("webkitTransitionEnd",o.handleTransitionEnd),n.removeEventListener("transitionend",o.handleTransitionEnd)})),a=!1}},this.toggle=function(t){var e=o.elements.find((function(e,i){return i===t}));e&&o.toggleElement(e)},this.open=function(t){var e=o.elements.find((function(e,i){return i===t}));e&&o.showElement(e)},this.openAll=function(){o.elements.map((function(t){return o.showElement(t,!1)}))},this.close=function(t){var e=o.elements.find((function(e,i){return i===t}));e&&o.closeElement(e)},this.closeAll=function(){o.elements.map((function(t){return o.closeElement(t,!1)}))},this.destroy=function(){n.detachEvents(),n.openAll(),o.elements.map((function(t){o.removeIDs(t),o.removeARIA(t),o.setTransition(t,!0)})),a=!0};var l=function(t){return"string"==typeof document.documentElement.style[t]?t:(t=h(t),t="webkit".concat(t))},h=function(t){return t.charAt(0).toUpperCase()+t.slice(1)};o.init()},void 0!==t.exports?t.exports=s:e.Accordion=s},689:(t,e,i)=>{function s(t,e){var i={start:function(){return 0},center:function(t){return s(t)/2},end:s};function s(t){return e-t}return{measure:function(s){return"number"==typeof t?e*Number(t):i[t](s)}}}function n(t,e){var i=Math.abs(t-e);function s(e){return e<t}function n(t){return t>e}function r(t){return s(t)||n(t)}return{constrain:function(i){return r(i)?s(i)?t:e:i},length:i,max:e,min:t,reachedAny:r,reachedMax:n,reachedMin:s,removeOffset:function(t){return i?t-i*Math.ceil((t-e)/i):t}}}function r(t,e,i){var s=n(0,t),a=s.min,o=s.constrain,l=t+1,h=c(e);function c(t){return i?Math.abs((l+t)%l):o(t)}function d(){return h}function u(t){return h=c(t),m}var m={add:function(t){return u(d()+t)},clone:function(){return r(t,d(),i)},get:d,set:u,min:a,max:t};return m}function a(){var t=[];var e={add:function(i,s,n,r){return void 0===r&&(r=!1),i.addEventListener(s,n,r),t.push((function(){return i.removeEventListener(s,n,r)})),e},removeAll:function(){return t=t.filter((function(t){return t()})),e}};return e}function o(t){var e=t;function i(t){return e/=t,n}function s(t){return"number"==typeof t?t:t.get()}var n={add:function(t){return e+=s(t),n},divide:i,get:function(){return e},multiply:function(t){return e*=t,n},normalize:function(){return 0!==e&&i(e),n},set:function(t){return e=s(t),n},subtract:function(t){return e-=s(t),n}};return n}function l(t){return t?t/Math.abs(t):0}function h(t,e){return Math.abs(t-e)}function c(t,e){for(var i=[],s=0;s<t.length;s+=e)i.push(t.slice(s,s+e));return i}function d(t){return Object.keys(t).map(Number)}function u(t){return t[m(t)]}function m(t){return Math.max(0,t.length-1)}function p(t,e,i,s,n,r,c,d,u,m,p,f,g,x,w){var b=t.scroll,y=t.cross,v=["INPUT","SELECT","TEXTAREA"],A=o(0),S=o(0),C=o(0),k=a(),E=a(),T={mouse:2.5,touch:3.5},I={mouse:5,touch:7},M=n?5:16,F=!1,L=!1,R=!1,Y=!1;function B(t){if(!(Y="mousedown"===t.type)||0===t.button){var e,n,a=h(s.get(),c.get())>=2,o=Y||!a,l=(e=t.target,n=e.nodeName||"",!(v.indexOf(n)>-1)),d=a||Y&&l;F=!0,r.pointerDown(t),C.set(s),s.set(c),m.useBaseMass().useSpeed(80),function(){var t=Y?document:i;E.add(t,"touchmove",X).add(t,"touchend",P).add(t,"mousemove",X).add(t,"mouseup",P)}(),A.set(r.readPoint(t,b)),S.set(r.readPoint(t,y)),g.emit("pointerDown"),o&&(R=!1),d&&t.preventDefault()}}function X(t){if(!L&&!Y){if(!t.cancelable)return P();var i=r.readPoint(t,b).get(),n=r.readPoint(t,y).get(),a=h(i,A.get()),o=h(n,S.get());if(!(L=a>o)&&!R)return P()}var l=r.pointerMove(t);!R&&l&&(R=!0),d.start(),s.add(e.applyTo(l)),t.preventDefault()}function P(){var t=p.byDistance(0,!1).index!==f.get(),i=r.pointerUp()*(n?I:T)[Y?"mouse":"touch"],a=function(t,e){var i=f.clone().add(-1*l(t)),s=i.get()===f.min||i.get()===f.max,r=p.byDistance(t,!n).distance;return n||Math.abs(t)<20?r:!x&&s?.6*r:w&&e?.5*r:p.byIndex(i.get(),0).distance}(e.applyTo(i),t),o=function(t,e){if(0===t||0===e)return 0;if(Math.abs(t)<=Math.abs(e))return 0;var i=h(Math.abs(t),Math.abs(e));return Math.abs(i/t)}(i,a),c=h(s.get(),C.get())>=.5,d=t&&o>.75,b=Math.abs(i)<20,y=d?10:M,v=d?1+2.5*o:1;c&&!Y&&(R=!0),L=!1,F=!1,E.removeAll(),m.useSpeed(b?9:y).useMass(v),u.distance(a,!n),Y=!1,g.emit("pointerUp")}function V(t){R&&t.preventDefault()}return{addActivationEvents:function(){var t=i;k.add(t,"touchmove",(function(){})).add(t,"touchend",(function(){})).add(t,"touchstart",B).add(t,"mousedown",B).add(t,"touchcancel",P).add(t,"contextmenu",P).add(t,"click",V)},clickAllowed:function(){return!R},pointerDown:function(){return F},removeAllEvents:function(){k.removeAll(),E.removeAll()}}}function f(t,e,i){var s,n,r=(s=2,n=Math.pow(10,s),function(t){return Math.round(t*n)/n}),a=o(0),h=o(0),c=o(0),d=0,u=e,m=i;function p(t){return u=t,g}function f(t){return m=t,g}var g={direction:function(){return d},seek:function(e){c.set(e).subtract(t);var i,s,n,r,o=(i=c.get(),(n=0)+(i-(s=0))/(100-s)*(u-n));return d=l(c.get()),c.normalize().multiply(o).subtract(a),(r=c).divide(m),h.add(r),g},settle:function(e){var i=e.get()-t.get(),s=!r(i);return s&&t.set(e),s},update:function(){a.add(h),t.add(a),h.multiply(0)},useBaseMass:function(){return f(i)},useBaseSpeed:function(){return p(e)},useMass:f,useSpeed:p};return g}function g(t,e,i,s){var n=!1;return{constrain:function(r){if(!n&&t.reachedAny(i.get())&&t.reachedAny(e.get())){var a=r?.7:.45,o=i.get()-e.get();i.subtract(o*a),!r&&Math.abs(o)<10&&(i.set(t.constrain(i.get())),s.useSpeed(10).useMass(3))}},toggleActive:function(t){n=!t}}}function x(t,e,i,s,r){var a=n(-e+t,i[0]),o=s.map(a.constrain);return{snapsContained:function(){if(e<=t)return[a.max];if("keepSnaps"===r)return o;var i=function(){var t=o[0],e=u(o),i=o.lastIndexOf(t),s=o.indexOf(e)+1;return n(i,s)}(),s=i.min,l=i.max;return o.slice(s,l)}()}}function w(t,e,i,s,r){var a=n(i.min+e.measure(.1),i.max+e.measure(.1)),o=a.reachedMin,l=a.reachedMax;return{loop:function(e){if(function(t){return 1===t?l(s.get()):-1===t&&o(s.get())}(e)){var i=t*(-1*e);r.forEach((function(t){return t.add(i)}))}}}}function b(t){var e=t.max,i=t.length;return{get:function(t){return(t-e)/-i}}}function y(t,e,i,s,n,r){var a,o,l=t.startEdge,h=t.endEdge,d=n.map((function(t){return s[l]-t[l]})).map(i.measure).map((function(t){return-Math.abs(t)})),m=(a=c(d,r).map((function(t){return t[0]})),o=c(n,r).map((function(t){return u(t)[h]-t[0][l]})).map(i.measure).map(Math.abs).map(e.measure),a.map((function(t,e){return t+o[e]})));return{snaps:d,snapsAligned:m}}function v(t,e,i,s,n){var r=s.reachedAny,a=s.removeOffset,o=s.constrain;function l(t,e){return Math.abs(t)<Math.abs(e)?t:e}function h(e,s){var n=e,r=e+i,a=e-i;if(!t)return n;if(!s)return l(l(n,r),a);var o=l(n,1===s?r:a);return Math.abs(o)*s}return{byDistance:function(i,s){var l=n.get()+i,c=function(i){var s=t?a(i):o(i);return{index:e.map((function(t){return t-s})).map((function(t){return h(t,0)})).map((function(t,e){return{diff:t,index:e}})).sort((function(t,e){return Math.abs(t.diff)-Math.abs(e.diff)}))[0].index,distance:s}}(l),d=c.index,u=c.distance,m=!t&&r(l);return!s||m?{index:d,distance:i}:{index:d,distance:i+h(e[d]-u,0)}},byIndex:function(t,i){return{index:t,distance:h(e[t]-n.get(),i)}},shortcut:h}}function A(t,e,i,s,n,r,a,o){var l,h=d(s),c=d(s).reverse(),u=(l=n[0]-1,f(p(c,l),"end")).concat(function(){var t=e-n[0]-1;return f(p(h,t),"start")}());function m(t,e){return t.reduce((function(t,e){return t-s[e]}),e)}function p(t,e){return t.reduce((function(t,i){return m(t,e)>0?t.concat([i]):t}),[])}function f(t,e){var s="start"===e,n=s?-i:i,o=r.findSlideBounds(n);return t.map((function(t){var e=s?0:-i,n=s?i:0,r=o.filter((function(e){return e.index===t}))[0][s?"end":"start"];return{point:r,getTarget:function(){return a.get()>r?e:n},index:t,location:-1}}))}return{canLoop:function(){return u.every((function(t){var i=t.index;return m(h.filter((function(t){return t!==i})),e)<=0}))},clear:function(){u.forEach((function(e){var i=e.index;o[i].style[t.startEdge]=""}))},loop:function(){u.forEach((function(e){var i=e.getTarget,s=e.location,n=e.index,r=i();r!==s&&(o[n].style[t.startEdge]=r+"%",e.location=r)}))},loopPoints:u}}function S(t,e,i){var s=i.style,n="x"===t.scroll?function(t){return"translate3d("+t+"%,0px,0px)"}:function(t){return"translate3d(0px,"+t+"%,0px)"},r=!1;return{clear:function(){s.transform=""},to:function(t){r||(s.transform=n(e.applyTo(t.get())))},toggleActive:function(t){r=!t}}}function C(t,e,i,l,h){var c,C=l.align,k=l.axis,E=l.direction,T=l.startIndex,I=l.inViewThreshold,M=l.loop,F=l.speed,L=l.dragFree,R=l.slidesToScroll,Y=l.skipSnaps,B=l.containScroll,X=e.getBoundingClientRect(),P=i.map((function(t){return t.getBoundingClientRect()})),V=function(t){var e="rtl"===t?-1:1;return{applyTo:function(t){return t*e}}}(E),D=function(t,e){var i="y"===t?"y":"x";return{scroll:i,cross:"y"===t?"x":"y",startEdge:"y"===i?"top":"rtl"===e?"right":"left",endEdge:"y"===i?"bottom":"rtl"===e?"left":"right",measureSize:function(t){var e=t.width,s=t.height;return"x"===i?e:s}}}(k,E),O=(c=D.measureSize(X),{measure:function(t){return 0===c?0:t/c*100},totalPercent:100}),N=O.totalPercent,U=s(C,N),q=function(t,e,i,s,n){var r=t.measureSize,a=t.startEdge,o=t.endEdge,l=s.map(r);return{slideSizes:l.map(e.measure),slideSizesWithGaps:s.map((function(t,e,s){var r=e===m(s),h=window.getComputedStyle(u(i)),c=parseFloat(h.getPropertyValue("margin-"+o));return r?l[e]+(n?c:0):s[e+1][a]-t[a]})).map(e.measure).map(Math.abs)}}(D,O,i,P,M),z=q.slideSizes,W=q.slideSizesWithGaps,_=y(D,U,O,X,P,R),j=_.snaps,H=_.snapsAligned,G=-u(j)+u(W),Z=x(N,G,j,H,B).snapsContained,J=!M&&""!==B?Z:H,K=function(t,e,i){var s,r;return{limit:(s=e[0],r=u(e),n(i?s-t:r,s))}}(G,J,M).limit,Q=r(m(J),T,M),$=Q.clone(),tt=d(i),et=function(t){var e=0;function i(t,i){return function(){t===!!e&&i()}}function s(){e=window.requestAnimationFrame(t)}return{proceed:i(!0,s),start:i(!1,s),stop:i(!0,(function(){window.cancelAnimationFrame(e),e=0}))}}((function(){M||ht.scrollBounds.constrain(ht.dragHandler.pointerDown()),ht.scrollBody.seek(nt).update();var t=ht.scrollBody.settle(nt);t&&!ht.dragHandler.pointerDown()&&(ht.animation.stop(),h.emit("settle")),t||h.emit("scroll"),M&&(ht.scrollLooper.loop(ht.scrollBody.direction()),ht.slideLooper.loop()),ht.translate.to(st),ht.animation.proceed()})),it=J[Q.get()],st=o(it),nt=o(it),rt=f(st,F,1),at=v(M,J,G,K,nt),ot=function(t,e,i,s,n,r){function a(s){var a=s.distance,o=s.index!==e.get();a&&(t.start(),n.add(a)),o&&(i.set(e.get()),e.set(s.index),r.emit("select"))}return{distance:function(t,e){a(s.byDistance(t,e))},index:function(t,i){var n=e.clone().set(t);a(s.byIndex(n.get(),i))}}}(et,Q,$,at,nt,h),lt=function(t,e,i,s,n,r){var a=Math.min(Math.max(r,.01),.99),o=(n?[0,e,-e]:[0]).reduce((function(t,e){return t.concat(l(e,a))}),[]);function l(e,n){var r=i.map((function(t){return t*(n||0)}));return s.map((function(s,n){return{start:s-i[n]+r[n]+e,end:s+t-r[n]+e,index:n}}))}return{check:function(t){return o.reduce((function(e,i){var s=i.index,n=i.start,r=i.end;return-1===e.indexOf(s)&&n<t&&r>t?e.concat([s]):e}),[])},findSlideBounds:l}}(N,G,z,j,M,I),ht={animation:et,axis:D,direction:V,dragHandler:p(D,V,t,nt,L,function(t,e){var i=t.scroll,s={x:"clientX",y:"clientY"},n=o(0),r=o(0),a=o(0),l=o(0),h=[],c=(new Date).getTime(),d=!1;function u(t,e){d=!t.touches;var i=s[e],n=d?t[i]:t.touches[0][i];return l.set(n)}return{pointerDown:function(t){var s=u(t,i);return n.set(s),a.set(s),e.measure(n.get())},pointerMove:function(t){var s=u(t,i),n=(new Date).getTime(),o=n-c;return o>=10&&(o>=100&&(h=[]),h.push(s.get()),c=n),r.set(s).subtract(a),a.set(s),e.measure(r.get())},pointerUp:function(){var t=(new Date).getTime()-c,i=a.get(),s=h.slice(-5).map((function(t){return i-t})).sort((function(t,e){return Math.abs(t)<Math.abs(e)?1:-1}))[0];return a.set(t>100||!s?0:s),h=[],e.measure(a.get())},readPoint:u}}(D,O),st,et,ot,rt,at,Q,h,M,Y),eventStore:a(),pxToPercent:O,index:Q,indexPrevious:$,limit:K,location:st,options:l,scrollBody:rt,scrollBounds:g(K,st,nt,rt),scrollLooper:w(G,O,K,st,[st,nt]),scrollProgress:b(K),scrollSnaps:J,scrollTarget:at,scrollTo:ot,slideLooper:A(D,N,G,W,J,lt,st,i),slidesInView:lt,slideIndexes:tt,target:nt,translate:S(D,V,e)};return ht}i.r(e),i.d(e,{default:()=>E});var k={align:"center",axis:"x",containScroll:"",direction:"ltr",dragFree:!1,draggable:!0,inViewThreshold:0,loop:!1,skipSnaps:!1,slidesToScroll:1,speed:10,startIndex:0};const E=function(t,e,i){var s,n,r,a,o,l,h,c,d,u=function(){var t={};function e(e){return t[e]||[]}var i={emit:function(t){return e(t).forEach((function(e){return e(t)})),i},off:function(s,n){return t[s]=e(s).filter((function(t){return t!==n})),i},on:function(s,n){return t[s]=e(s).concat([n]),i}};return i}(),m=(s=function(){if(x){var t=a.axis.measureSize(h.getBoundingClientRect());y!==t&&S(),u.emit("resize")}},n=500,r=0,function(){window.clearTimeout(r),r=window.setTimeout(s,n)||0}),p=S,f=u.on,g=u.off,x=!1,w=Object.assign({},k),b=Object.assign({},w),y=0;function v(){var e,i="container"in t&&t.container,s="slides"in t&&t.slides;h="root"in t?t.root:t,c=i||h.children[0],d=s||[].slice.call(c.children),e=getComputedStyle(h,":before").content,o={get:function(){try{return JSON.parse(e.slice(1,-1).replace(/\\/g,""))}catch(t){}return{}}}}function A(t,e){if(v(),w=Object.assign({},w,t),b=Object.assign({},w,o.get()),l=Object.assign([],e),(a=C(h,c,d,b,u)).eventStore.add(window,"resize",m),a.translate.to(a.location),y=a.axis.measureSize(h.getBoundingClientRect()),l.forEach((function(t){return t.init(F)})),b.loop){if(!a.slideLooper.canLoop())return E(),A({loop:!1},e);a.slideLooper.loop()}b.draggable&&c.offsetParent&&d.length&&a.dragHandler.addActivationEvents(),x||(setTimeout((function(){return u.emit("init")}),0),x=!0)}function S(t,e){if(x){var i=M(),s=Object.assign({startIndex:i},t);E(),A(s,e||l),u.emit("reInit")}}function E(){a.dragHandler.removeAllEvents(),a.animation.stop(),a.eventStore.removeAll(),a.translate.clear(),a.slideLooper.clear(),l.forEach((function(t){return t.destroy()}))}function T(t){var e=a[t?"target":"location"].get(),i=b.loop?"removeOffset":"constrain";return a.slidesInView.check(a.limit[i](e))}function I(t,e,i){a.scrollBody.useBaseMass().useSpeed(e?100:b.speed),x&&a.scrollTo.index(t,i||0)}function M(){return a.index.get()}var F={canScrollNext:function(){return a.index.clone().add(1).get()!==M()},canScrollPrev:function(){return a.index.clone().add(-1).get()!==M()},clickAllowed:function(){return a.dragHandler.clickAllowed()},containerNode:function(){return c},internalEngine:function(){return a},destroy:function(){x&&(E(),x=!1,u.emit("destroy"))},off:g,on:f,previousScrollSnap:function(){return a.indexPrevious.get()},reInit:p,rootNode:function(){return h},scrollNext:function(t){I(a.index.clone().add(1).get(),!0===t,-1)},scrollPrev:function(t){I(a.index.clone().add(-1).get(),!0===t,1)},scrollProgress:function(){return a.scrollProgress.get(a.location.get())},scrollSnapList:function(){return a.scrollSnaps.map(a.scrollProgress.get)},scrollTo:I,selectedScrollSnap:M,slideNodes:function(){return d},slidesInView:T,slidesNotInView:function(t){var e=T(t);return a.slideIndexes.filter((function(t){return-1===e.indexOf(t)}))}};return A(e,i),F}},124:()=>{},40:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Carousel=void 0;var n=s(i(689)),r=i(595),a=function(){function t(t){var e=this;this.carousel=t,this.initialised=!1;var i=this.carousel.classList.contains("loop"),s=i?Math.floor(this.carousel.querySelectorAll(".carousel-slide").length/2):0;this.contentSections=this.carousel.parentElement.querySelectorAll(".carousel-content"),this.fixedContentSection=this.carousel.parentElement.querySelector(".carousel-fixed-content"),this.setContent(s);var r={align:"center",loop:i,containScroll:i?"":"trimSnaps",startIndex:s};this.embla=(0,n.default)(this.carousel,r),this.embla.on("select",(function(){return e.setContent(e.embla.selectedScrollSnap())})),this.setupNavigation(),addEventListener("scroll",(function(){return e.initInViewport()}),!1),addEventListener("resize",(function(){return e.setFixedContentHeight()}),!1),this.setFixedContentHeight()}return t.prototype.setContent=function(t){this.contentSections&&this.contentSections.length>0&&this.contentSections.forEach((function(e){var i=e.querySelectorAll(":scope > div");i.forEach((function(t){t.classList.remove(r.ACTIVE_CLASS)})),i[t].classList.add(r.ACTIVE_CLASS)}))},t.prototype.setupNavigation=function(){var t=this,e=this.carousel.parentElement.querySelector(".carousel-nav-previous"),i=this.carousel.parentElement.querySelector(".carousel-nav-next"),s=this.carousel.parentElement.querySelector(".carousel-chevron-previous"),n=this.carousel.parentElement.querySelector(".carousel-chevron-next");e&&e.addEventListener("click",(function(){return t.embla.scrollPrev()})),s&&s.addEventListener("click",(function(){return t.embla.scrollPrev()})),i&&i.addEventListener("click",(function(){return t.embla.scrollNext()})),n&&n.addEventListener("click",(function(){return t.embla.scrollNext()}))},t.prototype.initInViewport=function(){var t=this.carousel.getBoundingClientRect();this.initialised||(this.initialised=t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth),this.initialised&&(this.embla.reInit(),this.setFixedContentHeight()))},t.prototype.setFixedContentHeight=function(){if(this.fixedContentSection&&window.innerWidth>r.Breakpoints.MD){var t=this.fixedContentSection.querySelectorAll(":scope > div"),e=0;t.forEach((function(t){var i=t.clientHeight;i>e&&(e=i)})),this.fixedContentSection.style.minHeight=e+"px"}},t}();e.Carousel=a},327:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hero=void 0;var s=i(842),n=i(595),r=i(356),a="home-hero",o=["green","pink","yellow","red","cyan"],l=["cyberpunk","eastern-gem","spacestation","underworld","fantasy"],h=function(){function t(){this.colour=o[0],this.image=l[0];var t=document.getElementById(a);t&&(this.homeHeroImages=t.querySelector(".home-hero-image"),this.init(),this.preloadImages())}return t.prototype.init=function(){var t=this;new s.SpinePlayer(a,{jsonUrl:""+n.SPINE_PATH+"rei_animation.json",atlasUrl:""+n.SPINE_PATH+"rei_animation.atlas",animation:"idle_"+this.colour,skin:"rei_"+this.colour,showControls:!1,alpha:!0,backgroundColor:"#00000000",premultipliedAlpha:!1,showLoading:!1,success:function(e){t.setSpine(e),t.setImage(),document.getElementById(a).querySelector("div").classList.add(n.ACTIVE_CLASS),t.cyclePasses(e),t.resize()}}),window.addEventListener("resize",this.resize),this.resize()},t.prototype.cyclePasses=function(t){var e=this;setTimeout((function(){var i=document.getElementById(a);i.querySelector("div").classList.add(n.TRANSITION_CLASS),setTimeout((function(){i.querySelector("div").classList.remove(n.TRANSITION_CLASS);var s=o.indexOf(e.colour);s===o.length-1&&(s=-1),e.colour=o[s+1],e.image=l[s+1],e.setSpine(t),e.setImage(),e.cyclePasses(t)}),1e3)}),3e3)},t.prototype.setSpine=function(t){t.animationState.setAnimation(0,"idle_"+this.colour,!0),t.skeleton.skin=null,t.skeleton.setSkinByName("rei_"+this.colour),t.skeleton.setSlotsToSetupPose()},t.prototype.setImage=function(){var t=this;this.homeHeroImages.querySelectorAll("picture").forEach((function(e){(0,r.updatePictureSrc)(e,n.ASSETS_PATH+"hero-"+t.image)}))},t.prototype.preloadImages=function(){var t=(0,r.supportsWebP)()?".webp":".png";l.forEach((function(e){(0,r.preloadImage)(n.ASSETS_PATH+"hero-"+e+t)}))},t.prototype.resize=function(){var t=document.getElementById(a),e=t.clientWidth-150,i=t.clientHeight,s=window.innerWidth>n.Breakpoints.MD?80:120;window.innerWidth>n.Breakpoints.MD&&(e<i&&(s=80+3*(i/e*80-80)+20));t.style.bottom="-"+s+"px"},t}();e.Hero=h},972:function(t,e,i){var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&s(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.app=e.App=void 0;var a=r(i(171)),o=i(40),l=i(327),h=i(352),c=i(345),d=function(){function t(){this.accordions=document.querySelectorAll(".accordion-container"),this.carousels=document.querySelectorAll(".carousel"),this.selectors=document.querySelectorAll(".selector"),this.nav=new h.Nav,this.hero=new l.Hero,this.initCarousels(),this.initSelectors(),this.initAccordions()}return t.prototype.initAccordions=function(){new a.default(Array.from(this.accordions),{duration:150,showMultiple:!0})},t.prototype.initCarousels=function(){this.carousels.forEach((function(t){new o.Carousel(t)}))},t.prototype.initSelectors=function(){this.selectors.forEach((function(t){new c.Selector(t)}))},t}();e.App=d,e.app=new d},352:function(t,e,i){var s=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)!s&&n in e||(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Nav=void 0;var n=i(595),r=".sub-nav",a="a.subtitle",o=function(){function t(){var t=this;this.menu=document.querySelector(".menu"),this.menuLink=document.querySelector(".menu-link"),this.mainNavLinks=Array.from(document.querySelectorAll(".main-nav > li > a")),this.subNavs=document.querySelectorAll(r),this.subNavLinks=Array.from(document.querySelectorAll(".sub-nav a")),this.footerLinks=Array.from(document.querySelectorAll(".footer-links a.btn-link-underlined")),this.footerSubNavLinks=Array.from(document.querySelectorAll(".footer-links a.subtitle")),this.mainLinks=s(s([],this.mainNavLinks,!0),this.footerLinks,!0),this.subLinks=s(s([],this.subNavLinks,!0),this.footerSubNavLinks,!0),this.headerMenu=document.querySelector(".headerMenu"),this.menuLink.addEventListener("click",(function(){t.menu.classList.toggle(n.ACTIVE_CLASS),document.body.classList.toggle(n.MENU_OPEN_CLASS),"none"===t.headerMenu.style.display?t.headerMenu.style.display="inline":t.headerMenu.style.display="none"})),this.subLinks.forEach((function(e){e.addEventListener("click",(function(){t.menu.classList.remove(n.ACTIVE_CLASS),document.body.classList.remove(n.MENU_OPEN_CLASS),setTimeout((function(){t.setActiveLink()}),50)}))})),this.setActiveLink()}return t.prototype.setActiveLink=function(){var t=this,e=window.location.pathname.split("?")[0],i=window.location.hash.toLowerCase();this.mainLinks.forEach((function(t){t.classList.remove(n.ACTIVE_CLASS)})),this.mainLinks.forEach((function(t){t.getAttribute("href")===e&&t.classList.add(n.ACTIVE_CLASS)})),this.subLinks.forEach((function(t){t.classList.remove(n.ACTIVE_CLASS)})),i?this.subLinks.forEach((function(t){-1!==t.getAttribute("href").toLowerCase().indexOf(i)&&(t.classList.add(n.ACTIVE_CLASS),setTimeout((function(){var t=document.querySelector(i.replace("#","."));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}),500))})):(this.mainNavLinks.forEach((function(i,s){if(i.getAttribute("href")===e){var r=t.subNavs[s].querySelectorAll("a")[0];r&&r.classList.add(n.ACTIVE_CLASS)}})),this.footerLinks.forEach((function(i,s){if(i.getAttribute("href")===e){var r=t.footerLinks[s].parentElement.querySelectorAll(a)[0];r&&r.classList.add(n.ACTIVE_CLASS)}})))},t}();e.Nav=o},345:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Selector=void 0;var s=i(595),n=function(){function t(t){var e=this;this.selector=t,this.links=this.selector.querySelectorAll(".selector-link"),this.images=this.selector.querySelectorAll(".selector-image .selector-image-content"),this.contents=this.selector.querySelectorAll(".selector-content div"),this.links[0].classList.add(s.ACTIVE_CLASS),this.images[0].classList.add(s.ACTIVE_CLASS),this.contents[0].classList.add(s.ACTIVE_CLASS),this.links.forEach((function(t){var i=Array.from(t.parentNode.children).indexOf(t);t.addEventListener("click",(function(){return e.linkClicked(i)}))}))}return t.prototype.linkClicked=function(t){this.links.forEach((function(t){return t.classList.remove(s.ACTIVE_CLASS)})),this.links[t].classList.add(s.ACTIVE_CLASS),this.images.forEach((function(t){return t.classList.remove(s.ACTIVE_CLASS)})),this.images[t].classList.add(s.ACTIVE_CLASS),this.contents.forEach((function(t){return t.classList.remove(s.ACTIVE_CLASS)})),this.contents[t].classList.add(s.ACTIVE_CLASS)},t}();e.Selector=n},595:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Breakpoints=e.TRANSITION_CLASS=e.ASSETS_PATH=e.SPINE_PATH=e.MENU_OPEN_CLASS=e.ACTIVE_CLASS=void 0,e.ACTIVE_CLASS="active",e.MENU_OPEN_CLASS="menu-open",e.SPINE_PATH="/assets/images/spine/",e.ASSETS_PATH="/assets/images/",e.TRANSITION_CLASS="transition",function(t){t[t.SM=599]="SM",t[t.MD=1023]="MD",t[t.LG=1439]="LG"}(e.Breakpoints||(e.Breakpoints={}))},356:(t,e)=>{function i(){return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}Object.defineProperty(e,"__esModule",{value:!0}),e.updatePictureSrc=e.supportsWebP=e.preloadImage=void 0,e.preloadImage=function(t){(new Image).src=t},e.supportsWebP=i,e.updatePictureSrc=function(t,e){var s=i()?".webp":".png";t.querySelectorAll("source")[0].srcset=e+".webp",t.querySelectorAll("source")[1].srcset=e+".png",t.querySelector("img").src=""+e+s}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(972);i(124)})();